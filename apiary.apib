HOST: http://private-6de4-lokidev.apiary.io/loki

--- LWS-REST (dev) ---

---
# This documentation is for the public API, pre-release (dev) version
See also [GA documentation](http://docs.lokiserver.apiary.io/) and [branch (pre-release) documentation](http://docs.lokiserverbranch.apiary.io).

**UNRELEASED** (development edition) Documentation for the Loki Provisioning LWS-REST API.

#General

At this time, the application/hal+json content type is supported in request and response bodies.

**Note: all references to <code>lokiserver.apiary.io</code> are for example purposes only. In a deployed Loki Server
these will be references to the LWS-REST API host.**

## Single vs Multi cluster BroadWorks behaviour
If LWS-REST is configured in single cluster mode and you try to access a resource that does not exist you will receive a 404 Not Found response with the body in the following format:
<pre>{
    "errorCode": "NOT_FOUND",
    "externalErrorCode": "4152",
    "externalErrorSummary": "[Error 4152] Group not found: Enterprise:Group",
    "externalErrorDetail": "[Error 4152] Group not found: Enterprise:Group"
}
</pre>

If LWS-REST is configured in multi cluster mode and you try to access a resource that does not exist you will recieve a 404 Not Found response with the body in the following format:
<pre>{
    "errorCode": "NOT_FOUND",
    "summary": "The requested resource does not exist",
    "detail": "Group [Enterprise:Group] not found in Broadworks."
}
</pre>

Clients of LWS-REST should support both response body formats.

## Different responses depending on BroadWorks version
LWS-REST returns different results depending on the BroadWorks version when sending a request which results in an invalid XML request to BroadWorks. 
See below for different error responses:

For BroadWorks version 17sp4 with bad patch (preventing return of 6004 BroadWorks response) result is:<br />
Response code: 502
<pre>{
    "errorCode": "CLIENT_ERROR",
    "summary": "ociClient",
    "detail": "Received empty response"
}
</pre>

However if a timeout is set for BroadWorks service (broadworks > requestTimeout from config.xml) to a value smaller than timeout value set in BroadWorks (usually 30 seconds) the result is:<br />
Response code: 504
<pre>{
    "errorCode": "ETIMEDOUT",
    "summary": "ociClient",
    "detail": "Received null response"
}
</pre>

For BroadWorks version > 17sp4 result is:<br />
Response code: 500
<pre>{
    "errorCode": "EXTERNAL_API_SERVER",
    "externalErrorCode": "6004",
    "externalErrorSummary": "[Error 6004] OCI XML Request validation error",
    "externalErrorDetail": "[BroadWorks detail message]"
}</pre>

Clients of LWS-REST should support all the response body formats.

## BroadWorks Service values in LWS-REST
LWS-REST does not support BroadWorks Service name labels.
If you are using a request that takes as input a BroadWorks Service name you need to provide the BroadWorks Service name value.
For example:
* Service label "BroadTouch Business Communicator Mobile - Video" corresponds to OCI service value "Client License 17".

This applies for ALL LWS-REST requests.<br/>
<b>Note</b>: Using BroadWorks Service labels instead of their actual values will result in un-expected behaviour.

## URI Templates
Refer to https://tools.ietf.org/html/rfc6570 for details on URI Templates. Not that LWS-REST
uses reserved characters (i.e. ":") in some URI Template variables, thus the request templates
use the "{+id}" format - see additional detail at https://tools.ietf.org/html/rfc6570#section-3.2.3.

## Collections
Unless otherwise noted, Collection resources support standard REST request methods:

<dl>
<dt>HEAD
<dd>Retrieve resource metadata without retrieving the representation.
 Common response codes:
<ul>
<li>204 No Content: Resource exists. No body (no representation) is returned.
<li>404 Not Found: Resource does not exist.
</ul>
<dt>GET
<dd>Retrieve a representation of a resource. There are two standard forms of GET:
<ul>
<li>GET on a specific resource {id} (given the resource's URI).
<li>GET on the Collection, with query parameters. You can query for exact matches
on any of the core parameters, as well as any extension parameters supported by the
network elements configured in the system. Note that if appropriate, the Collection
may include a search Controller (described in the individual sections below) to support complex searches.
</ul>
Common response codes:
<ul>
<li>200 OK: Resource exists; response body contains representation.
<li>204 No Content: Resource exists; there is no body (no representation) to be returned.
<li>404 Not Found: Resource does not exist.
</ul>
<dt>POST
<dd>Create a new resource in the Collection. Also used in special cases to invoke controller resources. Common response codes:
<ul>
<li>200 OK: Pre-validation completed successfully. The optional response body includes any pre-validation results.
<li>201 Created: Resource created. URI of the created Resource is returned in the Location headder and the "url" element in the response body.
<li>204 No Content: Pre-validation completed with no action. This response is sent when a POST is called with "mode=prevalidate-only) on a resource that does not have a pre-validation routine.
<li>400 Bad Request: Request is not valid (e.g. missing required paramterer, invalid values, etc).
<li>404 Not Found: A required resource was not found (e.g. BroadWorks Group does not exist when creating a VoIP User).
<li>409 Conflict: Pre-validation failed because a resource with an identical key (which may be a composite key combining several parameters) already exists. Response body will include a link to the URI of the existing resource.
<li>422 Unprocessable Entity: Pre-validation failed due to a failed semantic test. The response body includes details on the failure(s).
<li>Some POST response codes are only sentfor certain values of the "mode" URL parameter, as noted below:
<ul>
<li>prevalidate-only: 200, 204, 400, 409, 422
<li>prevalidate-and-create: 201, 400, 409, 422
<li>create-only: 201, 400
</ul>
</ul>
<dt>PUT
<dd>Update an existing Resource in the Collection. Any key fields (those which comprise the key which uniquely identifies a resource)
are immutable (may not be changed). See the documentation for each resource for the list of keys. Common response codes:
<ul>
<li>200 OK: Resource successfully updated.
<li>400 Bad Reqkuest: Request is not valid (e.g. invalid values, etc).
<li>403 Forbidden: Update is not allowed (e.g. attempt to update a read-only field).
<li>404 Not Found: resource does not exist
</ul>
<dt>DELETE
<dd>Delete a resource. Common response codes:
<ul>
<li>204 No Content: Resource successfully deleted
<li>404 Not Found: Resource does not exist
</ul>
<dt>OPTIONS
<dd>Fetch resource metadata, including the list of allowed methods. Common response codes:
<ul>
<li>[future] 200 OK: Resource exists. Accept header lists allowed request methods. Response body may provide additional information.
<li>204 No Content: Resource exists. Accept header lists allowed request methods.
<li>404 Not Found: Resource does not exist.
</dl>
---

--
Number Translations
##Collection

Supported network elements:

* Sonus PSX

Loki must have at least one Network Element configured with support for Number Translations (e.g. Sonus PSX).

Loki must be configured to select the appropriate Network Element for new Number Translations
(by default, the first configured Network Element with Number Translations support will be used).

See the Loki documentation appropriate to the configured Network Element for mappings to 3rd-party API fields and
references to 3rd-party documentation.

Keys:

* sourceDn

Extension Keys:

* attributes
* callProcessingElement1Id
* callProcessingElement2Id
* callProcessingElement3Id
* callProcessingElement4Id
* callProcessingElementType

[pending: per-parameter descriptions - pending an apiary.io upgrade]

[pending: per-parameter schema/validation information - pending an apiary.io upgrade]

Refer to the **Sonus Insight API Programmer Guide** for descriptions, data types, defaults, and allowed values for
request and response properties under <code>extensions.sonusPsx</code>. Note:

* If the Sonus documentation indicates a data type of integer, short, or long, the value will be numeric in the LWS-REST JSON responses.
* If the Sonus documentation indicates a data type of string, the value will be a string (or null) in the LWS-REST JSON responses.
--

Create a new Number Translation.
POST /number-translations
> Content-Type: application/json
{
    "sourceDn" : "+1-8665554321",
    "translatedDn" : "+1-5553043000",
    "extensions" : {
        "sonusPsx" : {
            "attributes" : 0,
            "callProcessingElement1Id" : "978",
            "callProcessingElement2Id" : null,
            "callProcessingElement3Id" : null,
            "callProcessingElement4Id" : null,
            "callProcessingElementType" : 5,
            "servicesProvisioned" : 0,
            "phoneType" : 1,
            "suspendedFlag" : 0,
            "directTranslationFlag" : 0,
            "translationLabelId" : null,
            "translatedCarrierId" : null,
            "translatedCalltype" : 0,
            "translatedNpi" : 0,
            "translatedNoa" : 13,
            "useTranslationProfile" : 0,
            "translationProfileId" : null
        }
    }
}
< 201
< Location: http://lokiserver.apiary.io/loki/number-translations/3-1-8665554321-0-978----5
< Transaction-Id: 1380080943120
+++++
< 409
< Content-Type: application/hal+json
< Transaction-Id: 1380080943120
{
    "_links" : {
        "self" : {
            "href" : "http://lokiserver.apiary.io/loki/number-translations"
        }
    },
    "curies" : [
        {
            "name" : "ls",
            "href" : "http://lokiserver.apiary.io/loki/rels/{rel}",
            "templated" : true
        }
    ],
    "_embedded" : {
        "ls:number-translations" : {
            "_links" : {
                "self" : {
                    "href" : "http://lokiserver.apiary.io/loki/number-translations/3-1-8665554321-0-978----5"
                }
            },
            "id" : "3-1-8665554321-0-978----5",
            "sourceDn" : "+1-8665554321",
            "translatedDn" : "+1-5553043210",
            "extensions" : {
                "sonusPsx" : {
                    "attributes" : 0,
                    "callProcessingElement1Id" : "978",
                    "callProcessingElement2Id" : null,
                    "callProcessingElement3Id" : null,
                    "callProcessingElement4Id" : null,
                    "callProcessingElementType" : 5,
                    "servicesProvisioned" : 1,
                    "phoneType" : 0,
                    "suspendedFlag" : 0,
                    "directTranslationFlag" : 0,
                    "translationLabelId" : null,
                    "translatedCarrierId" : null,
                    "translatedCalltype" : 0,
                    "translatedNpi" : 0,
                    "translatedNoa" : 12,
                    "useTranslationProfile" : 0,
                    "translationProfileId" : null
                }
            }
        }
    }
}
+++++
< 500
< Transaction-Id: 1380080943120
< Content-Type: application/json
{
    "errorCode" : "**tbd",
    "summary" : "Internal Error",
    "detail" : "[detail here]"
}


Query number translations. Responses will include (at a minimum) they fields comprising the unique key for the resource.

[future: pagination of results via offset and max; field parameter to specify included/excluded fields]

[future: enhance to include all parameters, not just the key and the full uri? means larger response body,
but also means the client doesn't have to follow with a get /loki/number-translations/{+id} if they want the full resource
representation.]

##URI Query Parameters

<table border=1>
    <thead>
    <th>Parameter</th>
    <th>Required?</th>
    <th>Type</th>
    <th>Mode</th>
    </thead>
    <tbody>
        <tr>
            <td>sourceDn</td>
            <td style="text-align: center; font-weight:bold">yes</td>
            <td>core</td>
            <td>Equal To</td>
        </tr>
        <tr>
            <td>attributes</td>
            <td style="text-align: center; font-weight:bold">yes</td>
            <td>extension</td>
            <td>Equal To</td>
        </tr>
        <tr>
            <td>callProcessingElement1Id</td>
            <td style="text-align: center; font-weight:bold">yes</td>
            <td>extension</td>
            <td>Equal To</td>
        </tr>
        <tr>
            <td>callProcessingElement2Id</td>
            <td style="text-align: center; font-weight:bold">yes</td>
            <td>extension</td>
            <td>Equal To</td>
        </tr>
        <tr>
            <td>callProcessingElement3Id</td>
            <td style="text-align: center; font-weight:bold">yes</td>
            <td>extension</td>
            <td>Equal To</td>
        </tr>
        <tr>
            <td>callProcessingElement4Id</td>
            <td style="text-align: center; font-weight:bold">yes</td>
            <td>extension</td>
            <td>Equal To</td>
        </tr>
        <tr>
            <td>callProcessingElementType</td>
            <td style="text-align: center; font-weight:bold">yes</td>
            <td>extension</td>
            <td>Equal To</td>
        </tr>
    </tbody>
</table>
GET /number-translations{?sourceDn,attributes,callProcessingElement1Id,callProcessingElement2Id,callProcessingElement3Id,callProcessingElement4Id,callProcessingElementType}
< 200
< Content-Type: application/hal+json
< Transaction-Id: 1380080943120
{
    "_links" : {
        "self" : {
            "href" : "http://lokiserver.apiary.io/loki/number-translations?sourceDn=%2B1-8665554321&attributes=0&callProcessingElement1Id=978&callProcessingElement2Id=&callProcessingElement3Id=&callProcessingElement4Id=&callProcessingElementType=5"
        }
    },
    "curies" : [
        {
            "name" : "ls",
            "href" : "http://lokiserver.apiary.io/loki/rels/{rel}",
            "templated" : true
        }
    ],
    "_embedded" : {
        "ls:number-translations" : [
            {
                "_links" : {
                    "self" : {
                        "href" : "http://lokiserver.apiary.io/loki/number-translations/3-1-8665554321-0-978----5"
                    }
                },
                "id" : "3-1-8665554321-0-978----5",
                "sourceDn" : "+1-8665554321",
                "translatedDn" : "+1-5553043000",
                "extensions" : {
                    "sonusPsx" : {
                        "attributes" : 0,
                        "callProcessingElement1Id" : "978",
                        "callProcessingElement2Id" : null,
                        "callProcessingElement3Id" : null,
                        "callProcessingElement4Id" : null,
                        "callProcessingElementType" : 5,
                        "servicesProvisioned" : 0,
                        "phoneType" : 1,
                        "suspendedFlag" : 0,
                        "directTranslationFlag" : 0,
                        "translationLabelId" : null,
                        "translatedCarrierId" : null,
                        "translatedCalltype" : 0,
                        "translatedNpi" : 0,
                        "translatedNoa" : 13,
                        "useTranslationProfile" : 0,
                        "translationProfileId" : null
                    }
                }
            }
        ]
    }
}
+++++
< 404
< Transaction-Id: 1380080943120
{
    "errorCode": "ERR_REC_NOT_FOUND",
    "summary": "Failed to 'Retrieve' entity.",
    "detail": "<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<soapenv:Envelope xmlns:soapenv=\"http://schemas.xmlsoap.org/soap/envelope/\" [^] xmlns:xsd=\"http://www.w3.org/2001/XMLSchema\" [^] xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\">\n [^] <soapenv:Body>\n <soapenv:Fault>\n <faultcode>soapenv:Server.generalException</faultcode>\n <faultstring></faultstring>\n <detail>\n <ns1:fault href=\"#id0\" xmlns:ns1=\"http://www.sonusnet.com/ems/emsapi/psx/r07_03_06/intf\"/>\n [^] <ns2:exceptionName xmlns:ns2=\"http://xml.apache.org/axis/\">com.sonus.ems.api.psx.r07_03_06.model.ProvApiException</ns2:exceptionName>\n [^] </detail>\n </soapenv:Fault>\n <multiRef id=\"id0\" soapenc:root=\"0\" soapenv:encodingStyle=\"http://schemas.xmlsoap.org/soap/encoding/\" [^] xsi:type=\"ns3:ProvApiException\" xmlns:soapenc=\"http://schemas.xmlsoap.org/soap/encoding/\" [^] xmlns:ns3=\"http://www.sonusnet.com/ems/emsapi/psx/r07_03_06/model\">\n [^] <errorCode xsi:type=\"xsd:string\">ERR_REC_NOT_FOUND</errorCode>\n <message xsi:type=\"xsd:string\">Failed to 'Retrieve' entity.</message>\n <rootCause xsi:type=\"xsd:string\">(ERR_REC_NOT_FOUND) [resource] not found for the given criteria. (rc=17)</rootCause>\n </multiRef>\n </soapenv:Body>\n</soapenv:Envelope>"
}
+++++
< 400
< Transaction-Id: 1380080943120
< Content-Type: application/json
{
    "errorCode" : "FORMAT_ERROR",
    "summary" : "Internal Error",
    "detail" : "Request validation failed: params.sourceDn does not match pattern^\\+[0-9]+-[0-9]+$: was processing value \"+1-\""
}


Update a number translation. All fields are optional.
PUT /number-translations/{+id}
> Content-Type: application/json
{
    "translatedDn" : "+1-5553043000",
    "extensions" : {
        "sonusPsx" : {
            "servicesProvisioned" : 0,
            "phoneType" : 1,
            "suspendedFlag" : 0,
            "directTranslationFlag" : 0,
            "translationLabelId" : null,
            "translatedCarrierId" : null,
            "translatedCalltype" : 0,
            "translatedNpi" : 0,
            "translatedNoa" : 13,
            "useTranslationProfile" : 0,
            "translationProfileId" : null
        }
    }
}
< 204
< Transaction-Id: 1380080943120
+++++
< 404
< Transaction-Id: 1380080943120


Delete a number translation.
DELETE /number-translations/{+id}
< 204
< Transaction-Id: 1380080943120
+++++
< 404
< Transaction-Id: 1380080943120


--
Subscribers
##Collection

Supported network elements:

* Sonus PSX

Keys:

* subscriberDn

Extension Keys:

* owningCarrierId

Refer to the **Sonus Insight API Programmer Guide** for descriptions, data types, defaults, and allowed values for
request and response properties under <code>extensions.sonusPsx</code>. Note:

* If the Sonus documentation indicates a data type of integer, short, or long, the value will be numeric in the LWS-REST JSON responses.
* If the Sonus documentation indicates a data type of string, the value will be a string (or null) in the LWS-REST JSON responses.
--


Create a new Subscriber.
POST /subscribers
> Content-Type: application/json
{
    "subscriberDn" : "+1-2005553001",
    "extensions" : {
        "sonusPsx" : {
            "owningCarrierId" : "16",
            "businessGroupId" : null,
            "interLataCarrierId" : "5000",
            "intraLataCarrierId" : "5000",
            "intlCarrierId" : "5000",
            "assignedCarrierId" : null,
            "presentationFlag" : 0,
            "prfdPacketServiceProfileId" : null,
            "optionType" : 0,
            "testSubscriber" : 0,
            "billingPlanId" : "EXAMPLE_PLAN",
            "localCarrierId" : "5000",
            "authcodeScriptId" : "EXAMPLE_SCRIPT",
            "elementAttributes" : 0,
            "classOfServiceId" : "EXAMPLE_COS",
            "pseudoCarrierId" : null,
            "infoDigitId" : null,
            "scpBusinessServiceGroup" : 0,
            "authcodeGroupId" : null,
            "pinDigits" : null,
            "svcList1" : 0,
            "svcList2" : 0,
            "exceptionProfileId" : "EXAMPLE_PROFILE",
            "isDestination" : 1,
            "defaultCpc" : null,
            "homeMobileNetwork" : 0,
            "origEntityRoutingProfileId" : "EXAMPLE_RTGPROFILE",
            "callingArea" : "555_EXAMPLE",
            "businessUnitId" : null,
            "deviceProfileId" : null,
            "memberStatus" : -1
        }
    }
}
< 201
< Location: http://lokiserver.apiary.io/loki/subscribers/1-2005553001-1-16
< Transaction-Id: 1380080943120
+++++
< 409
< Content-Type: application/hal+json
< Transaction-Id: 1380080943120
{
    "_links" : {
        "self" : {
            "href" : "http://lokiserver.apiary.io/loki/subscribers"
        }
    },
    "curies" : [
        {
            "name" : "ls",
            "href" : "http://lokiserver.apiary.io/loki/rels/{rel}",
            "templated" : true
        }
    ],
    "_embedded" : {
        "ls:subscribers" : {
            "_links" : {
                "self" : {
                    "href" : "http://lokiserver.apiary.io/loki/subscribers/1-2005553001-1-16"
                }
            },
            "id" : "1-2005553001-1-16",
            "subscriberDn" : "+1-2005553001",
            "extensions" : {
                "sonusPsx" : {
                    "owningCarrierId" : "16",
                    "businessGroupId" : null,
                    "interLataCarrierId" : "0000",
                    "intraLataCarrierId" : "0000",
                    "intlCarrierId" : "0000",
                    "assignedCarrierId" : null,
                    "presentationFlag" : 0,
                    "prfdPacketServiceProfileId" : null,
                    "optionType" : 0,
                    "testSubscriber" : 0,
                    "billingPlanId" : "EXAMPLE_ANOTHER",
                    "localCarrierId" : "0000",
                    "authcodeScriptId" : "EXAMPLE_ANOTHER",
                    "elementAttributes" : 0,
                    "classOfServiceId" : "EXAMPLE_ANOTHER",
                    "pseudoCarrierId" : null,
                    "infoDigitId" : null,
                    "scpBusinessServiceGroup" : 0,
                    "authcodeGroupId" : null,
                    "pinDigits" : null,
                    "svcList1" : 0,
                    "svcList2" : 0,
                    "exceptionProfileId" : "EXAMPLE_ANOTHER",
                    "isDestination" : 1,
                    "defaultCpc" : null,
                    "homeMobileNetwork" : 0,
                    "origEntityRoutingProfileId" : "EXAMPLE_ANOTHER",
                    "callingArea" : "555_ANOTHER",
                    "businessUnitId" : null,
                    "deviceProfileId" : null,
                    "memberStatus" : -1
                }
            }
        }
    }
}
+++++
< 500
< Transaction-Id: 1380080943120
< Content-Type: application/json
{
    "errorCode" : "**tbd",
    "summary" : "**tbd Internal Error",
    "detail" : "[detail here]"
}
+++++
< 400
< Transaction-Id: 1380080943120
< Content-Type: application/json
{
    "errorCode" : "FORMAT_ERROR",
    "summary" : "Input validation failure",
    "detail" : "Request validation failed: params.subscriberDn does not match pattern^\\+[0-9]+-[0-9]+$: was processing value \"+1-\""
}

Query Subscribers. Responses will include (at a minimum) they fields comprising the unique key for the resource.

##URI Query Parameters

<table border=1>
    <thead>
    <th>Parameter</th>
    <th>Required?</th>
    <th>Mode</th>
    </thead>
    <tbody>
        <tr>
            <td>subscriberDn</td>
            <td style="text-align: center; font-weight:bold">yes</td>
            <td>Equal To</td>
        </tr>
        <tr>
            <td>owningCarrierId</td>
            <td style="text-align: center; font-weight:bold">yes</td>
            <td>Equal To</td>
        </tr>
    </tbody>
</table>
GET /subscribers{?subscriberDn,owningCarrierId}
< 200
< Content-Type: application/hal+json
< Transaction-Id: 1380080943120
{
    "_links" : {
        "self" : {
            "href" : "http://lokiserver.apiary.io/loki/subscribers?subscriberDn=%2B1-2005553001&owningCarrierId=16"
        }
    },
    "curies" : [
        {
            "name" : "ls",
            "href" : "http://lokiserver.apiary.io/loki/rels/{rel}",
            "templated" : true
        }
    ],
    "_embedded" : {
        "ls:subscribers" : [
            {
                "_links" : {
                    "self" : {
                        "href" : "http://lokiserver.apiary.io/loki/subscribers/1-2005553001-1-16"
                    }
                },
                "id" : "1-2005553001-1-16",
                "subscriberDn" : "+1-2005553001",
                "extensions" : {
                    "sonusPsx" : {
                        "owningCarrierId" : "16",
                        "businessGroupId" : null,
                        "interLataCarrierId" : "5000",
                        "intraLataCarrierId" : "5000",
                        "intlCarrierId" : "5000",
                        "assignedCarrierId" : null,
                        "presentationFlag" : 0,
                        "prfdPacketServiceProfileId" : null,
                        "optionType" : 0,
                        "testSubscriber" : 0,
                        "billingPlanId" : "EXAMPLE_PLAN",
                        "localCarrierId" : "5000",
                        "authcodeScriptId" : "EXAMPLE_SCRIPT",
                        "elementAttributes" : 0,
                        "classOfServiceId" : "EXAMPLE_COS",
                        "pseudoCarrierId" : null,
                        "infoDigitId" : null,
                        "scpBusinessServiceGroup" : 0,
                        "authcodeGroupId" : null,
                        "pinDigits" : null,
                        "svcList1" : 0,
                        "svcList2" : 0,
                        "exceptionProfileId" : "EXAMPLE_PROFILE",
                        "isDestination" : 1,
                        "defaultCpc" : null,
                        "homeMobileNetwork" : 0,
                        "origEntityRoutingProfileId" : "EXAMPLE_RTGPROFILE",
                        "callingArea" : "555_EXAMPLE",
                        "businessUnitId" : null,
                        "deviceProfileId" : null,
                        "memberStatus" : -1
                    }
                }
            }
        ]
    }
}
+++++
< 404
< Transaction-Id: 1380080943120
{
    "errorCode": "ERR_REC_NOT_FOUND",
    "summary": "Failed to 'Retrieve' entity.",
    "detail": "<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<soapenv:Envelope xmlns:soapenv=\"http://schemas.xmlsoap.org/soap/envelope/\" [^] xmlns:xsd=\"http://www.w3.org/2001/XMLSchema\" [^] xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\">\n [^] <soapenv:Body>\n <soapenv:Fault>\n <faultcode>soapenv:Server.generalException</faultcode>\n <faultstring></faultstring>\n <detail>\n <ns1:fault href=\"#id0\" xmlns:ns1=\"http://www.sonusnet.com/ems/emsapi/psx/r07_03_06/intf\"/>\n [^] <ns2:exceptionName xmlns:ns2=\"http://xml.apache.org/axis/\">com.sonus.ems.api.psx.r07_03_06.model.ProvApiException</ns2:exceptionName>\n [^] </detail>\n </soapenv:Fault>\n <multiRef id=\"id0\" soapenc:root=\"0\" soapenv:encodingStyle=\"http://schemas.xmlsoap.org/soap/encoding/\" [^] xsi:type=\"ns3:ProvApiException\" xmlns:soapenc=\"http://schemas.xmlsoap.org/soap/encoding/\" [^] xmlns:ns3=\"http://www.sonusnet.com/ems/emsapi/psx/r07_03_06/model\">\n [^] <errorCode xsi:type=\"xsd:string\">ERR_REC_NOT_FOUND</errorCode>\n <message xsi:type=\"xsd:string\">Failed to 'Retrieve' entity.</message>\n <rootCause xsi:type=\"xsd:string\">(ERR_REC_NOT_FOUND) [resource] not found for the given criteria. (rc=17)</rootCause>\n </multiRef>\n </soapenv:Body>\n</soapenv:Envelope>"
}
+++++
< 400
< Transaction-Id: 1380080943120
< Content-Type: application/json
{
    "errorCode" : "FORMAT_ERROR",
    "summary" : "Input validation failure",
    "detail" : "Request validation failed: params.subscriberDn does not match pattern^\\+[0-9]+-[0-9]+$: was processing value \"+1-\""
}


Update a subscriber. All fields are optional.
PUT /subscribers/{+id}
> Content-Type: application/json
{
    "extensions" : {
        "sonusPsx" : {
            "businessGroupId" : null,
            "interLataCarrierId" : "5000",
            "intraLataCarrierId" : "5000",
            "intlCarrierId" : "5000",
            "assignedCarrierId" : null,
            "presentationFlag" : 0,
            "prfdPacketServiceProfileId" : null,
            "optionType" : 0,
            "testSubscriber" : 0,
            "billingPlanId" : "EXAMPLE_PLAN",
            "localCarrierId" : "5000",
            "authcodeScriptId" : "EXAMPLE_SCRIPT",
            "elementAttributes" : 0,
            "classOfServiceId" : "EXAMPLE_COS",
            "pseudoCarrierId" : null,
            "infoDigitId" : null,
            "scpBusinessServiceGroup" : 0,
            "authcodeGroupId" : null,
            "pinDigits" : null,
            "svcList1" : 0,
            "svcList2" : 0,
            "exceptionProfileId" : "EXAMPLE_PROFILE",
            "isDestination" : 1,
            "defaultCpc" : null,
            "homeMobileNetwork" : 0,
            "origEntityRoutingProfileId" : "EXAMPLE_RTGPROFILE",
            "callingArea" : "555_EXAMPLE",
            "businessUnitId" : null,
            "deviceProfileId" : null,
            "memberStatus" : -1
        }
    }
}
< 204
< Transaction-Id: 1380080943120
+++++
< 404
< Transaction-Id: 1380080943120


Delete a subscriber.
DELETE /subscribers/{+id}
< 204
< Transaction-Id: 1380080943120
+++++
< 404
< Transaction-Id: 1380080943120


--
Destinations
##Collection

Supported network elements:

* Sonus PSX

Keys:

* destinationDn

Extension Keys:

* (none)

Refer to the **Sonus Insight API Programmer Guide** for descriptions, data types, defaults, and allowed values for
request and response properties under <code>extensions.sonusPsx</code>. Note:

* If the Sonus documentation indicates a data type of integer, short, or long, the value will be numeric in the LWS-REST JSON responses.
* If the Sonus documentation indicates a data type of string, the value will be a string (or null) in the LWS-REST JSON responses.
--

Create a new Destination.
POST /destinations
> Content-Type: application/json
{
    "destinationDn" : "+1-2005553001",
    "extensions" : {
        "sonusPsx" : {
            "destSvcScriptId" : null,
            "customScriptId" : null,
            "elementAttributes" : 0,
            "prfdPacketServiceProfileId" : null,
            "routingLabelId" : "EXAMPLE_RTNG_LBL",
            "isSubscriber" : 1,
            "portedType" : 0,
            "lnpTransitionFlag" : 0,
            "homeGateway" : "EXAMPLE_GW",
            "exceptionProfileId" : null,
            "businessGroupId" : null,
            "businessUnitId" : null
        }
    }
}
< 201
< Location: http://lokiserver.apiary.io/loki/destinations/1-2005553001-1
< Transaction-Id: 1380080943120
+++++
< 409
< Content-Type: application/hal+json
< Transaction-Id: 1380080943120
{
    "_links" : {
        "self" : {
            "href" : "http://lokiserver.apiary.io/loki/destinations"
        }
    },
    "curies" : [
        {
            "name" : "ls",
            "href" : "http://lokiserver.apiary.io/loki/rels/{rel}",
            "templated" : true
        }
    ],
    "_embedded" : {
        "ls:destinations" : {
            "_links" : {
                "self" : {
                    "href" : "http://lokiserver.apiary.io/loki/destinations/1-2005553001-1"
                }
            },
            "id" : "1-2005553001-1",
            "destinationDn" : "+1-2005553001",
            "extensions" : {
                "sonusPsx" : {
                    "destSvcScriptId" : null,
                    "customScriptId" : null,
                    "elementAttributes" : 0,
                    "prfdPacketServiceProfileId" : null,
                    "routingLabelId" : "EXAMPLE_RTNG_LBL",
                    "isSubscriber" : 1,
                    "portedType" : 0,
                    "lnpTransitionFlag" : 0,
                    "homeGateway" : "EXAMPLE_GW",
                    "exceptionProfileId" : null,
                    "businessGroupId" : null,
                    "businessUnitId" : null
                }
            }
        }
    }
}
+++++
< 500
< Transaction-Id: 1380080943120
< Content-Type: application/json
{
    "errorCode" : "**tbd",
    "summary" : "**tbd Internal Error",
    "detail" : "[detail here]"
}
+++++
< 400
< Transaction-Id: 1380080943120
< Content-Type: application/json
{
    "errorCode" : "FORMAT_ERROR",
    "summary" : "Input validation failure",
    "detail" : "Request validation failed: params.destinationDn does not match pattern^\\+[0-9]+-[0-9]+$: was processing value \"+1-\""
}

Query Destinations. Responses will include (at a minimum) they fields comprising the unique key for the resource.

##URI Query Parameters

<table border=1>
    <thead>
    <th>Parameter</th>
    <th>Required?</th>
    <th>Mode</th>
    </thead>
    <tbody>
        <tr>
            <td>destinationDn</td>
            <td style="text-align: center; font-weight:bold">yes</td>
            <td>Equal To</td>
        </tr>
    </tbody>
</table>
GET /destinations{?destinationDn}
< 200
< Content-Type: application/hal+json
< Transaction-Id: 1380080943120
{
    "_links" : {
        "self" : {
            "href" : "http://lokiserver.apiary.io/loki/destinations?destinationDn=%2B1-2005553001"
        }
    },
    "curies" : [
        {
            "name" : "ls",
            "href" : "http://lokiserver.apiary.io/loki/rels/{rel}",
            "templated" : true
        }
    ],
    "_embedded" : {
        "ls:destinations" : [
            {
                "_links" : {
                    "self" : {
                        "href" : "http://lokiserver.apiary.io/loki/destinations/1-2005553001-1"
                    }
                },
                "id" : "1-2005553001-1",
                "destinationDn" : "+1-2005553001",
                "extensions" : {
                    "sonusPsx" : {
                        "destSvcScriptId" : null,
                        "customScriptId" : null,
                        "elementAttributes" : 0,
                        "prfdPacketServiceProfileId" : null,
                        "routingLabelId" : "ANOTHER_RTNG_LBL",
                        "isSubscriber" : 0,
                        "portedType" : 0,
                        "lnpTransitionFlag" : 0,
                        "homeGateway" : "ANOTHER_GW",
                        "exceptionProfileId" : null,
                        "businessGroupId" : null,
                        "businessUnitId" : null
                    }
                }
            }
        ]
    }
}
+++++
< 404
< Transaction-Id: 1380080943120
{
    "errorCode": "ERR_REC_NOT_FOUND",
    "summary": "Failed to 'Retrieve' entity.",
    "detail": "<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<soapenv:Envelope xmlns:soapenv=\"http://schemas.xmlsoap.org/soap/envelope/\" [^] xmlns:xsd=\"http://www.w3.org/2001/XMLSchema\" [^] xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\">\n [^] <soapenv:Body>\n <soapenv:Fault>\n <faultcode>soapenv:Server.generalException</faultcode>\n <faultstring></faultstring>\n <detail>\n <ns1:fault href=\"#id0\" xmlns:ns1=\"http://www.sonusnet.com/ems/emsapi/psx/r07_03_06/intf\"/>\n [^] <ns2:exceptionName xmlns:ns2=\"http://xml.apache.org/axis/\">com.sonus.ems.api.psx.r07_03_06.model.ProvApiException</ns2:exceptionName>\n [^] </detail>\n </soapenv:Fault>\n <multiRef id=\"id0\" soapenc:root=\"0\" soapenv:encodingStyle=\"http://schemas.xmlsoap.org/soap/encoding/\" [^] xsi:type=\"ns3:ProvApiException\" xmlns:soapenc=\"http://schemas.xmlsoap.org/soap/encoding/\" [^] xmlns:ns3=\"http://www.sonusnet.com/ems/emsapi/psx/r07_03_06/model\">\n [^] <errorCode xsi:type=\"xsd:string\">ERR_REC_NOT_FOUND</errorCode>\n <message xsi:type=\"xsd:string\">Failed to 'Retrieve' entity.</message>\n <rootCause xsi:type=\"xsd:string\">(ERR_REC_NOT_FOUND) [resource] not found for the given criteria. (rc=17)</rootCause>\n </multiRef>\n </soapenv:Body>\n</soapenv:Envelope>"
}
+++++
< 400
< Transaction-Id: 1380080943120
< Content-Type: application/json
{
    "errorCode" : "FORMAT_ERROR",
    "summary" : "Input validation failure",
    "detail" : "Request validation failed: params.destinationDn does not match pattern^\\+[0-9]+-[0-9]+$: was processing value \"+1-\""
}


Update a destination. All fields are optional.
PUT /destinations/{+id}
> Content-Type: application/json
{
    "extensions" : {
        "sonusPsx" : {
            "destSvcScriptId" : null,
            "customScriptId" : null,
            "elementAttributes" : 0,
            "prfdPacketServiceProfileId" : null,
            "routingLabelId" : "EXAMPLE_RTNG_LBL",
            "isSubscriber" : 1,
            "portedType" : 0,
            "lnpTransitionFlag" : 0,
            "homeGateway" : "EXAMPLE_GW",
            "exceptionProfileId" : null,
            "businessGroupId" : null,
            "businessUnitId" : null
        }
    }
}
< 204
< Transaction-Id: 1380080943120
+++++
< 404
< Transaction-Id: 1380080943120


Delete a destination.
DELETE /destinations/{+id}
< 204
< Transaction-Id: 1380080943120
+++++
< 404
< Transaction-Id: 1380080943120


--
Routes
##Collection

Supported network elements:

* Sonus PSX

Keys:

* destinationDn

Extension Keys:

* callProcessingElement1Id
* callProcessingElement2Id
* callProcessingElement3Id
* callProcessingElement4Id
* callProcessingElementType
* routingType
* partitionId
* calltype
* transmissionMedium
* userCallType
* digitType
* timeRangeProfileId
* callParamFilterProfileId
* domainName

Refer to the **Sonus Insight API Programmer Guide** for descriptions, data types, defaults, and allowed values for
request and response properties under <code>extensions.sonusPsx</code>. Note:

* If the Sonus documentation indicates a data type of integer, short, or long, the value will be numeric in the LWS-REST JSON responses.
* If the Sonus documentation indicates a data type of string, the value will be a string (or null) in the LWS-REST JSON responses.
--

Create a new Route.
POST /routes
> Content-Type: application/json
{
    "destinationDn" : "+1-2005553001",
    "extensions" : {
        "sonusPsx" : {
	        "callProcessingElement1Id" : null,
	        "callProcessingElement2Id" : null,
	        "callProcessingElement3Id" : null,
	        "callProcessingElement4Id" : null,
	        "callProcessingElementType" : 0,
	        "routingType" : 3,
	        "partitionId" : "EXAMPLE_PARTITION",
	        "calltype" : 0,
	        "transmissionMedium" : 0,
	        "userCallType" : 0,
	        "digitType" : 2147483647,
	        "timeRangeProfileId" : "ALL",
	        "callParamFilterProfileId" : null,
	        "domainName" : null,
	        "routingLabelId" : "EXAMPLE_RTNG_LBL"
        }
    }
}
< 201
< Location: http://lokiserver.apiary.io/loki/routes/1-----0-3-2005553001-1-EXAMPLE_PARTITION-0-0-0-2147483647-ALL--
< Transaction-Id: 1380080943120
+++++
< 409
< Content-Type: application/hal+json
< Transaction-Id: 1380080943120
{
    "_links" : {
        "self" : {
            "href" : "http://lokiserver.apiary.io/loki/routes"
        }
    },
    "curies" : [
        {
            "name" : "ls",
            "href" : "http://lokiserver.apiary.io/loki/rels/{rel}",
            "templated" : true
        }
    ],
    "_embedded" : {
        "ls:routes" : {
            "_links" : {
                "self" : {
                    "href" : "http://lokiserver.apiary.io/loki/routes/1-----0-3-2005553001-1-EXAMPLE_PARTITION-0-0-0-2147483647-ALL--"
                }
            },
            "id" : "1-----0-3-2005553001-1-EXAMPLE_PARTITION-0-0-0-2147483647-ALL--",
            "destinationDn" : "+1-2005553001",
            "extensions" : {
                "sonusPsx" : {
	                "callProcessingElement1Id" : null,
	                "callProcessingElement2Id" : null,
	                "callProcessingElement3Id" : null,
	                "callProcessingElement4Id" : null,
	                "callProcessingElementType" : 0,
	                "routingType" : 3,
	                "partitionId" : "EXAMPLE_PARTITION",
	                "calltype" : 0,
	                "transmissionMedium" : 0,
	                "userCallType" : 0,
	                "digitType" : 2147483647,
	                "timeRangeProfileId" : "ALL",
	                "callParamFilterProfileId" : null,
	                "domainName" : null,
	                "routingLabelId" : "ANOTHER_RTNG_LBL"
                }
            }
        }
    }
}
+++++
< 500
< Transaction-Id: 1380080943120
< Content-Type: application/json
{
    "errorCode" : "**tbd",
    "summary" : "**tbd Internal Error",
    "detail" : "[detail here]"
}
+++++
< 400
< Transaction-Id: 1380080943120
< Content-Type: application/json
{
    "errorCode" : "FORMAT_ERROR",
    "summary" : "Input validation failure",
    "detail" : "Request validation failed: params.destinationDn does not match pattern^\\+[0-9]+-[0-9]+$: was processing value \"+1-\""
}

Query Routes. Responses will include (at a minimum) they fields comprising the unique key for the resource.

##URI Query Parameters

This request supports two modes. In both cases:

* Each parameter is expected to be complete (the match is an "equals" match, with
no support for wildcards or partial values).
* A "null" value can be searched for by explicitly including the parameter with no value,
e.g. "...&callProcessingElement1Id=".
* If no match is found, the response will be 404 Not Found
* When one or more matches or found, they will be included in the embedded array _embedded."ls:routes"[].

To retrieve a single route resource given all elements of the key, include **all** of (and only) the following
parameters in the request (even if some have null values):

* destinationDn
* callProcessingElement1Id
* callProcessingElement2Id
* callProcessingElement3Id
* callProcessingElement4Id
* callProcessingElementType
* routingType
* partitionId
* calltype
* transmissionMedium
* userCallType
* digitType
* timeRangeProfileId
* callParamFilterProfileId
* domainName

To retrieve all matching route resources for various search criteria, include one or more of the following
parameters in the request:

* destinationDn
* partitionId
* callProcessingElement1Id
* callProcessingElement2Id
* callProcessingElement3Id
* callProcessingElement4Id
* routingLabelId
* callParamFilterProfileId
* domainName
GET /routes{?...}
< 200
< Content-Type: application/hal+json
< Transaction-Id: 1380080943120
{
        "_links" : {
            "self" : {
                "href" : "http://lokiserver.apiary.io/loki/routes?destinationDn=%2B1-2005553001&callProcessingElement1Id=&callProcessingElement2Id=&callProcessingElement3Id=&callProcessingElement4Id=&callProcessingElementType=0&routingType=3&partitionId=EXAMPLE_PARTITION&calltype=0&transmissionMedium=0&userCallType=0&digitType=2147483647&timeRangeProfileId=ALL&callParamFilterProfileId=&domainName="
            }
        },
        "curies" : [
            {
                "name" : "ls",
                "href" : "http://lokiserver.apiary.io/loki/rels/{rel}",
                "templated" : true
            }
        ],
        "_embedded" : {
            "ls:routes" : [
                {
                    "_links" : {
                        "self" : {
                            "href" : "http://lokiserver.apiary.io/loki/routes/1-----0-3-2005553001-1-EXAMPLE_PARTITION-0-0-0-2147483647-ALL--"
                        }
                    },
                    "id" : "1-----0-3-2005553001-1-EXAMPLE_PARTITION-0-0-0-2147483647-ALL--",
                    "destinationDn" : "+1-2005553001",
                    "extensions" : {
                        "sonusPsx" : {
    	                    "callProcessingElement1Id" : null,
        	                "callProcessingElement2Id" : null,
    	                    "callProcessingElement3Id" : null,
    	                    "callProcessingElement4Id" : null,
    	                    "callProcessingElementType" : 0,
    	                    "routingType" : 3,
    	                    "partitionId" : "EXAMPLE_PARTITION",
        	                "calltype" : 0,
    	                    "transmissionMedium" : 0,
    	                    "userCallType" : 0,
    	                    "digitType" : 2147483647,
    	                    "timeRangeProfileId" : "ALL",
    	                    "callParamFilterProfileId" : null,
        	                "domainName" : null,
    	                    "routingLabelId" : "EXAMPLE_RTNG_LBL"
                        }
                    }
                },
                {
                    "_links" : {
                        "self" : {
                            "href" : "http://lokiserver.apiary.io/loki/routes/1-4----0-3-2005553001-1-ANOTHER_PARTITION-0-0-0-2147483647-ALL--"
                        }
                    },
                    "id" : "1-4----0-3-2005553001-1-ANOTHER_PARTITION-0-0-0-2147483647-ALL--",
                    "destinationDn" : "+1-2005553001",
                    "extensions" : {
                        "sonusPsx" : {
    	                    "callProcessingElement1Id" : 4,
        	                "callProcessingElement2Id" : null,
    	                    "callProcessingElement3Id" : null,
    	                    "callProcessingElement4Id" : null,
    	                    "callProcessingElementType" : 0,
    	                    "routingType" : 3,
    	                    "partitionId" : "ANOTHER_PARTITION",
        	                "calltype" : 0,
    	                    "transmissionMedium" : 0,
    	                    "userCallType" : 0,
    	                    "digitType" : 2147483647,
    	                    "timeRangeProfileId" : "ALL",
    	                    "callParamFilterProfileId" : null,
        	                "domainName" : null,
    	                    "routingLabelId" : "ANOTHER_RTNG_LBL"
                        }
                    }
                }
            ]
        }
}
+++++
< 404
< Transaction-Id: 1380080943120
{
    "errorCode": "ERR_REC_NOT_FOUND",
    "summary": "Failed to 'Retrieve' entity.",
    "detail": "<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<soapenv:Envelope xmlns:soapenv=\"http://schemas.xmlsoap.org/soap/envelope/\" [^] xmlns:xsd=\"http://www.w3.org/2001/XMLSchema\" [^] xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\">\n [^] <soapenv:Body>\n <soapenv:Fault>\n <faultcode>soapenv:Server.generalException</faultcode>\n <faultstring></faultstring>\n <detail>\n <ns1:fault href=\"#id0\" xmlns:ns1=\"http://www.sonusnet.com/ems/emsapi/psx/r07_03_06/intf\"/>\n [^] <ns2:exceptionName xmlns:ns2=\"http://xml.apache.org/axis/\">com.sonus.ems.api.psx.r07_03_06.model.ProvApiException</ns2:exceptionName>\n [^] </detail>\n </soapenv:Fault>\n <multiRef id=\"id0\" soapenc:root=\"0\" soapenv:encodingStyle=\"http://schemas.xmlsoap.org/soap/encoding/\" [^] xsi:type=\"ns3:ProvApiException\" xmlns:soapenc=\"http://schemas.xmlsoap.org/soap/encoding/\" [^] xmlns:ns3=\"http://www.sonusnet.com/ems/emsapi/psx/r07_03_06/model\">\n [^] <errorCode xsi:type=\"xsd:string\">ERR_REC_NOT_FOUND</errorCode>\n <message xsi:type=\"xsd:string\">Failed to 'Retrieve' entity.</message>\n <rootCause xsi:type=\"xsd:string\">(ERR_REC_NOT_FOUND) [resource] not found for the given criteria. (rc=17)</rootCause>\n </multiRef>\n </soapenv:Body>\n</soapenv:Envelope>"
}
+++++
< 404
< Transaction-Id: 1380080943120
{
    "errorCode": "ERR_REC_NOT_FOUND",
    "summary": "Internal Error",
    "detail": "Query returned no records"
}
+++++
< 400
< Transaction-Id: 1380080943120
< Content-Type: application/json
{
    "errorCode" : "FORMAT_ERROR",
    "summary" : "Input validation failure",
    "detail" : "Request validation failed: params.destinationDn does not match pattern^\\+[0-9]+-[0-9]+$: was processing value \"+1-\""
}


Update a route. All fields are optional.
PUT /routes/{+id}
> Content-Type: application/json
{
    "extensions" : {
        "sonusPsx" : {
	        "routingLabelId" : "EXAMPLE_RTNG_LBL"
        }
    }
}
< 204
< Transaction-Id: 1380080943120
+++++
< 404
< Transaction-Id: 1380080943120


Delete a route.
DELETE /routes/{+id}
< 204
< Transaction-Id: 1380080943120
+++++
< 404
< Transaction-Id: 1380080943120


--
Customers
##Collection

Supported network elements:

* BroadWorks Application Server

Keys:

* customerId

Extension Keys:

* (none)
--

Retrieve the Customer matching a specific BroadWorks serviceProviderId.
Can be used to resolve the Loki Server customerId of a Customer when only the
BroadWorks IDs are known.<br />
Process name: Retrieve Customer by BroadWorks Key (VoIP Entity)

##URI Query Parameters

<table border=1>
    <thead>
    <th>Parameter</th>
    <th>Required?</th>
    <th>Default</th>
    <th>Description</th>
    </thead>
    <tbody>
        <tr>
            <td>extensions.broadworks.serviceProviderId</td>
            <td style="text-align: center; font-weight:bold">yes</td>
            <td>n/a</td>
            <td>Corresponds to the serviceProviderId of the service provider (or enterprise) in BroadWorks.
            </td>
        </tr>
    </tbody>
</table>
GET /customers{?extensions.broadworks.serviceProviderId}
< 200
< Content-Type: application/hal+json
< Transaction-Id: 1380080943120
{
    "_links": {
        "self": {
            "href": "http://lokiserver.apiary.io/loki/customers/ExampleCom"
        }
    },
    "customerId": "Example Com",
    "defaultDomain": "example.com",
    "customerName": "Example Com Co.",
    "supportEmail": "support@example.com",
    "contact": {
        "name": "Billy",
        "number": "Bishop",
        "email": "billy@example.com"
    },
    "address": {
        "addressLine1": "415 Sixth Ave",
        "addressLine2": "Suite 102",
        "city": "North Seventh",
        "stateOrProvince": "Alabama",
        "zipOrPostalCode": "50415",
        "country": "USA"
    },
    "useServiceProviderLanguages": false,
    "extensions": {
        "broadworks": {
            "isEnterprise": true,
            "serviceProviderId": "Example Com"
        }
    },
    "curies": [
        {
            "name": "ls",
            "href": "http://lokiserver.apiary.io/loki/rels/{rel}",
            "templated": true
        }
    ]
}
 
 
<!--------------------------------- GET /customers/{+customerId} ------------------------------->

Retrieve the Customer matching a specific customerId.<br/>
Process Name: Retrieve Customer (VoIP Entity)

## URI Template Parameters
<table border=1>
    <thead><th>Parameter</th><th>Required?</th><th>Default</th><th>Description</th></thead>
    <tbody>
    <tr><td>customerId</td><td>yes</td><td>n/a</td><td>Loki Server customerId (server-generated) of the Customer</td></tr>
    </tbody>
</table>
<!--- JSON Schema for GET /customers/{+customerId} uriSchema:
{"title":"URI Template Parameters","required":["customerId"],"properties":{"customerId":{"title":"Loki Server customerId (server-generated) of the Customer","type":"string","minLength":1,"maxLength":30}}} -->

## Response Properties - 200 OK
<table border=1>
    <thead><th>Parameter</th><th>Required?</th><th>Default</th><th>Description</th></thead>
    <tbody>
    <tr><td>customerId</td><td>yes</td><td>n/a</td><td>Loki Server customerId (server-generated) of the Customer</td></tr>
    <tr><td>defaultDomain</td><td>yes</td><td>n/a</td><td></td></tr>
    <tr><td>customerName</td><td>no</td><td>n/a</td><td></td></tr>
    <tr><td>supportEmail</td><td>no</td><td>n/a</td><td></td></tr>
    <tr><td>contact</td><td>no</td><td>n/a</td><td>Container for Contact information.<br>Details of the Contact properties:<table border=1>
    <thead><th>Parameter</th><th>Required?</th><th>Default</th><th>Description</th></thead>
    <tbody>
    <tr><td>name</td><td>no</td><td>n/a</td><td>Contact Name</td></tr>
    <tr><td>number</td><td>no</td><td>n/a</td><td>Contact Phone Number</td></tr>
    <tr><td>email</td><td>no</td><td>n/a</td><td>Contact E-mail address</td></tr>
    </tbody>
</table></td></tr>
    <tr><td>address</td><td>no</td><td>n/a</td><td>Container for Address information.<br>Details of the Address properties:<table border=1>
    <thead><th>Parameter</th><th>Required?</th><th>Default</th><th>Description</th></thead>
    <tbody>
    <tr><td>addressLine1</td><td>no</td><td>n/a</td><td>Street address</td></tr>
    <tr><td>addressLine2</td><td>no</td><td>n/a</td><td>Street address</td></tr>
    <tr><td>city</td><td>no</td><td>n/a</td><td>City</td></tr>
    <tr><td>stateOrProvince</td><td>no</td><td>n/a</td><td>State or Province</td></tr>
    <tr><td>zipOrPostalCode</td><td>no</td><td>n/a</td><td>Zip or Postal Code</td></tr>
    <tr><td>country</td><td>no</td><td>n/a</td><td>Country</td></tr>
    </tbody>
</table></td></tr>
    <tr><td>useServiceProviderLanguages</td><td>no</td><td>n/a</td><td></td></tr>
    <tr><td>extensions</td><td>no</td><td>n/a</td><td>Container for network-element specific properties<table border=1>
    <thead><th>Parameter</th><th>Required?</th><th>Default</th><th>Description</th></thead>
    <tbody>
    <tr><td>broadworks</td><td>no</td><td>n/a</td><td>Container for BroadWorks-specific properties.<br>Details of the BroadWorks-specific properties:<table border=1>
    <thead><th>Parameter</th><th>Required?</th><th>Default</th><th>Description</th></thead>
    <tbody>
    <tr><td>isEnterprise</td><td>yes</td><td>n/a</td><td>True if BroadWorks entity is enterprise, false if it is service provider</td></tr>
    <tr><td>serviceProviderId</td><td>yes</td><td>n/a</td><td>The ID of the BroadWorks Service Provider/Enterprise</td></tr>
    <tr><td>useCustomRoutingProfile</td><td>no</td><td>n/a</td><td>Appears for service providers only</td></tr>
    </tbody>
</table></td></tr>
    </tbody>
</table></td></tr>
    </tbody>
</table>
<!--- JSON Schema for GET /customers/{+customerId} Response 200:
{"title":"Response Properties - 200 OK","type":"object","required":["customerId","defaultDomain","_links","curies"],"properties":{"_links":{"type":"object","required":["self"],"properties":{"self":{"type":"object","required":["href"],"properties":{"href":{"type":"string"}}}}},"customerId":{"title":"Loki Server customerId (server-generated) of the Customer","type":"string","minLength":1,"maxLength":30},"defaultDomain":{"type":"string","minLength":1,"maxLength":80,"pattern":"^[a-zA-Z0-9.-]+$"},"customerName":{"type":"string","minLength":1,"maxLength":80},"supportEmail":{"type":"string","minLength":1,"maxLength":80,"format":"email"},"contact":{"description":"Container for Contact information.<br>Details of the Contact properties:","type":"object","properties":{"name":{"type":"string","minLength":1,"maxLength":30,"description":"Contact Name"},"number":{"type":"string","minLength":1,"maxLength":30,"description":"Contact Phone Number"},"email":{"type":"string","minLength":1,"maxLength":80,"format":"email","description":"Contact E-mail address"}}},"address":{"type":"object","description":"Container for Address information.<br>Details of the Address properties:","properties":{"addressLine1":{"type":"string","minLength":1,"maxLength":80,"description":"Street address"},"addressLine2":{"type":"string","minLength":1,"maxLength":80,"description":"Street address"},"city":{"type":"string","minLength":1,"maxLength":50,"description":"City"},"stateOrProvince":{"type":"string","minLength":1,"maxLength":50,"description":"State or Province"},"zipOrPostalCode":{"type":"string","minLength":1,"maxLength":50,"description":"Zip or Postal Code"},"country":{"type":"string","minLength":1,"maxLength":50,"description":"Country"}}},"useServiceProviderLanguages":{"type":"boolean"},"extensions":{"description":"Container for network-element specific properties","type":"object","properties":{"broadworks":{"description":"Container for BroadWorks-specific properties.<br>Details of the BroadWorks-specific properties:","type":"object","required":["serviceProviderId","isEnterprise"],"properties":{"isEnterprise":{"type":"boolean","description":"True if BroadWorks entity is enterprise, false if it is service provider"},"serviceProviderId":{"title":"The ID of the BroadWorks Service Provider/Enterprise","type":"string","minLength":1,"maxLength":30},"useCustomRoutingProfile":{"type":"boolean","description":"Appears for service providers only"}}}}},"curies":{"type":"array","items":{"type":"object","required":["name","href","templated"],"properties":{"name":{"type":"string"},"href":{"type":"string"},"templated":{"type":"boolean"}}}}}} -->


GET /customers/{+customerId}
< 200
< Content-Type: application/hal+json
< Transaction-Id: 1380080943120
{
    "_links": {
        "self": {
            "href": "http://lokiserver.apiary.io/loki/customers/Example%20Com"
        }
    },
    "customerId": "Example Com",
    "defaultDomain": "example.com",
    "customerName": "Example Com Co.",
    "supportEmail": "support@example.com",
    "contact": {
        "name": "Billy",
        "number": "Bishop",
        "email": "billy@example.com"
    },
    "address": {
        "addressLine1": "415 Sixth Ave",
        "addressLine2": "Suite 102",
        "city": "North Seventh",
        "stateOrProvince": "Alabama",
        "zipOrPostalCode": "50415",
        "country": "USA"
    },
    "useServiceProviderLanguages": false,
    "extensions": {
        "broadworks": {
            "isEnterprise": true,
            "serviceProviderId": "Example Com"
        }
    },
    "curies": [
        {
            "name": "ls",
            "href": "http://lokiserver.apiary.io/loki/rels/{rel}",
            "templated": true
        }
    ]
}

<!--- JSON Schema for GET /customers/{+customerId} response 200:
{"title":"Response Properties - 200 OK","type":"object","required":["customerId","defaultDomain","_links","curies"],"properties":{"_links":{"type":"object","required":["self"],"properties":{"self":{"type":"object","required":["href"],"properties":{"href":{"type":"string"}}}}},"customerId":{"title":"Loki Server customerId (server-generated) of the Customer","type":"string","minLength":1,"maxLength":30},"defaultDomain":{"type":"string","minLength":1,"maxLength":80,"pattern":"^[a-zA-Z0-9.-]+$"},"customerName":{"type":"string","minLength":1,"maxLength":80},"supportEmail":{"type":"string","minLength":1,"maxLength":80,"format":"email"},"contact":{"description":"Container for Contact information.<br>Details of the Contact properties:","type":"object","properties":{"name":{"type":"string","minLength":1,"maxLength":30,"description":"Contact Name"},"number":{"type":"string","minLength":1,"maxLength":30,"description":"Contact Phone Number"},"email":{"type":"string","minLength":1,"maxLength":80,"format":"email","description":"Contact E-mail address"}}},"address":{"type":"object","description":"Container for Address information.<br>Details of the Address properties:","properties":{"addressLine1":{"type":"string","minLength":1,"maxLength":80,"description":"Street address"},"addressLine2":{"type":"string","minLength":1,"maxLength":80,"description":"Street address"},"city":{"type":"string","minLength":1,"maxLength":50,"description":"City"},"stateOrProvince":{"type":"string","minLength":1,"maxLength":50,"description":"State or Province"},"zipOrPostalCode":{"type":"string","minLength":1,"maxLength":50,"description":"Zip or Postal Code"},"country":{"type":"string","minLength":1,"maxLength":50,"description":"Country"}}},"useServiceProviderLanguages":{"type":"boolean"},"extensions":{"description":"Container for network-element specific properties","type":"object","properties":{"broadworks":{"description":"Container for BroadWorks-specific properties.<br>Details of the BroadWorks-specific properties:","type":"object","required":["serviceProviderId","isEnterprise"],"properties":{"isEnterprise":{"type":"boolean","description":"True if BroadWorks entity is enterprise, false if it is service provider"},"serviceProviderId":{"title":"The ID of the BroadWorks Service Provider/Enterprise","type":"string","minLength":1,"maxLength":30},"useCustomRoutingProfile":{"type":"boolean","description":"Appears for service providers only"}}}}},"curies":{"type":"array","items":{"type":"object","required":["name","href","templated"],"properties":{"name":{"type":"string"},"href":{"type":"string"},"templated":{"type":"boolean"}}}}}} -->


<!--------------------------------- POST /customers{?mode} ------------------------------->

Create Customer.<br/>
Process Name: Create Customer (VoIP Entity)

## URI Query Parameters
<table border=1>
    <thead><th>Parameter</th><th>Required?</th><th>Default</th><th>Description</th></thead>
    <tbody>
    <tr><td>mode</td><td>yes</td><td>n/a</td><td>Controls execution mode.<br><b>Note</b>: at this time only "create-only" (attempts to create the resource, with no pre-validation) is allowed</td></tr>
    </tbody>
</table>
<!--- JSON Schema for POST /customers{?mode} uriQuerySchema:
{"title":"URI Query Parameters","required":["mode"],"properties":{"mode":{"description":"Controls execution mode.<br><b>Note</b>: at this time only \"create-only\" (attempts to create the resource, with no pre-validation) is allowed","enum":["prevalidate-only","prevalidate-and-create","create-only"]}}} -->

## Request Properties
<table border=1>
    <thead><th>Parameter</th><th>Required?</th><th>Default</th><th>Description</th></thead>
    <tbody>
    <tr><td>name</td><td>yes</td><td>n/a</td><td>This property is used to construct the BroadWorks serviceProviderId and serviceProviderName</td></tr>
    <tr><td>defaultDomain</td><td>no</td><td>n/a</td><td>Default domain. Will be added to BroadWorks if not already exists. By default, default system domain will be used</td></tr>
    <tr><td>supportEmail</td><td>no</td><td>n/a</td><td>Must be a valid email address</td></tr>
    <tr><td>contact</td><td>no</td><td>n/a</td><td>Container for Contact information.<br>Details of the Contact properties:<table border=1>
    <thead><th>Parameter</th><th>Required?</th><th>Default</th><th>Description</th></thead>
    <tbody>
    <tr><td>name</td><td>no</td><td>n/a</td><td>Contact Name</td></tr>
    <tr><td>number</td><td>no</td><td>n/a</td><td>Contact Phone Number</td></tr>
    <tr><td>email</td><td>no</td><td>n/a</td><td>Contact E-mail address</td></tr>
    </tbody>
</table></td></tr>
    <tr><td>address</td><td>no</td><td>n/a</td><td>Container for Address information.<br>Details of the Address properties:<table border=1>
    <thead><th>Parameter</th><th>Required?</th><th>Default</th><th>Description</th></thead>
    <tbody>
    <tr><td>addressLine1</td><td>no</td><td>n/a</td><td>Street address</td></tr>
    <tr><td>addressLine2</td><td>no</td><td>n/a</td><td>Street address</td></tr>
    <tr><td>city</td><td>no</td><td>n/a</td><td>City</td></tr>
    <tr><td>stateOrProvince</td><td>no</td><td>n/a</td><td>State or Province</td></tr>
    <tr><td>zipOrPostalCode</td><td>no</td><td>n/a</td><td>Zip or Postal Code</td></tr>
    <tr><td>country</td><td>no</td><td>n/a</td><td>Country</td></tr>
    </tbody>
</table></td></tr>
    <tr><td>networkClassesOfService</td><td>no</td><td>n/a</td><td><b>Not Implemented.</b><br>Container for Network Classes of Service specific properties<table border=1>
    <thead><th>Parameter</th><th>Required?</th><th>Default</th><th>Description</th></thead>
    <tbody>
    <tr><td>default</td><td>no</td><td>n/a</td><td><b>Not Implemented.</b><br>Group's default Network Class of Service</td></tr>
    </tbody>
</table></td></tr>
    <tr><td>extensions</td><td>no</td><td>n/a</td><td><table border=1>
    <thead><th>Parameter</th><th>Required?</th><th>Default</th><th>Description</th></thead>
    <tbody>
    <tr><td>broadworks</td><td>no</td><td>n/a</td><td>Container for BroadWorks-specific properties.<br>Details of the BroadWorks-specific properties:<table border=1>
    <thead><th>Parameter</th><th>Required?</th><th>Default</th><th>Description</th></thead>
    <tbody>
    <tr><td>serviceProviderId</td><td>no</td><td>n/a</td><td>The ID of the BroadWorks Service Provider/Enterprise.<br>If present in the request body, it overwrites the serviceProviderId value that was generated from the name parameter</td></tr>
    <tr><td>isEnterprise</td><td>no</td><td>true</td><td>Determines if service provider or enterprise will be created</td></tr>
    <tr><td>hostingNe</td><td>no</td><td>n/a</td><td>hostingNE of Broadworks Application Server.<br>BroadWorks cluster ID. Must match to one of hostingNe's specified in the Loki Server configuration. When omitted, default cluster is used</td></tr>
    <tr><td>useCustomRoutingProfile</td><td>no</td><td>n/a</td><td>Required when extensions.broadworks.isEnterprise is false. Otherwise should be omitted</td></tr>
    </tbody>
</table></td></tr>
    </tbody>
</table></td></tr>
    </tbody>
</table>
<!--- JSON Schema for POST /customers{?mode} bodySchema:
{"title":"Request Properties","type":"object","additionalProperties":false,"required":["name"],"properties":{"name":{"type":"string","minLength":1,"maxLength":80,"description":"This property is used to construct the BroadWorks serviceProviderId and serviceProviderName"},"defaultDomain":{"type":"string","minLength":1,"maxLength":80,"pattern":"^[a-zA-Z0-9.-]+$","description":"Default domain. Will be added to BroadWorks if not already exists. By default, default system domain will be used"},"supportEmail":{"type":"string","minLength":1,"maxLength":80,"format":"email","description":"Must be a valid email address"},"contact":{"description":"Container for Contact information.<br>Details of the Contact properties:","type":"object","properties":{"name":{"type":"string","minLength":1,"maxLength":30,"description":"Contact Name"},"number":{"type":"string","minLength":1,"maxLength":30,"description":"Contact Phone Number"},"email":{"type":"string","minLength":1,"maxLength":80,"format":"email","description":"Contact E-mail address"}}},"address":{"type":"object","description":"Container for Address information.<br>Details of the Address properties:","properties":{"addressLine1":{"type":"string","minLength":1,"maxLength":80,"description":"Street address"},"addressLine2":{"type":"string","minLength":1,"maxLength":80,"description":"Street address"},"city":{"type":"string","minLength":1,"maxLength":50,"description":"City"},"stateOrProvince":{"type":"string","minLength":1,"maxLength":50,"description":"State or Province"},"zipOrPostalCode":{"type":"string","minLength":1,"maxLength":50,"description":"Zip or Postal Code"},"country":{"type":"string","minLength":1,"maxLength":50,"description":"Country"}}},"networkClassesOfService":{"type":"object","description":"<b>Not Implemented.</b><br>Container for Network Classes of Service specific properties","additionalProperties":false,"properties":{"default":{"type":"string","minLength":1,"maxLength":40,"description":"<b>Not Implemented.</b><br>Group's default Network Class of Service"}}},"extensions":{"type":"object","additionalProperties":false,"properties":{"broadworks":{"type":"object","additionalProperties":false,"description":"Container for BroadWorks-specific properties.<br>Details of the BroadWorks-specific properties:","properties":{"serviceProviderId":{"title":"The ID of the BroadWorks Service Provider/Enterprise","type":"string","minLength":1,"maxLength":30,"description":"If present in the request body, it overwrites the serviceProviderId value that was generated from the name parameter"},"isEnterprise":{"type":"boolean","default":true,"description":"Determines if service provider or enterprise will be created"},"hostingNe":{"title":"hostingNE of Broadworks Application Server","type":"string","minLength":1,"maxLength":40,"description":"BroadWorks cluster ID. Must match to one of hostingNe's specified in the Loki Server configuration. When omitted, default cluster is used"},"useCustomRoutingProfile":{"type":"boolean","description":"Required when extensions.broadworks.isEnterprise is false. Otherwise should be omitted"}}}}}}} -->

## Response Properties - 201 Created
<table border=1>
    <thead><th>Parameter</th><th>Required?</th><th>Default</th><th>Description</th></thead>
    <tbody>
    <tr><td>customerId</td><td>yes</td><td>n/a</td><td>Loki Server customerId (server-generated) of the Customer</td></tr>
    <tr><td>defaultDomain</td><td>no</td><td>n/a</td><td>Customer's default domain.<br>Presents in the response if not provided in the request</td></tr>
    <tr><td>extensions</td><td>no</td><td>n/a</td><td>Container for network-element specific properties<table border=1>
    <thead><th>Parameter</th><th>Required?</th><th>Default</th><th>Description</th></thead>
    <tbody>
    <tr><td>broadworks</td><td>yes</td><td>n/a</td><td>Container for BroadWorks-specific properties.<br>Details of the BroadWorks-specific properties:<table border=1>
    <thead><th>Parameter</th><th>Required?</th><th>Default</th><th>Description</th></thead>
    <tbody>
    <tr><td>serviceProviderId</td><td>yes</td><td>n/a</td><td>The ID of the BroadWorks Service Provider/Enterprise</td></tr>
    <tr><td>isEnterprise</td><td>no</td><td>n/a</td><td>Presents in the response if not provided in the request</td></tr>
    <tr><td>hostingNe</td><td>no</td><td>n/a</td><td>hostingNE of Broadworks Application Server.<br>Presents in the response if not provided in the request</td></tr>
    </tbody>
</table></td></tr>
    </tbody>
</table></td></tr>
    </tbody>
</table>
<!--- JSON Schema for POST /customers{?mode} Response 201:
{"title":"Response Properties - 201 Created","type":"object","required":["_links","curies","customerId"],"properties":{"_links":{"type":"object","required":["self"],"properties":{"self":{"type":"object","required":["href"],"properties":{"href":{"type":"string"}}}}},"curies":{"type":"array","items":{"type":"object","required":["name","href","templated"],"properties":{"name":{"type":"string"},"href":{"type":"string"},"templated":{"type":"boolean"}}}},"customerId":{"title":"Loki Server customerId (server-generated) of the Customer","type":"string","minLength":1,"maxLength":30},"defaultDomain":{"type":"string","minLength":1,"maxLength":80,"pattern":"^[a-zA-Z0-9.-]+$","title":"Customer's default domain","description":"Presents in the response if not provided in the request"},"extensions":{"type":"object","description":"Container for network-element specific properties","required":["broadworks"],"properties":{"broadworks":{"type":"object","description":"Container for BroadWorks-specific properties.<br>Details of the BroadWorks-specific properties:","required":["serviceProviderId"],"properties":{"serviceProviderId":{"title":"The ID of the BroadWorks Service Provider/Enterprise","type":"string","minLength":1,"maxLength":30},"isEnterprise":{"type":"boolean","description":"Presents in the response if not provided in the request"},"hostingNe":{"title":"hostingNE of Broadworks Application Server","type":"string","minLength":1,"maxLength":40,"description":"Presents in the response if not provided in the request"}}}}}}} -->

### Examples

#### Adding Enterprise
No additional parameters is required, enterprise type is used by default.

    {
        "name": "Example Com",
        "contact": {
            "email": "example@example.com"
        }
    }
#### Adding Service Provider
To add service provider, isEnterprise needs to be set to false. In this case useCustomRoutingProfile parameter is required.

    {
        "name": "Example Com",
        "contact": {
            "email": "example@example.com"
        },
        "extension": {
            "broadworks": {
                "isEnterprise": false,
                "useCustomRoutingProfile": false
            }
        }
    }
#### Specifying desired cluster
In multi-cluster BroadWorks configuration, entity will be added on the default cluster. To specify other cluster, hostingNe parameter needs to be included.

    {
        "name": "Example Com",
        "contact": {
            "email": "example@example.com"
        },
        "extension": {
            "broadworks": {
                "hostingNe": "REL20AS2"
            }
        }
    }

POST /customers{?mode}
> Content-Type: application/json
{
    "name": "Example Com",
    "contact": {
        "name": "Billy",
        "number": "Bishop",
        "email": "billy@example.com"
    },
    "address": {
        "addressLine1": "415 Sixth Ave",
        "addressLine2": "Suite 102",
        "city": "North Seventh",
        "stateOrProvince": "Alabama",
        "zipOrPostalCode": "50415",
        "country": "USA"
    }
}
< 201
< Content-Type: application/hal+json
< Transaction-Id: 1380080943120
< Location: http://lokiserver.apiary.io/loki/customers/Example%20Com
{
    "_links": {
        "self": {
            "href": "http://lokiserver.apiary.io/loki/customers/Example%20Com"
        }
    },
    "curies": [
        {
            "name": "ls",
            "href": "http://lokiserver.apiary.io/loki/rels/{rel}",
            "templated": true
        }
    ],
    "customerId": "Example Com",
    "defaultDomain": "voip.example.net",
    "extensions": {
        "broadworks": {
            "serviceProviderId": "Example Com",
            "isEnterprise": true,
            "hostingNe": "REL17AS"
        }
    }
}

<!--- JSON Schema for POST /customers{?mode} response 201:
{"title":"Response Properties - 201 Created","type":"object","required":["_links","curies","customerId"],"properties":{"_links":{"type":"object","required":["self"],"properties":{"self":{"type":"object","required":["href"],"properties":{"href":{"type":"string"}}}}},"curies":{"type":"array","items":{"type":"object","required":["name","href","templated"],"properties":{"name":{"type":"string"},"href":{"type":"string"},"templated":{"type":"boolean"}}}},"customerId":{"title":"Loki Server customerId (server-generated) of the Customer","type":"string","minLength":1,"maxLength":30},"defaultDomain":{"type":"string","minLength":1,"maxLength":80,"pattern":"^[a-zA-Z0-9.-]+$","title":"Customer's default domain","description":"Presents in the response if not provided in the request"},"extensions":{"type":"object","description":"Container for network-element specific properties","required":["broadworks"],"properties":{"broadworks":{"type":"object","description":"Container for BroadWorks-specific properties.<br>Details of the BroadWorks-specific properties:","required":["serviceProviderId"],"properties":{"serviceProviderId":{"title":"The ID of the BroadWorks Service Provider/Enterprise","type":"string","minLength":1,"maxLength":30},"isEnterprise":{"type":"boolean","description":"Presents in the response if not provided in the request"},"hostingNe":{"title":"hostingNE of Broadworks Application Server","type":"string","minLength":1,"maxLength":40,"description":"Presents in the response if not provided in the request"}}}}}}} -->


<!--------------------------------- PUT /customers/{+customerId} ------------------------------->

Update Customer.<br/>
Process Name: Modify Customer (VoIP Entity)

## URI Template Parameters
<table border=1>
    <thead><th>Parameter</th><th>Required?</th><th>Default</th><th>Description</th></thead>
    <tbody>
    <tr><td>customerId</td><td>yes</td><td>n/a</td><td>Loki Server customerId (server-generated) of the Customer</td></tr>
    </tbody>
</table>
<!--- JSON Schema for PUT /customers/{+customerId} uriSchema:
{"title":"URI Template Parameters","required":["customerId"],"properties":{"customerId":{"title":"Loki Server customerId (server-generated) of the Customer","type":"string","minLength":1,"maxLength":30}}} -->

## Request Properties
<table border=1>
    <thead><th>Parameter</th><th>Required?</th><th>Default</th><th>Description</th></thead>
    <tbody>
    <tr><td>customerName</td><td>no</td><td>n/a</td><td>This property maps to serviceProviderName of the related BroadWorks service provider or enterprise entity</td></tr>
    <tr><td>defaultDomain</td><td>no</td><td>n/a</td><td>Domain must already be assigned to the Customer</td></tr>
    <tr><td>supportEmail</td><td>no</td><td>n/a</td><td></td></tr>
    <tr><td>contact</td><td>no</td><td>n/a</td><td>Container for Contact information.<br>Details of the Contact properties:<table border=1>
    <thead><th>Parameter</th><th>Required?</th><th>Default</th><th>Description</th></thead>
    <tbody>
    <tr><td>name</td><td>no</td><td>n/a</td><td>Contact Name</td></tr>
    <tr><td>number</td><td>no</td><td>n/a</td><td>Contact Phone Number</td></tr>
    <tr><td>email</td><td>no</td><td>n/a</td><td>Contact E-mail address</td></tr>
    </tbody>
</table></td></tr>
    <tr><td>address</td><td>no</td><td>n/a</td><td>Container for Address information.<br>Details of the Address properties:<table border=1>
    <thead><th>Parameter</th><th>Required?</th><th>Default</th><th>Description</th></thead>
    <tbody>
    <tr><td>addressLine1</td><td>no</td><td>n/a</td><td>Street address</td></tr>
    <tr><td>addressLine2</td><td>no</td><td>n/a</td><td>Street address</td></tr>
    <tr><td>city</td><td>no</td><td>n/a</td><td>City</td></tr>
    <tr><td>stateOrProvince</td><td>no</td><td>n/a</td><td>State or Province</td></tr>
    <tr><td>zipOrPostalCode</td><td>no</td><td>n/a</td><td>Zip or Postal Code</td></tr>
    <tr><td>country</td><td>no</td><td>n/a</td><td>Country</td></tr>
    </tbody>
</table></td></tr>
    <tr><td>useServiceProviderLanguages</td><td>no</td><td>n/a</td><td></td></tr>
    <tr><td>networkClassesOfService</td><td>no</td><td>n/a</td><td><b>Not Implemented.</b><br>Container for Network Classes of Service specific properties<table border=1>
    <thead><th>Parameter</th><th>Required?</th><th>Default</th><th>Description</th></thead>
    <tbody>
    <tr><td>default</td><td>no</td><td>n/a</td><td><b>Not Implemented.</b><br>Group's default Network Class of Service</td></tr>
    </tbody>
</table></td></tr>
    </tbody>
</table>
<!--- JSON Schema for PUT /customers/{+customerId} bodySchema:
{"title":"Request Properties","type":"object","additionalProperties":false,"required":[],"properties":{"customerName":{"type":"string","minLength":1,"maxLength":80,"description":"This property maps to serviceProviderName of the related BroadWorks service provider or enterprise entity"},"defaultDomain":{"type":"string","minLength":1,"maxLength":80,"pattern":"^[a-zA-Z0-9.-]+$","description":"Domain must already be assigned to the Customer"},"supportEmail":{"type":"string","minLength":1,"maxLength":80,"format":"email"},"contact":{"description":"Container for Contact information.<br>Details of the Contact properties:","type":"object","properties":{"name":{"type":"string","minLength":1,"maxLength":30,"description":"Contact Name"},"number":{"type":"string","minLength":1,"maxLength":30,"description":"Contact Phone Number"},"email":{"type":"string","minLength":1,"maxLength":80,"format":"email","description":"Contact E-mail address"}}},"address":{"type":"object","description":"Container for Address information.<br>Details of the Address properties:","properties":{"addressLine1":{"type":"string","minLength":1,"maxLength":80,"description":"Street address"},"addressLine2":{"type":"string","minLength":1,"maxLength":80,"description":"Street address"},"city":{"type":"string","minLength":1,"maxLength":50,"description":"City"},"stateOrProvince":{"type":"string","minLength":1,"maxLength":50,"description":"State or Province"},"zipOrPostalCode":{"type":"string","minLength":1,"maxLength":50,"description":"Zip or Postal Code"},"country":{"type":"string","minLength":1,"maxLength":50,"description":"Country"}}},"useServiceProviderLanguages":{"type":"boolean"},"networkClassesOfService":{"type":"object","description":"<b>Not Implemented.</b><br>Container for Network Classes of Service specific properties","additionalProperties":false,"properties":{"default":{"type":"string","minLength":1,"maxLength":40,"description":"<b>Not Implemented.</b><br>Group's default Network Class of Service"}}}}} -->


PUT /customers/{+customerId}
> Content-Type: application/json
{
    "customerName": "Example Net",
    "defaultDomain": "voip.example.net",
    "supportEmail": "support@example.net",
    "contact": {
        "name": "Billy",
        "number": "Bishop",
        "email": "billy@example.net"
    },
    "address": {
        "addressLine1": "415 Sixth Ave",
        "addressLine2": "Suite 102",
        "city": "North Seventh",
        "stateOrProvince": "Alabama",
        "zipOrPostalCode": "50415",
        "country": "USA"
    }
}
< 204
< Content-Type: application/hal+json
< Transaction-Id: 1380080943120


<!--------------------------------- DELETE /customers/{+customerId} ------------------------------->

Delete Customer.<br/>
Process Name: Delete Customer (VoIP Entity)

## URI Template Parameters
<table border=1>
    <thead><th>Parameter</th><th>Required?</th><th>Default</th><th>Description</th></thead>
    <tbody>
    <tr><td>customerId</td><td>yes</td><td>n/a</td><td>Loki Server customerId (server-generated) of the Customer</td></tr>
    </tbody>
</table>
<!--- JSON Schema for DELETE /customers/{+customerId} uriSchema:
{"title":"URI Template Parameters","required":["customerId"],"properties":{"customerId":{"title":"Loki Server customerId (server-generated) of the Customer","type":"string","minLength":1,"maxLength":30}}} -->


DELETE /customers/{+customerId}
< 204
< Content-Type: application/hal+json
< Transaction-Id: 1380080943120

--
Sites
##Collection

Supported network elements:

* BroadWorks Application Server

Keys:

* customerId
* siteId

Extension Keys:

* (none)
--

Retrieve the Site matching a specific BroadWorks serviceProviderId and groupId.
Can be used to resolve the Loki Server customerId/siteId of a Site when only the
BroadWorks IDs are known.

##URI Query Parameters

<table border=1>
    <thead>
    <th>Parameter</th>
    <th>Required?</th>
    <th>Default</th>
    <th>Description</th>
    </thead>
    <tbody>
        <tr>
            <td>extensions.broadworks.serviceProviderId</td>
            <td style="text-align: center; font-weight:bold">yes</td>
            <td>n/a</td>
            <td>Corresponds to the serviceProviderId of the service provider (or enterprise) in BroadWorks.
            </td>
        </tr>
        <tr>
            <td>extensions.broadworks.groupId</td>
            <td style="text-align: center; font-weight:bold">yes</td>
            <td>n/a</td>
            <td>Corresponds to the groupId of the group in BroadWorks.
            </td>
        </tr>
    </tbody>
</table>
GET /sites{?extensions.broadworks.serviceProviderId,extensions.broadworks.groupId}
< 200
< Content-Type: application/hal+json
< Transaction-Id: 1380080943120
{
    "_links": {
        "self": {
            "href": "http://lokiserver.apiary.io/loki/customers/ExampleCom/sites/ExampleCom"
        }
    },
    "customerId": "ExampleCom",
    "siteId": "ExampleCom",
    "defaultDomain": "example.com",
    "userLimit": 25,
    "userCount": 2,
    "siteName": "ExampleCom",
    "callingLineIdName": "ExampleCom",
    "callingLineIdPhoneNumber": "+12025555003",
    "callingLineIdDisplayPhoneNumber": "2025555003",
    "timeZone": "US/Eastern",
    "locationDialingCode": "1",
    "contact": {
        "name": "bob jones",
        "number": "2028887777",
        "email": "bjones@jones.com"
    },
    "address": {
        "addressLine1": "415 Sixth Ave",
        "addressLine2": "Suite 102",
        "city": "North Seventh",
        "stateOrProvince": "Alabama",
        "zipOrPostalCode": "50415",
        "country": "USA"
    },
    "extensions": {
        "broadworks": {
            "serviceProviderId": "ExampleCom",
            "groupId": "ExampleCom"
        }
    },
    "curies": [
        {
            "name": "ls",
            "href": "http://lokiserver.apiary.io/loki/rels/{rel}",
            "templated": true
        }
    ]
}


Create a new Site.<br />
Process name: Create Site (VoIP Entity)<br />
Rollback-enabled: Yes.

## URI Template Parameters

<table border=1>
    <thead>
    <th>Parameter</th>
    <th>Required?</th>
    <th>Default</th>
    <th>Description</th>
    </thead>
    <tbody>
        <tr>
            <td>customerId</td>
            <td style="text-align: center; font-weight:bold">yes</td>
            <td>n/a</td>
            <td>Loki Server customerId (server-generated) of the Customer in which the new Site is to be created.
            Note this can be resolved from the BroadWorks IDs via GET /loki/customers{?extensions.broadworks.serviceProviderId}.
            </td>
        </tr>
    </tbody>
</table>

##URI Query Parameters

<table border=1>
    <thead>
    <th>Parameter</th>
    <th>Required?</th>
    <th>Default</th>
    <th>Description</th>
    </thead>
    <tbody>
        <tr>
            <td>mode</td>
            <td style="text-align: center; font-weight:bold">yes</td>
            <td>n/a</td>
            <td>Controls execution mode.<br />
            Allowed values: [ "prevalidate-only", "prevalidate-and-create", "create-only" ].<br />
            <b>NOTE: at this time only "create-only" (attempts to create the resource, with no pre-validation) is allowed.</b>
            </td>
       </tr>
    </tbody>
</table>

##Request Properties

Note: See the JSON Schema (**link TBD) for data types, format, length restrictions, etc.

<table border=1>
    <thead>
    <th>Property</th>
    <th>Required?</th>
    <th>Default</th>
    <th>Description</th>
    </thead>
    <tbody>
        <tr>
            <td>siteName</td>
            <td style="text-align: center; font-weight:bold">yes</td>
            <td>n/a</td>
            <td>Suggested name for the new site. In the default configuration, this will be used as the group name for the underlying BroadWorks group.<br />
            The siteName property will also be used to generate the BroadWorks groupId by stripping invalid characters and truncating the result to maximum 30 characters.
            </td>
        </tr>
        <tr>
            <td>defaultDomain</td>
            <td style="text-align: center;">no</td>
            <td>n/a</td>
            <td>Default Domain of the BroadWorks group.<br />
            If not present in the request the Service Provider/Enterprise default domain will be assigned to the new group.
            </td>
        </tr>
        <tr>
            <td>userLimit</td>
            <td style="text-align: center;">yes</td>
            <td>n/a</td>
            <td>Maximum number of users in the BroadWorks group</td>
        </tr>
         <tr>
            <td>callingLineId</td>
            <td style="text-align: center;">no</td>
            <td>n/a</td>
            <td>
                Container for Calling Line ID information.<br />
                Details of the Calling Line ID properties:
                <table border=1>
                    <thead>
                    <th>Property</th>
                    <th>Required?</th>
                    <th>Default</th>
                    <th>Description</th>
                    </thead>
                    <tbody>
                        <tr>
                            <td>name</td>
                            <td style="text-align: center;">no</td>
                            <td>n/a</td>
                            <td>Calling Line ID Group Name.<br /> 
                            If not present in the request it will be generated from the siteName by removing disallowed characters.</td>
                        </tr>
                        <tr>
                            <td>phoneNumber</td>
                            <td style="text-align: center;">no</td>
                            <td>n/a</td>
                            <td>Calling Line ID Group Number.</td>
                        </tr>
                        <tr>
                            <td>tnRoutine</td>
                            <td style="text-align: center;">no</td>
                            <td>n/a</td>
                            <td>Calling Line ID Group Phone Number (TN) assignment routine.<br />
                            Supported values and impact on other required properties:
                            <table border=1>
                            <thead>
                                <th>tnRoutine</th>
                                <th>Description</th>
                            </thead>
                            <tbody>
                            <tr>
                                <td><b>port-no-temp</b></td>
                                <td>TN does not exist in the system; will attempt to assign at both the Customer and Site levels.</td>
                            </tr>
                            <tr>
                                <td><b>auto</b></td>
                                <td>TN may or may not already exist in the system; will be assigned automatically to either/both as needed.</td>
                            </tr>
                            <tr>
                                <td><b>no-number</b></td>
                                <td>TN will not be assigned automatically.</td>
                            </tr>
                            <tr>
                                <td><b>""</b>(empty string)</td>
                                <td>TN will not be assigned automatically.</td>
                            </tr>
                            </tbody>
                            </table></td>
                        </tr>
                    </tbody>
                </table>
            </td>
        </tr>
         <tr>
            <td>timeZone</td>
            <td style="text-align: center;">no</td>
            <td>n/a</td>
            <td>Time Zone expressed as a Zone Name from the IANA Time Zone Database, e.g. "America/New_York".</td>
        </tr>
        <tr>
            <td>locationDialingCode</td>
            <td style="text-align: center;">no</td>
            <td>n/a</td>
            <td>Location Dialing Code.</td>
        </tr>
        <tr>
            <td>contact</td>
            <td style="text-align: center;">no</td>
            <td>n/a</td>
            <td>
                Container for Contact information.<br />
                Details of the Contact properties:
                <table border=1>
                    <thead>
                    <th>Property</th>
                    <th>Required?</th>
                    <th>Default</th>
                    <th>Description</th>
                    </thead>
                    <tbody>
                        <tr>
                            <td>name</td>
                            <td style="text-align: center;">no</td>
                            <td>n/a</td>
                            <td>Contact Name.</td>
                        </tr>
                        <tr>
                            <td>number</td>
                            <td style="text-align: center;">no</td>
                            <td>n/a</td>
                            <td>Contact Phone Number.</td>
                        </tr>
                        <tr>
                            <td>email</td>
                            <td style="text-align: center;">no</td>
                            <td>n/a</td>
                            <td>Contact E-mail address</td>
                        </tr>
                    </tbody>
                </table>
            </td>
        </tr>
        <tr>
            <td>address</td>
            <td style="text-align: center;">no</td>
            <td>n/a</td>
            <td>
                Container for Address information.<br />
                Details of the Address properties:
                <table border=1>
                    <thead>
                    <th>Property</th>
                    <th>Required?</th>
                    <th>Default</th>
                    <th>Description</th>
                    </thead>
                    <tbody>
                        <tr>
                            <td>addressLine1</td>
                            <td style="text-align: center;">no</td>
                            <td>n/a</td>
                            <td>Street address.</td>
                        </tr>
                        <tr>
                            <td>addressLine2</td>
                            <td style="text-align: center;">no</td>
                            <td>n/a</td>
                            <td>Street address.</td>
                        </tr>
                        <tr>
                            <td>city</td>
                            <td style="text-align: center;">no</td>
                            <td>n/a</td>
                            <td>City</td>
                        </tr>
                        <tr>
                            <td>stateOrProvince</td>
                            <td style="text-align: center;">no</td>
                            <td>n/a</td>
                            <td>State or Province</td>
                        </tr>
                        <tr>
                            <td>zipOrPostalCode</td>
                            <td style="text-align: center;">no</td>
                            <td>n/a</td>
                            <td>Zip or Postal Code</td>
                        </tr>
                        <tr>
                            <td>country</td>
                            <td style="text-align: center;">no</td>
                            <td>n/a</td>
                            <td>Country</td>
                        </tr>
                    </tbody>
                </table>
            </td>
        </tr>
        <tr>
            <td>extensions</td>
            <td style="text-align: center;">no</td>
            <td>n/a</td>
            <td>Container for network-element specific properties</td>
        </tr>
        <tr>
            <td>extensions.broadworks</td>
            <td style="text-align: center;">no</td>
            <td>n/a</td>
            <td>
                Container for BroadWorks-specific properties.<br />
                Details of the BroadWorks-specific properties:
                <table border=1>
                    <thead>
                    <th>Property</th>
                    <th>Required?</th>
                    <th>Default</th>
                    <th>Description</th>
                    </thead>
                    <tbody>
                        <tr>
                            <td>groupId</td>
                            <td style="text-align: center;">no</td>
                            <td>n/a</td>
                            <td>The groupId for the new BroadWorks group.<br />
                            If present it overwrites the generated value from the siteName.
                            </td>
                        </tr>
                        <tr>
                            <td>templateGroupId</td>
                            <td style="text-align: center;">no</td>
                            <td>n/a</td>
                            <td>The groupId of a BroadWorks group that will be used as template.<br />
                            Must be the groupId of a group in the LokiHelper service provider defined in the configuration.<br />
                            <b>Note:</b> Documentation of how group templating works in LWS-REST is found in the Loki Provisioning Administrators Guide.
                            </td>
                        </tr>
                    </tbody>
                </table>
            </td>
        </tr>
        <tr>
            <td>extensionLength</td>
            <td style="text-align: center;">no</td>
            <td>n/a</td>
            <td>
                Container for Extension Dialing information.<br />
                Details of the Extension Dialing properties:
                <table border=1>
                    <thead>
                    <th>Property</th>
                    <th>Required?</th>
                    <th>Default</th>
                    <th>Description</th>
                    </thead>
                    <tbody>
                        <tr>
                            <td>min</td>
                            <td style="text-align: center;">no</td>
                            <td>n/a</td>
                            <td>Controls the minimum extension dialing policy of a Group.</td>
                        </tr>
                        <tr>
                            <td>max</td>
                            <td style="text-align: center;">no</td>
                            <td>n/a</td>
                            <td>Controls the maximum extension dialing policy of a Group.</td>
                        </tr>
                        <tr>
                            <td>default</td>
                            <td style="text-align: center;">no</td>
                            <td>n/a</td>
                            <td>Controls the default extension dialing policy of a Group.</td>
                        </tr>
                    </tbody>
                </table>
            </td>
        </tr>
        <tr>
            <td>services</td>
            <td style="text-align: center;">no</td>
            <td>n/a</td>
	        <td>The set of services to configure to the new BroadWorks group.<br />
	        Each service name must match a valid (configurable) group service in BroadWorks.<br />
	        <b>Note</b>: The Site Add request does not assign the services from the <code>services</code> section in the request
	        body; it only configures them.<br /> 
            To ensure the necessary group services are assigned to the BroadWorks group, be sure to select a BroadWorks
            template that has the desired services assigned.<br /> 
            If service configuration settings are included in the request, but the template group doesn't have the
            service(s) assigned (or the template is omitted in the request), the request will fail.<br />
            </td>
        </tr>
        <tr>
            <td>services.'Voice Portal'.*</td>
            <td style="text-align: center;">no</td>
            <td>n/a</td>
            <td>Configuration settings for the Voice Portal service. The table below describes the supported settings.
            <table border=1>
                <thead>
                    <th>Property</th>
                    <th>Required?</th>
                    <th>Default</th>
                    <th>Notes</th>
                </thead>
                <tbody>
                    <tr>
                        <td>isActive</td>
                        <td style="text-align: center;">no</td>
                        <td>n/a</td>
                        <td>On/Off</td>
                    </tr>
                    <tr>
                        <td>extension</td>
                        <td style="text-align: center;">no</td>
                        <td>n/a</td>
                        <td>Extension</td>
                    </tr>
                    <tr>
                        <td>phoneNumber</td>
                        <td style="text-align: center;">no</td>
                        <td>n/a</td>
                        <td>Phone Number</td>
                    </tr>
                    <tr>
                        <td>tnRoutine</td>
                        <td style="text-align: center;">no</td>
                        <td>n/a</td>
                        <td>Voice Portal Phone Number (TN) assignment routine.<br />
                        Supported values and impact on other required properties:
                        <table border=1>
                        <thead>
                            <th>tnRoutine</th>
                            <th>Description</th>
                        </thead>
                        <tbody>
                        <tr>
                            <td><b>port-no-temp</b></td>
                            <td>TN does not exist in the system; will attempt to assign at both the Customer and Site levels.</td>
                        </tr>
                        <tr>
                            <td><b>auto</b></td>
                            <td>TN may or may not already exist in the system; will be assigned automatically to either/both as needed.</td>
                        </tr>
                        <tr>
                            <td><b>no-number</b></td>
                            <td>TN will not be assigned automatically.</td>
                        </tr>
                        <tr>
                            <td><b>""</b>(empty string)</td>
                            <td>TN will not be assigned automatically.</td>
                        </tr>
                        </tbody>
                        </table></td>
                    </tr>
                <tbody>
            </table>
            </td>
        </tr>
        <tr>
            <td>services.'Third-Party Voice Mail Support'.*</td>
            <td style="text-align: center;">no</td>
            <td>n/a</td>
            <td>Configuration settings for the Third-Party Voice Mail Support service. The table below describes the supported settings.
            <table border=1>
            <thead>
                <th>Property</th>
                <th>Required?</th>
                <th>Default</th>
                <th>Notes</th>
            </thead>
            <tbody>
            <tr>
                <td>isActive</td>
                <td style="text-align: center;">no</td>
                <td>n/a</td>
                <td>On/Off</td>
            </tr>
            <tr>
                <td>groupServer</td>
                <td style="text-align: center;">no</td>
                <td>n/a</td>
                <td>Third-Party Voice Mail Server.</td>
            </tr>
            <tbody>
            </table>
            </td>
        </tr>
        <tr>
            <td>networkClassesOfService</td>
            <td style="text-align: center;">no</td>
            <td>n/a</td>
            <td>
                <b>Not Implemented</b><br />
                Container for Network Classes of Service specific properties.
            </td>
        </tr>
        <tr>
            <td>networkClassesOfService.default</td>
            <td style="text-align: center;">no</td>
            <td>n/a</td>
            <td>
                <b>Not Implemented</b><br />
                Group's default Network Class of Service.
            </td>
        </tr>
    </tbody>
</table>

##Response Properties - 201 Created

Besides the properties listed in the table below, the response also contains the normal HAL _links and curies properties.
<table border=1>
    <thead>
    <th>Parameter</th>
    <th>Description</th>
    </thead>
    <tbody>
        <tr>
            <td>customerId</td>
            <td>A Loki Server ID (server-generated) of the existing Customer.</td>
       </tr>
       <tr>
            <td>siteId</td>
            <td>A Loki Server ID (server-generated) of the created Site. The format of this is subject to change. <br />
                It is not guaranteed to match what is given as input ("siteName") and also it is not guaranteed to match the created BroadWorks Group ID.
            </td>
       </tr>
       <tr>
            <td>extensions.broadworks.serviceProviderId</td>
            <td>The ID of the BroadWorks Service Provider/ Enterprise in which the group was created.</td>
       </tr>
       <tr>
            <td>extensions.broadworks.groupId</td>
            <td>The ID of the created BroadWorks Group.</td>
       </tr>
       <tr>
            <td>callingLineId.name</td>
            <td>The generated Calling Line ID Group Name if it wasn't present in the request.</td>
       </tr>
       <tr>
            <td>defaultDomain</td>
            <td>The assigned default domain if it wasn't present in the request.</td>
       </tr>
    </tbody>
</table>

POST /customers/{+customerId}/sites{?mode}
{
    "siteName": "Example Com - North",
    "defaultDomain": "example.com",
    "userLimit": 10,
    "callingLineId": {
        "name": "ExampleComNorth",
        "phoneNumber": "+1-4164449867",
        "tnRoutine": "port-no-temp"
    },
    "timeZone": "America/St_Johns",
    "locationDialingCode": "415",
    "contact": {
        "name": "Billy",
        "number": "Bishop",
        "email": "billy@example.com"
    },
    "address": {
        "addressLine1": "415 Sixth Ave",
        "addressLine2": "Suite 102",
        "city": "North Seventh",
        "stateOrProvince": "Alabama",
        "zipOrPostalCode": "50415",
        "country": "USA"
    },
    "extensionLength": {
        "min": 2,
        "max": 6,
        "default": 4
    },
    "services": {
        "Voice Portal": {
            "isActive": true,
            "extension": "4000",
            "phoneNumber": "+1-4165554000",
            "tnRoutine": "port-no-temp"
        },
        "Third-Party Voice Mail Support": {
            "isActive": true,
            "groupServer": "mail.example.com"
        }
    },
    "networkClassesOfService": {
        "default": "Standard"
    },
    "extensions": {
        "broadworks": {
            "groupId": "Example Com - North",
            "templateGroupId": "BusinessLineBasic"
        }
    }
}
< 201
< Content-Type: application/hal+json
< Transaction-Id: 1380080943120
< Location: http://lokiserver.apiary.io/loki/customers/ExampleCom/sites/Example%20Com%20-%20North
{
    "_links": {
        "self": {
            "href": "http://lokiserver.apiary.io/loki/customers/Example%20Com/sites/Example%20Com%20-%20North"
        }
    },
    "curies": [
        {
            "name": "ls",
            "href": "http://lokiserver.apiary.io/loki/rels/{rel}",
            "templated": true
        }
    ],
    "customerId": "Example Com",
    "siteId": "Example Com - North",
    "callingLineId" : {
            "name": "ExampleComNorth"
    },
    "extensions" : {
        "broadworks": {
	        "serviceProviderId": "Example Com",
	        "groupId": "Example Com - North"
        }
    }
}


--
Site Phone Numbers
##Collection

Supported network elements:

* BroadWorks Application Server

Keys:

* customerId
* siteId
* phoneNumber

Extension Keys:

* (none)
--

Assigns a TN to a Site based on the specified TN management routine.

##URI Query Parameters

<table border=1>
    <thead>
    <th>Parameter</th>
    <th>Required?</th>
    <th>Default</th>
    <th>Description</th>
    </thead>
    <tbody>
        <tr>
            <td>mode</td>
            <td style="text-align: center; font-weight:bold">yes</td>
            <td>n/a (not optional)</td>
            <td>Controls execution mode.<br />
            Allowed values: [ "prevalidate-only", "prevalidate-and-create", "create-only" ].<br />
            <b>NOTE: at this time only "create-only" (attempts to create the resource, with no pre-validation) is allowed.</b>
            </td>
        </tr>
        <tr>
            <td>customerId</td>
            <td style="text-align: center; font-weight:bold">yes</td>
            <td>n/a</td>
            <td>Loki Server customerId (server-generated) of the Customer in which the new TN is to be assigned.
            Note this can be resolved from the BroadWorks IDs via GET /loki/sites{?extensions.broadworks.serviceProviderId,extensions.broadworks.groupId}.
            </td>
        </tr>
        <tr>
            <td>siteId</td>
            <td style="text-align: center; font-weight:bold">yes</td>
            <td>n/a</td>
            <td>Loki Server siteId (server-generated) of the Site in which the new TN is to be assigned.
            Note this can be resolved from the BroadWorks IDs via GET /loki/sites{?extensions.broadworks.serviceProviderId,extensions.broadworks.groupId}.
            </td>
        </tr>
    </tbody>
</table>

##Request Properties

Note: See the JSON Schema (**link TBD) for data types, format, length restrictions, etc.

<table border=1>
    <thead>
    <th>Property</th>
    <th>Required?</th>
    <th>Default</th>
    <th>Description</th>
    </thead>
    <tbody>
        <tr>
            <td>phoneNumber</td>
            <td style="text-align: center; font-weight:bold">yes</td>
            <td>n/a</td>
            <td>Phone Number.
            Will be assigned on Customer and Group as needed, depending on the tnRoutine.
            Must be E.164 formatted, e.g. +1-2005553001 (the dash is required, after the country code).</td>
        </tr>
        <tr>
            <td>tnRoutine</td>
            <td style="text-align: center; font-weight:bold">yes</td>
            <td>n/a</td>
            <td>Phone Number (TN) assignment routine.<br />
            Supported values and impact on other required properties:
            <table border=1>
            <thead>
                <th>tnRoutine</th>
                <th>Description</th>
            </thead>
            <tbody>
            <tr>
                <td><b>port-no-temp</b></td>
                <td>TN does not exist in the system; will attempt to asssign at both the Customer and Site levels.</td>
            </tr>
            <tr>
                <td><b>auto</b></td>
                <td>TN may or may not already exist in the system; will be assigned automatically to either/both as needed.</td>
            </tr>
            </tbody>
            </table>
        </tr>
    </tbody>
</table>

POST /customers/{+customerId}/sites/{+siteId}/assignPhoneNumber{?mode}
> Content-Type: application/json
{
    "phoneNumber" : "+1-4165551212",
    "tnRoutine" : "port-no-temp"
}
< 200
< Transaction-Id: 1380080943120
< Content-Type: application/hal+json
{
    "_links": {
        "self": {
            "href": "http://lokiserver.apiary.io/loki/customers/Example%20Com/sites/Example%20Com%20-%20North/assignPhoneNumber"
        }
    },
    "curies": [
        {
            "name": "ls",
            "href": "http://lokiserver.apiary.io/loki/rels/{rel}",
            "templated": true
        }
    ],
    "_embedded": {
        "ls:customer-phone-numbers": [
            {
                "_links": {
                    "self": {
                        "href": "http://lokiserver.apiary.io/loki/customers/Example%20Com/phone-numbers/%2B1-2005553001"
                    }
                },
                "customerId": "Example Com",
                "phoneNumber": "+1-2005553001"
            }
        ],
        "ls:site-phone-numbers": [
            {
                "_links": {
                    "self": {
                        "href": "http://lokiserver.apiary.io/loki/customers/Example%20Com/sites/Example%20Com%20-%20North/phone-numbers/%2B1-2005553001"
                    }
                },
                "customerId": "Example Com",
                "siteId": " Example Com - North",
                "phoneNumber": "+1-2005553001"
            }
        ]
    }
}

Activate phone number(s) in a Site. The corresponding phone numbers in the underlying BroadWorks group will be set to "activated".

##URI Query Parameters

<table border=1>
    <thead>
    <th>Parameter</th>
    <th>Required?</th>
    <th>Default</th>
    <th>Description</th>
    </thead>
    <tbody>
        <tr>
            <td>siteId</td>
            <td style="text-align: center; font-weight:bold">yes</td>
            <td>n/a</td>
            <td>Loki Server ID of the Site containing the phone numbers(s) to be activated.
            </td>
        </tr>
    </tbody>
</table>

##Request Properties

Note: See the JSON Schema (**link TBD) for data types, format, length restrictions, etc.

<table border=1>
    <thead>
    <th>Property</th>
    <th>Required?</th>
    <th>Default</th>
    <th>Description</th>
    </thead>
    <tbody>
        <tr>
            <td>phoneNumbers</td>
            <td style="text-align: center; font-weight:bold">no</td>
            <td>n/a</td>
            <td>An array containing the phone numbers and/or phone number ranges to be activated.</td>
        </tr>
        <tr>
            <td>phoneNumbers[]</td>
            <td style="text-align: center; font-weight:bold">no</td>
            <td>n/a</td>
            <td>The array entry for an individual phone number consists of a single phone number.<br />
            The array entry for a phone number range consists of an object. For ranges, the end value is required to be higher than the start value,
            and both are required to have the same country code.
            See below for additional details of this object's properties.<br />
            Note that the E.164 format accepted in the LWS-REST API consists of a leading +, followed by the country code, followed by a hyphen, followed by the national number (subscriber number), e.g. <code>+1-5554161212</code>.</td>
        </tr>
        <tr>
            <td>phoneNumbers[].start</td>
            <td style="text-align: center; font-weight:bold">no</td>
            <td>n/a</td>
            <td>The first phone number in a range (inclusive). Required when activating a range.</td>
        </tr>
        <tr>
            <td>phoneNumbers[].end</td>
            <td style="text-align: center; font-weight:bold">no</td>
            <td>n/a</td>
            <td>The last phone number in a range (inclusive). Required when activating a range.</td>
        </tr>
    </tbody>
</table>

A request may contain any combination of individual phone numbers and phone number ranges (in any order), as seen in the example.
POST /sites/{+siteId}/phone-numbers/activate
> Content-Type: application/json
{
    "phoneNumbers" : [
        "+1-5553070900",
        "+1-5553070910",
        {
            "start" : "+1-5553071000",
            "end" : "+1-5553071009"
        },
        "+1-5553070876",
        {
            "start" : "+1-5553072000",
            "end" : "+1-5553072003"
        }
    ]
}
< 204
< Transaction-Id: 1380080943120


Dectivate phone number(s) in a Site. The corresponding phone numbers in the underlying BroadWorks group will be set to "not activated".

##URI Query Parameters

<table border=1>
    <thead>
    <th>Parameter</th>
    <th>Required?</th>
    <th>Default</th>
    <th>Description</th>
    </thead>
    <tbody>
        <tr>
            <td>siteId</td>
            <td style="text-align: center; font-weight:bold">yes</td>
            <td>n/a</td>
            <td>Loki Server ID of the Site containing the phone numbers(s) to be deactivated.
            </td>
        </tr>
    </tbody>
</table>

##Request Properties

Note: See the JSON Schema (**link TBD) for data types, format, length restrictions, etc.

<table border=1>
    <thead>
    <th>Property</th>
    <th>Required?</th>
    <th>Default</th>
    <th>Description</th>
    </thead>
    <tbody>
        <tr>
            <td>phoneNumbers</td>
            <td style="text-align: center; font-weight:bold">no</td>
            <td>n/a</td>
            <td>An array containing the phone numbers and/or phone number ranges to be deactivated.</td>
        </tr>
        <tr>
            <td>phoneNumbers[]</td>
            <td style="text-align: center; font-weight:bold">no</td>
            <td>n/a</td>
            <td>The array entry for an individual phone number consists of a single phone number.<br />
            The array entry for a phone number range consists of an object. For ranges, the end value is required to be higher than the start value,
            and both are required to have the same country code.
            See below for additional details of this object's properties.<br />
            Note that the E.164 format accepted in the LWS-REST API consists of a leading +, followed by the country code, followed by a hyphen, followed by the national number (subscriber number), e.g. <code>+1-5554161212</code>.</td>
        </tr>
        <tr>
            <td>phoneNumbers[].start</td>
            <td style="text-align: center; font-weight:bold">no</td>
            <td>n/a</td>
            <td>The first phone number in a range (inclusive). Required when deactivating a range.</td>
        </tr>
        <tr>
            <td>phoneNumbers[].end</td>
            <td style="text-align: center; font-weight:bold">no</td>
            <td>n/a</td>
            <td>The last phone number in a range (inclusive). Required when deactivating a range.</td>
        </tr>
    </tbody>
</table>

A request may contain any combination of individual phone numbers and phone number ranges (in any order), as seen in the example.
POST /sites/{+siteId}/phone-numbers/deactivate
> Content-Type: application/json
{
    "phoneNumbers" : [
        "+1-5553070900",
        "+1-5553070910",
        {
            "start" : "+1-5553071000",
            "end" : "+1-5553071009"
        },
        "+1-5553070876",
        {
            "start" : "+1-5553072000",
            "end" : "+1-5553072003"
        }
    ]
}
< 204
< Transaction-Id: 1380080943120


--
Site Services
##Collection

Supported network elements:

* BroadWorks Application Server

Keys:

* customerId
* siteId

Extension Keys:

* (none)
--

Retrieve the Voice Portal service settings of a Site.

**NOT IMPLEMENTED**

GET /customers/{+customerId}/sites/{+siteId}/services/Voice Portal
< 200
< Content-Type: application/hal+json
< Transaction-Id: 1380080943120
{
    "_links": {
        "self": {
            "href": "http://lokiserver.example.com/loki/customers/Example%20Com/sites/Example%20Com%20North/services/Voice%20Portal"
        }
    },
    "curies": [
        {
            "name": "ls",
            "href": "http://lokiserver.apiary.io/loki/rels/{rel}",
            "templated": true
        }
    ],
    "customerId": "Example Com",
    "siteId": "Example Com North",
    "voicePortalId": "VoicePortalId",
    "profile": {
        "name": "Voice Portal",
        "callingLineId": {
            "lastName": "Portal",
            "firstName": "Voice",
            "phoneNumber": "+1-555123456" 
        },
        "phoneNumber": "+1-555123456",
        "countryCode": "1",
        "nationalPrefix": "+1",
        "extension": "3456",
        "department": "dep",
        "language": "English",
        "timeZone": "America/New_York",
        "timeZoneDisplayName": "(GMT-04:00) (US) Eastern Time",
        "alias": [
            "voiceportal@example.com"
        ],
        "publicUserIdentity": "VoicePortalId"
    },
    "isActive": true,
    "enableExtendedScope": true,
    "allowIdentificationByPhoneNumberOrVoiceMailAliasesOnLogin": false,
    "useVoicePortalWizard": true,
    "externalRouting": {
        "scope": "Group",
        "useExternal": true,
        "address": "external@example.com"
    },
    "homeZone": "Home Zone #1",
    "networkClassOfService": "NCoS #1"
}


Modify the Voice Portal service settings of a Site.<br />
Process name: Modify Site Voice Portal (VoIP Entity)<br />
Rollback-enabled: No.

## URI Template Parameters

<table border=1>
    <thead>
    <th>Parameter</th>
    <th>Required?</th>
    <th>Default</th>
    <th>Description</th>
    </thead>
    <tbody>
        <tr>
            <td>customerId</td>
            <td style="text-align: center; font-weight:bold">yes</td>
            <td>n/a</td>
            <td>Loki Server customerId (server-generated) of the Customer in which the Site is located.
            </td>
        </tr>
        <tr>
            <td>siteId</td>
            <td style="text-align: center; font-weight:bold">yes</td>
            <td>n/a</td>
            <td>Loki Server siteId (server-generated) of the Site where the Voice Portal service is configured.
            </td>
        </tr>
    </tbody>
</table>

##Request Properties

Note: See the JSON Schema (**link TBD) for data types, format, length restrictions, etc.

<table border=1>
    <thead>
    <th>Property</th>
    <th>Required?</th>
    <th>Default</th>
    <th>Description</th>
    </thead>
    <tbody>
        <tr>
            <td>profile</td>
            <td style="text-align: center;">no</td>
            <td>n/a</td>
            <td>
                Container for Profile information.<br />
                Details of the Profile properties:
                <table border=1>
                    <thead>
                    <th>Property</th>
                    <th>Required?</th>
                    <th>Default</th>
                    <th>Description</th>
                    </thead>
                    <tbody>
                        <tr>
                            <td>name</td>
                            <td style="text-align: center;">no</td>
                            <td>n/a</td>
                            <td>Name</td>
                        </tr>
                        <tr>
                            <td>callingLineId</td>
                            <td style="text-align: center;">no</td>
                            <td>n/a</td>
                            <td>
                                Container for Calling Line ID information.<br />
                                Details of the Calling Line ID properties:
                                <table border=1>
                                    <thead>
                                    <th>Property</th>
                                    <th>Required?</th>
                                    <th>Default</th>
                                    <th>Description</th>
                                    </thead>
                                    <tbody>
                                        <tr>
                                            <td>firstName</td>
                                            <td style="text-align: center;">no</td>
                                            <td>n/a</td>
                                            <td>Calling Line ID First Name.<br /> 
                                            If not present in the request it will be copied from the profile.name.</td>
                                        </tr>
                                        <tr>
                                            <td>lastName</td>
                                            <td style="text-align: center;">no</td>
                                            <td>n/a</td>
                                            <td>Calling Line ID Last Name.<br /> 
                                            If not present in the request it will be copied from the profile.name.</td>
                                        </tr>
                                        <tr>
                                            <td>phoneNumber</td>
                                            <td style="text-align: center;">no</td>
                                            <td>n/a</td>
                                            <td>Calling Line ID Phone Number.<br />
                                            <b>Not Implemented</b></td>
                                        </tr>
                                    </tbody>
                                </table>
                            </td>
                        </tr>
                        <tr>
                            <td>phoneNumber</td>
                            <td style="text-align: center;">no</td>
                            <td>n/a</td>
                            <td>Phone Number.</td>
                        </tr>
                        <tr>
                            <td>tnRoutine</td>
                            <td style="text-align: center;">no</td>
                            <td>n/a</td>
                            <td>Voice Portal Phone Number (TN) assignment routine.<br />
                            <b>Not Implemented</b><br />
                            Supported values and impact on other required properties:
                            <table border=1>
                            <thead>
                                <th>tnRoutine</th>
                                <th>Description</th>
                            </thead>
                            <tbody>
                            <tr>
                                <td><b>port-no-temp</b></td>
                                <td>TN does not exist in the system; will attempt to assign at both the Customer and Site levels.</td>
                            </tr>
                            <tr>
                                <td><b>auto</b></td>
                                <td>TN may or may not already exist in the system; will be assigned automatically to either/both as needed.</td>
                            </tr>
                            <tr>
                                <td><b>no-number</b></td>
                                <td>TN will not be assigned automatically.</td>
                            </tr>
                            <tr>
                                <td><b>""</b>(empty string)</td>
                                <td>TN will not be assigned automatically.</td>
                            </tr>
                            </tbody>
                            </table></td>
                        </tr>
                        <tr>
                            <td>extension</td>
                            <td style="text-align: center;">no</td>
                            <td>n/a</td>
                            <td>Extension.</td>
                        </tr>
                        <tr>
                            <td>department</td>
                            <td style="text-align: center;">no</td>
                            <td>n/a</td>
                            <td>Department.<br />
                            <b>Not Implemented</b></td>
                        </tr>
                        <tr>
                            <td>language</td>
                            <td style="text-align: center;">no</td>
                            <td>n/a</td>
                            <td>Language.<br />
                            <b>Not Implemented</b></td>
                        </tr>
                        <tr>
                            <td>timeZone</td>
                            <td style="text-align: center;">no</td>
                            <td>n/a</td>
                            <td>Time Zone expressed as a Zone Name from the IANA Time Zone Database, e.g. "America/New_York".<br />
                            <b>Not Implemented</b></td>
                        </tr>
                        <tr>
                            <td>alias</td>
                            <td style="text-align: center;">no</td>
                            <td>n/a</td>
                            <td>List of possible SIP URIs aliases of the Voice Portal.<br />
                            <b>Not Implemented</b></td>
                        </tr>
                        <tr>
                            <td>publicUserIdentity</td>
                            <td style="text-align: center;">no</td>
                            <td>n/a</td>
                            <td>Public User Identity SIP URI for the Voice Portal.<br />
                            <b>Not Implemented</b></td>
                        </tr>
                    </tbody>
                </table>
            </td>
        </tr>
        <tr>
            <td>isActive</td>
            <td style="text-align: center;">no</td>
            <td>n/a</td>
            <td>On/Off.</td>
        </tr>
        <tr>
            <td>enableExtendedScope</td>
            <td style="text-align: center;">no</td>
            <td>n/a</td>
            <td>It is supported only in HSS data mode.<br />
            <b>Not Implemented</b></td>
        </tr>
        <tr>
            <td>allowIdentificationByPhoneNumberOrVoiceMailAliasesOnLogin</td>
            <td style="text-align: center;">no</td>
            <td>n/a</td>
            <td>Allow Phone Numbers or Voice Mail Aliases on login in addition to Extensions.<br />
            <b>Not Implemented</b></td>
        </tr>
        <tr>
            <td>useVoicePortalWizard</td>
            <td style="text-align: center;">no</td>
            <td>n/a</td>
            <td>Use Voice Portal Wizard.<br />
            <b>Not Implemented</b></td>
        </tr>
        <tr>
            <td>externalRouting</td>
            <td style="text-align: center;">no</td>
            <td>n/a</td>
            <td>
                Container for External Routing information.<br />
                <b>Not Implemented</b><br />
                Details of the External Routing properties:
                <table border=1>
                    <thead>
                    <th>Property</th>
                    <th>Required?</th>
                    <th>Default</th>
                    <th>Description</th>
                    </thead>
                    <tbody>
                        <tr>
                            <td>scope</td>
                            <td style="text-align: center;">no</td>
                            <td>n/a</td>
                            <td>Use System Settings/ Use Group Settings.</td>
                        </tr>
                        <tr>
                            <td>useExternal</td>
                            <td style="text-align: center;">no</td>
                            <td>n/a</td>
                            <td>Use External Routing Address.</td>
                        </tr>
                        <tr>
                            <td>address</td>
                            <td style="text-align: center;">no</td>
                            <td>n/a</td>
                            <td>External Routing address.</td>
                        </tr>
                    </tbody>
                </table>
            </td>
        </tr>
        <tr>
            <td>homeZone</td>
            <td style="text-align: center;">no</td>
            <td>n/a</td>
            <td>Home Zone.<br />
            <b>Not Implemented</b></td>
        </tr>
        <tr>
            <td>networkClassOfService</td>
            <td style="text-align: center;">no</td>
            <td>n/a</td>
            <td>Network Class of Service.<br />
            <b>Not Implemented</b></td>
        </tr>
    </tbody>
</table>

PUT /customers/{+customerId}/sites/{+siteId}/services/Voice%20Portal
{
    "isActive": true,
    "profile": {
        "name": "Voice Portal",
        "phoneNumber": "+1-54356536564",
        "callingLineId": {
            "firstName": "CLID first name",
            "lastName": "CLID last name"
        }
    }        
}
< 204
< Transaction-Id: 1380080943120


--
VoIP Site Devices
##Collection

Supported network elements:

* BroadWorks Application Server

Keys:

* customerId
* siteId
* deviceId

Extension Keys:

* (none)
--

Create a new VoIP Site Device.

Rollback-enabled: No; If the VoIP Site Device add fails then there is nothing to rollback.

## URI Template Parameters

<table border=1>
    <thead>
    <th>Parameter</th>
    <th>Required?</th>
    <th>Default</th>
    <th>Description</th>
    </thead>
    <tbody>
        <tr>
            <td>customerId</td>
            <td style="text-align: center; font-weight:bold">yes</td>
            <td>n/a</td>
            <td>Loki Server customerId (server-generated) of the Customer in which the new VoIP Site Device is to be created.
            Note this can be resolved from the BroadWorks IDs via GET /loki/sites{?extensions.broadworks.serviceProviderId,extensions.broadworks.groupId}.
            </td>
        </tr>
        <tr>
            <td>siteId</td>
            <td style="text-align: center; font-weight:bold">yes</td>
            <td>n/a</td>
            <td>Loki Server siteId (server-generated) of the Site in which the new VoIP Site Device is to be created.
            Note this can be resolved from the BroadWorks IDs via GET /loki/sites{?extensions.broadworks.serviceProviderId,extensions.broadworks.groupId}.
            </td>
        </tr>
    </tbody>
</table>

##URI Query Parameters

<table border=1>
    <thead>
    <th>Parameter</th>
    <th>Required?</th>
    <th>Default</th>
    <th>Description</th>
    </thead>
    <tbody>
        <tr>
            <td>mode</td>
            <td style="text-align: center; font-weight:bold">yes</td>
            <td>prevalidate-and-create</td>
            <td>Controls execution mode.<br />
            Allowed values: [ "prevalidate-only", "prevalidate-and-create", "create-only" ].<br />
            <b>NOTE: at this time only "create-only" (attempts to create the resource, with no pre-validation) is allowed.</b>
            </td>
       </tr>
    </tbody>
</table>

##Request Properties

Note: See the JSON Schema (**link TBD) for data types, format, length restrictions, etc.

<table border=1>
    <thead>
    <th>Property</th>
    <th>Required?</th>
    <th>Default</th>
    <th>Description</th>
    </thead>
    <tbody>
        <tr>
            <td>deviceName</td>
            <td style="text-align: center; font-weight:bold">yes</td>
            <td></td>
            <td>Suggested name for the new device. In the default configuration, this will be used as the device name for the underlying BroadWorks device.</td>
        </tr>
        <tr>
            <td>type</td>
            <td style="text-align: center; font-weight:bold">yes</td>
            <td></td>
            <td>Device Type  a valid Device Type in BroadWorks.</td>
        </tr>
        <tr>
            <td>protocol</td>
            <td style="text-align: center;">no</td>
            <td></td>
            <td>Protocol  a valid device protocol on BroadWorks, e.g. SIP 2.0</td>
        </tr>
         <tr>
            <td>hostname</td>
            <td style="text-align: center;">varies</td>
            <td></td>
            <td>IP address or hostname. Required if port is present.</td>
        </tr>
         <tr>
            <td>port</td>
            <td style="text-align: center;">no</td>
            <td></td>
            <td>TCP/IP Port number.</td>
        </tr>
        <tr>
            <td>outboundProxyServerNetAddress</td>
            <td style="text-align: center;">no</td>
            <td></td>
            <td>Outbound proxy server IP address or hostname.</td>
        </tr>
        <tr>
            <td>stunServerNetAddress</td>
            <td style="text-align: center;">no</td>
            <td></td>
            <td>STUN server IP address or hostname.</td>
        </tr>
        <tr>
            <td>macAddress</td>
            <td style="text-align: center;">no</td>
            <td></td>
            <td>MAC Address. Must be a valid MAC address.</td>
        </tr>
        <tr>
            <td>serialNumber</td>
            <td style="text-align: center;">no</td>
            <td></td>
            <td>Serial number.</td>
        </tr>
        <tr>
            <td>description</td>
            <td style="text-align: center;">no</td>
            <td></td>
            <td>Description of device.</td>
        </tr>
        <tr>
            <td>physicalLocation</td>
            <td style="text-align: center;">no</td>
            <td></td>
            <td>Physical geographic location of the device, used in conjunction with the Physical Location user service.</td>
        </tr>
        <tr>
            <td>transportProtocol</td>
            <td style="text-align: center;">no</td>
            <td></td>
            <td>Transport protocol. One of {'UDP'|'TCP'|'Unspecified'}.</td>
        </tr>
        <tr>
            <td>deviceCredentials</td>
            <td style="text-align: center;">no</td>
            <td></td>
            <td>
                Container for access device credentials information.<br />
                Details of the device credentials properties:
                <table border=1>
                    <thead>
                    <th>Property</th>
                    <th>Required?</th>
                    <th>Default</th>
                    <th>Description</th>
                    </thead>
                    <tbody>
                        <tr>
                            <td>enabled</td>
                            <td style="text-align: center; font-weight:bold">yes</td>
                            <td>n/a</td>
                            <td>Enable access device credentials.</td>
                        </tr>
                        <tr>
                            <td>username</td>
                            <td style="text-align: center;">varies</td>
                            <td>n/a</td>
                            <td>Access device userId. Required only when enabled is set to true.</td>
                        </tr>
                        <tr>
                            <td>password</td>
                            <td style="text-align: center;">varies</td>
                            <td>n/a</td>
                            <td>Access device password. Will be validated against device access password complexity rules. Required only when enabled is set to true.</td>
                        </tr>
                </table>
            </td>
        </tr>
        <tr>
            <td>sacGroupName</td>
            <td style="text-align: center;">no</td>
            <td></td>
            <td>
                <b>Not Implemented</b><br />
                Loki Server ID of an existing Site-level Session Admission Control group to which the new device should be added.
            </td>
        </tr>
        <tr>
            <td>customTags</td>
            <td style="text-align: center;">no</td>
            <td></td>
            <td>
                <b>Not Implemented</b><br />
                A set of custom tags (with values) to be added to the new device.
            </td>
        </tr>
        <tr>
            <td>extensions</td>
            <td style="text-align: center;">no</td>
            <td></td>
            <td>
                <b>Not Implemented</b><br />
                Container for network-element specific properties.
            </td>
        </tr>
        <tr>
            <td>extensions.broadworks</td>
            <td style="text-align: center;">no</td>
            <td></td>
            <td>
                <b>Not Implemented</b><br />
                Container for BroadWorks-specific properties.
            </td>
        </tr>
        <tr>
            <td>extensions.broadworks.mobilityManager</td>
            <td style="text-align: center;">no</td>
            <td></td>
            <td>
                <b>Not Implemented</b><br />
                Container for BroadWorks Mobility Manager propreties. Properties:
                <table border=1>
                    <thead>
                    <th>Property</th>
                    <th>Required?</th>
                    <th>Default</th>
                    <th>Description</th>
                    </thead>
                    <tbody>
                        <tr>
                            <td>provisioningURL</td>
                            <td style="text-align: center;">varies</td>
                            <td>n/a</td>
                            <td>Required if type corresponds to a BroadWorks device type where Mobility Manager Device is true..</td>
                        </tr>
                        <tr>
                            <td>provisioningUserName</td>
                            <td style="text-align: center;">varies</td>
                            <td>n/a</td>
                            <td>Required if type corresponds to a BroadWorks device type where Mobility Manager Device is true..</td>
                        </tr>
                        <tr>
                            <td>provisioningPassword</td>
                            <td style="text-align: center;">varies</td>
                            <td>n/a</td>
                            <td>Required if type corresponds to a BroadWorks device type where Mobility Manager Device is true.</td>
                        </tr>
                        <tr>
                            <td>defaultOriginatingServiceKey</td>
                            <td style="text-align: center;">varies</td>
                            <td>n/a</td>
                            <td>Not valid if type corresponds to a BroadWorks device type where Mobility Manager Device is true.</td>
                        </tr>
                        <tr>
                            <td>defaultTerminatingServiceKey</td>
                            <td style="text-align: center;">varies</td>
                            <td>n/a</td>
                            <td>Not valid if type corresponds to a BroadWorks device type where Mobility Manager Device is true.</td>
                        </tr>
                </table>
            </td>
        </tr>
    </tbody>
</table>

##Response Properties - 201 Created

Besides the properties listed in the table below, the response also contains the normal HAL _links and curies properties.
<table border=1>
    <thead>
    <th>Parameter</th>
    <th>Description</th>
    </thead>
    <tbody>
        <tr>
            <td>customerId</td>
            <td>A Loki Server ID (server-generated) of the existing Customer.</td>
       </tr>
       <tr>
            <td>siteId</td>
            <td>A Loki Server ID (server-generated) of the existing Site.</td>
       </tr>
       <tr>
            <td>deviceId</td>
            <td>
                A Loki Server ID (server-generated) of the created Site Device. The format of this is subject to change. <br />
                It is not guaranteed to match what is given as input ("deviceName") and also it is not guaranteed to match the created BroadWorks Device Name.
            </td>
       </tr>
       <tr>
            <td>extensions.broadworks.serviceProviderId</td>
            <td>The ID of the BroadWorks Service Provider/ Enterprise in which the device was created.<td>
       </tr>
       <tr>
            <td>extensions.broadworks.groupId</td>
            <td>The ID of the BroadWorks Group in which the device was created.</td>
       </tr>
        <tr>
            <td>extensions.broadworks.deviceName</td>
            <td>The BroadWorks Device Name if the created device.</td>
       </tr>
    </tbody>
</table>

POST /customers/{+customerId}/sites/{+siteId}/devices/{?mode}
{
    "deviceName": "Example Com AD3001",
    "type": "Adtran TA908",
    "protocol": "SIP 2.0",
    "hostname": "10.0.0.5",
    "port": 8080,
    "outboundProxyServerNetAddress": "proxy1.example.com",
    "stunServerNetAddress": "192.168.100.100",
    "macAddress": "AABBCC112233",
    "serialNumber": "A101-263",
    "description": "Device for Trunk 3001",
    "physicalLocation": "202 Main Street Nowhere, FR",
    "transportProtocol": "TCP",
    "deviceCredentials": {
        "enabled": true,
        "username": "4165551212",
        "password": "4D0fj$&zJ"
    },
    "sacGroupName": "Primary",
    "customTags": {
        "logo": "http://images.example.com/logo.png",
        "ntpServer": "tick.example.com"
    },
    "extensions" : {
        "broadworks" : {
            "mobilityManager" : {
                "provisioningURL" : "http://provisioning.example.com",
                "provisioningUserName" : "ExampleCom_1234",
                "provisioningPassword" : "2394SfaE",
                "defaultOriginatingServiceKey" : 42,
                "defaultTerminatingServiceKey" : 767
            }
        }
    }
}
< 201
< Content-Type: application/hal+json
< Transaction-Id: 1380080943120
< Location: http://lokiserver.apiary.io/loki/customers/ExampleCom/sites/ExampleCom/devices/Example%20Com%20AD3001
{
    "_links": {
        "self": {
            "href": "http://lokiserver.apiary.io/loki/customers/ExampleCom/sites/ExampleCom/devices/Example%20Com%20AD3001"
        }
    },
    "customerId": "ExampleCom",
    "siteId": "ExampleCom",
    "deviceId": "Example Com AD3001",
    "extensions": {
        "broadworks": {
            "deviceName": "Example Com AD3001",
            "serviceProviderId": "ExampleCom",
            "groupId": "ExampleCom"
        }
    },
    "curies": [
        {
            "name": "ls",
            "href": "http://localhost/loki/rels/{rel}",
            "templated": true
        }
    ]
}


--
VoIP Site Trunk Groups
##Collection

Supported network elements:

* BroadWorks Application Server

Keys:

* customerId
* siteId
* trunkGroupName

Extension Keys:

* (none)
--

Create a new VoIP TrunkGroup.

Rollback-enabled: No; the rollback is dependent on VoIP User Add rollback, which is not implemented.
If the trunk group add fails before the pilot user is created, the changes will be rolled back. Otherwise, no changes
will be rolled back.


##URI Query Parameters

<table border=1>
    <thead>
    <th>Parameter</th>
    <th>Required?</th>
    <th>Default</th>
    <th>Description</th>
    </thead>
    <tbody>
        <tr>
            <td>mode</td>
            <td style="text-align: center; font-weight:bold">yes</td>
            <td>prevalidate-and-create</td>
            <td>Controls execution mode.<br />
            Allowed values: [ "prevalidate-only", "prevalidate-and-create", "create-only" ].<br />
            <b>NOTE: at this time only "create-only" (attempts to create the resource, with no pre-validation) is allowed.</b>
            </td>
        </tr>
        <tr>
            <td>customerId</td>
            <td style="text-align: center; font-weight:bold">yes</td>
            <td>n/a</td>
            <td>Loki Server customerId (server-generated) of the Customer in which the new VoIP Trunk Group is to be created.
            Note this can be resolved from the BroadWorks IDs via GET /loki/sites{?extensions.broadworks.serviceProviderId,extensions.broadworks.groupId}.
            </td>
        </tr>
        <tr>
            <td>siteId</td>
            <td style="text-align: center; font-weight:bold">yes</td>
            <td>n/a</td>
            <td>Loki Server siteId (server-generated) of the Site in which the new VoIP Trunk Group is to be created.
            Note this can be resolved from the BroadWorks IDs via GET /loki/sites{?extensions.broadworks.serviceProviderId,extensions.broadworks.groupId}.
            </td>
        </tr>
    </tbody>
</table>

##Request Properties

Note: See the JSON Schema (**link TBD) for data types, format, length restrictions, etc.

<table border=1>
    <thead>
    <th>Property</th>
    <th>Required?</th>
    <th>Default</th>
    <th>Description</th>
    </thead>
    <tbody>
    <tr><td>trunkGroupName</td><td>yes</td><td></td><td>Trunk Group Name</td></tr>
    <tr><td>accessDevice</td><td>yes</td><td></td><td>Details of the Trunk Group's device. Properties:
        <table border=1>
            <thead>
            <th>Property</th>
            <th>Required?</th>
            <th>Default</th>
            <th>Description</th>
            </thead>
            <tbody>
            <tr>
                <td>deviceManagementRoutine</td>
                <td>no</td>
                <td>"existing"</td>
                <td>Allowed values: {"create", "existing"}. Use "create" to cause a new device to be created.
                    Use "existing" if the specified device already exists.</td>
            </tr>
            <tr>
                <td>level</td>
                <td>yes</td>
                <td>n/a</td>
                <td>Device level. Allowed values: {"Site"}.</td>
            </tr>
            <tr>
                <td>deviceType</td>
                <td>no</td>
                <td>n/a</td>
                <td>Device type.
                    Required when deviceManagementRoutine is "create".
                    Required to be a valid Device Type defined in the BroadWorks system (not validated).</td>
            </tr>
            <tr>
                <td>deviceName</td>
                <td>yes</td>
                <td>n/a</td>
                <td>Device name.</td>
            </tr>
            <tr>
                <td>hostname</td>
                <td>no</td>
                <td>n/a</td>
                <td>Device IP address or hostname</td>
            </tr>
        </table>
    </td></tr>
    <tr><td>pilotUser</td><td>yes</td><td></td><td>Required to contain the properties of a POST /loki/users request with the exception of the following properties: accessDevice, trunkGroup and userType which are disallowed in this request.
    </td></tr>
    <tr><td>department</td><td>no</td><td></td><td>Department name (only Site-level departments are supported, initially).</td></tr>
    <tr><td>capacityManagement</td><td>yes</td><td></td><td>Capacity Management settings</td></tr>
    <tr><td>capacityManagement. maxActiveCalls</td><td>yes</td><td></td><td>Maximum Active Calls settings</td></tr>
    <tr><td>capacityManagement. maxActiveCalls. total</td><td>yes</td><td></td><td>Maximum Active Calls / Total Calls</td></tr>
    <tr><td>capacityManagement. maxActiveCalls. incoming</td><td>no</td><td></td><td>Maximum Active Calls / Incoming Calls</td></tr>
    <tr><td>capacityManagement. maxActiveCalls. outgoing</td><td>no</td><td></td><td>Maximum Active Calls / Outgoing Calls</td></tr>
    <tr><td>capacityManagement. burstingMaxActiveCalls</td><td>yes</td><td></td><td>Bursting Maximum Active Calls settings</td></tr>
    <tr><td>capacityManagement. burstingMaxActiveCalls. enabled</td><td>yes</td><td></td><td>Bursting Capacity on/off</td></tr>
    <tr><td>capacityManagement. burstingMaxActiveCalls. total</td><td>(see notes)</td><td></td><td>Bursting Maximum Active Calls / Total Calls. Required if "capacityManagement. burstingMaxActiveCalls. enabled" is true.</td></tr>
    <tr><td>capacityManagement. burstingMaxActiveCalls. incoming</td><td>no</td><td></td><td>Bursting Maximum Active Calls / Incoming Calls</td></tr>
    <tr><td>capacityManagement. burstingMaxActiveCalls. outgoing</td><td>no</td><td></td><td>Bursting Maximum Active Calls / Outgoing Calls</td></tr>
    <tr><td>capacityManagement. incomingCapacityExceeded</td><td>yes</td><td></td><td>Incoming Capacity Exceeded settings</td></tr>
    <tr><td>capacityManagement. incomingCapacityExceeded. action</td><td>no</td><td></td><td>Incoming Capacity Exceeded Action  one of {'Forward'|'Reroute'}</td></tr>
    <tr><td>capacityManagement. incomingCapacityExceeded. forwardAddress</td><td>(see notes)</td><td></td><td>Forward to Phone Number / SIP-URI.
        Must be a valid phone number or SIP URI.
        Required if "capacityManagement. incomingCapacityExceeded. action" is "Forward".
    </td></tr>
    <tr><td>capacityManagement. incomingCapacityExceeded. rerouteTrunkGroup</td><td>(see notes)</td><td></td><td>Details of target VoIP Trunk Group.
        Required if "capacityManagement. incomingCapacityExceeded. action" is "Reroute".</td></tr>
    <tr><td>capacityManagement. incomingCapacityExceeded. rerouteTrunkGroup. siteId</td><td>(see notes)</td><td></td><td>siteId of Site containing the reroute target VoIP Trunk Group.
        Required if "capacityManagement. incomingCapacityExceeded. action" is "Reroute".</td></tr>
    <tr><td>capacityManagement. incomingCapacityExceeded. rerouteTrunkGroup. trunkGroupName</td><td>(see notes)</td><td></td><td>Name of the reroute target VoIP Trunk Group.
        Required if "capacityManagement. incomingCapacityExceeded. action" is "Reroute".</td></tr>
    <tr><td>capacityManagement. incomingCapacityExceeded. initialCalls</td><td>yes</td><td></td><td>Capacity Exceeded Initial Value</td></tr>
    <tr><td>capacityManagement. incomingCapacityExceeded. offsetCalls</td><td>yes</td><td></td><td>Capacity Exceeded Offset Value</td></tr>
    <tr><td>unreachableDestination</td><td>yes</td><td></td><td>Unreachable Destination settings</td></tr>
    <tr><td>unreachableDestination. timeout</td><td>yes</td><td></td><td>Unreachable Destination Timeout (seconds)</td></tr>
    <tr><td>unreachableDestination. action</td><td>no</td><td></td><td>Unreachable Destination Action  one of {'Forward'|'Reroute'}</td></tr>
    <tr><td>unreachableDestination. forwardAddress</td><td>(see notes)</td><td></td><td>Forward to Phone Number / SIP-URI.
        Must be a valid phone number or SIP URI.
        Required if "unreachableDestination. action" is "Forward".
    </td></tr>
    <tr><td>unreachableDestination. rerouteTrunkGroup</td><td>(see notes)</td><td></td><td>Details of target VoIP Trunk Group.
        Required if "unreachableDestination. action" is "Reroute".</td></tr>
    <tr><td>unreachableDestination. rerouteTrunkGroup. siteId</td><td>(see notes)</td><td></td><td>siteId of Site containing the reroute target VoIP Trunk Group.
        Required if "unreachableDestination. action" is "Reroute".</td></tr>
    <tr><td>unreachableDestination. rerouteTrunkGroup. trunkGroupName</td><td>(see notes)</td><td></td><td>Name of the reroute target VoIP Trunk Group.
        Required if "unreachableDestination. action" is "Reroute".</td></tr>
    <tr><td>authentication</td><td>yes</td><td></td><td>SIP authentication settings</td></tr>
    <tr><td>authentication. enabled</td><td>yes</td><td></td><td>Enable Authentication</td></tr>
    <tr><td>authentication. username</td><td>(see notes)</td><td></td><td>Authentication User Name. Required if "authentication. enabled" is true.</td></tr>
    <tr><td>authentication. password</td><td>(see notes)</td><td></td><td>Authentication password. Required if "authentication. enabled" is true.<br />
    If present, the password will be validated against the sipPassword rules configured in the server.
    </td></tr>
    <tr><td>hostedUsers</td><td>no</td><td></td><td>Not implemented  will be ignored if present in request.</td></tr>
    <tr><td>identity</td><td>yes</td><td></td><td>Identity settings</td></tr>
    <tr><td>identity. trunkGroupIdentity</td><td>yes</td><td></td><td>Trunk Group Identity settings</td></tr>
    <tr><td>identity. trunkGroupIdentity. identity</td><td>no</td><td></td><td>Trunk Group Identity, including @domain. Required to be a valid SIP URI.</td></tr>
    <tr><td>identity. trunkGroupIdentity. allowTerminationToTrunkGroupIdentity</td><td>yes</td><td></td><td>Allow calls directly to trunk group with Trunk Identity</td></tr>
    <tr><td>identity. trunkGroupIdentity. includeTrunkGroupIdentity</td><td>yes</td><td></td><td>Include Trunk Identity for Calls to Trunk Group</td></tr>
    <tr><td>identity. trunkGroupIdentity. includeTrunkGroupIdentityForNetworkCalls</td><td>yes</td><td></td><td>Include Trunk Identity for Calls from Trunk Group</td></tr>
    <tr><td>identity. otgDtgIdentity</td><td>yes</td><td></td><td>OTG/DTG Identity settings</td></tr>
    <tr><td>identity. otgDtgIdentity. identity</td><td>no</td><td></td><td>OTG/DTG Identity</td></tr>
    <tr><td>identity. otgDtgIdentity. allowTerminationToDtgIdentity</td><td>yes</td><td></td><td>Allow calls directly to trunk group with DTG Identity</td></tr>
    <tr><td>identity. otgDtgIdentity. includeDtgIdentity</td><td>yes</td><td></td><td>Include DTG Identity for Calls to Trunk Group</td></tr>
    <tr><td>identity. otgDtgIdentity. includeOtgIdentityForNetworkCalls</td><td>yes</td><td></td><td>Include OTG Identity for Calls from Trunk Group</td></tr>
    <tr><td>identity. enableNetworkAddressIdentity</td><td>yes</td><td></td><td>Enable Network Address Identity</td></tr>
    <tr><td>allowUnscreenedCalls</td><td>yes</td><td></td><td>Allow Unscreened Calls</td></tr>
    <tr><td>allowUnscreenedEmergencyCalls</td><td>yes</td><td></td><td>Allow Unscreened Emergency Calls</td></tr>
    <tr><td>pilotUserCallingLineIdentityPolicy</td><td>yes</td><td></td><td>Pilot User Calling Line Asserted Identity Usage Policy  one of {'All Originating Calls'|'Unscreened Originating Calls'|'No Calls'}</td></tr>
    <tr><td>pilotUserChargeNumberPolicy</td><td>yes</td><td></td><td>Pilot User Charge Number Usage Policy  one of {'All Originating Calls'|'Unscreened Originating Calls'|'No Calls'}</td></tr>
    <tr><td>callForwardingAlways</td><td>no</td><td></td><td>Call Forwarding Always settings</td></tr>
    <tr><td>callForwardingAlways. action</td><td>no</td><td></td><td>Call Forwarding Always Action  one of {'Forward'|'Reroute'}</td></tr>
    <tr><td>callForwardingAlways. forwardAddress</td><td>(see notes)</td><td></td><td>Forward to Phone Number / SIP-URI.
        Must be a valid phone number or SIP URI.
        Required if "callForwardingAlways. action" is "Forward".
    </td></tr>
    <tr><td>callForwardingAlways. rerouteTrunkGroup</td><td>(see notes)</td><td></td><td>Details of target VoIP Trunk Group. Required if "callForwardingAlways. action" is "Reroute".</td></tr>
    <tr><td>callForwardingAlways. rerouteTrunkGroup. siteId</td><td>(see notes)</td><td></td><td>siteId of Site containing the reroute target VoIP Trunk Group. Required if "callForwardingAlways. action" is "Reroute".</td></tr>
    <tr><td>callForwardingAlways. rerouteTrunkGroup. trunkGroupName</td><td>(see notes)</td><td></td><td>Name of the reroute target VoIP Trunk Group. Required if "callForwardingAlways. action" is "Reroute".</td></tr>
    <tr><td>peeringDomain</td><td>yes</td><td></td><td>Peering Domain settings</td></tr>
    <tr><td>peeringDomain. domainName</td><td>no</td><td></td><td>Peering Domain</td></tr>
    <tr><td>peeringDomain. routeToPeeringDomain</td><td>yes</td><td></td><td>Route To Peering Domain</td></tr>
    <tr><td>trunkGroupPrefix</td><td>yes</td><td></td><td>Trunk Group Prefix settings</td></tr>
    <tr><td>trunkGroupPrefix. enabled</td><td>yes</td><td></td><td>Enable Trunk Group Prefix.</td></tr>
    <tr><td>trunkGroupPrefix. prefix</td><td>(see notes)</td><td></td><td>Trunk Group Prefix. Required when "trunkGroupPrefix. enabled" is true.</td></tr>
    <tr><td>advancedReroute</td><td>yes</td><td></td><td>Stateful Trunk Group Rerouting settings</td></tr>
    <tr><td>advancedReroute. enabled</td><td>yes</td><td></td><td>Enable Stateful Trunk Group Rerouting</td></tr>
    <tr><td>advancedReroute. sendContinuousOptionsMessage</td><td>yes</td><td></td><td>Send Continuous Options Message</td></tr>
    <tr><td>advancedReroute. continuousOptionsSendingInterval</td><td>yes</td><td></td><td>Send Continuous Options Message Every (seconds)</td></tr>
    <tr><td>advancedReroute. failureOptionsSendingInterval</td><td>yes</td><td></td><td>Send Failure Options Message Every (seconds)</td></tr>
    <tr><td>advancedReroute. failureThresholdCounter</td><td>yes</td><td></td><td>Failure Threshold Counter</td></tr>
    <tr><td>advancedReroute. successThresholdCounter</td><td>yes</td><td></td><td>Success Threshold Counter</td></tr>
    <tr><td>advancedReroute. inviteFailureThresholdCounter</td><td>yes</td><td></td><td>Invite Failure Threshold Counter</td></tr>
    <tr><td>advancedReroute. inviteFailureThresholdWindow</td><td>yes</td><td></td><td>Invite Failure Threshold Window</td></tr>
    <tr><td>pilotUserCallingLineAssertedIdentityPolicy</td><td>yes</td><td></td><td>Pilot User Calling Line Asserted Identity Policy settings</td></tr>
    <tr><td>pilotUserCallingLineAssertedIdentityPolicy. useTrunkGroupCallingLineAssertedIdentityPolicy</td><td>yes</td><td></td><td>If true, use Trunk Group's Pilot User Calling Line Asserted Identity Policy. Otherwise, use the Customer's policy.</td></tr>
    <tr><td>pilotUserCallingLineAssertedIdentityPolicy.  callingLineAssertedIdentityPolicy</td><td>yes</td><td></td><td>Use this Trunk Group Policy  one of {'All Originating Calls'|'Unscreened Originating Calls'}</td></tr>
    </tbody>
</table>
POST /customers/{+customerId}/sites/{+siteId}/trunk-groups{?mode}
{
    "trunkGroupName": "ExampleCom Trunk 3001",
    "department": "Sales",
    "accessDevice": {
        "deviceManagementRoutine": "create",
        "level": "Site",
        "deviceType": "AudioCodes MP-102",
        "deviceName": "ExampleCom_AD3001",
        "hostname": "192.168.0.2"
    },
    "capacityManagement": {
        "maxActiveCalls": {
            "total": 10,
            "incoming": 4,
            "outgoing": 3
        },
        "burstingMaxActiveCalls": {
            "enabled": false,
            "total": 12,
            "incoming": 7,
            "outgoing": 9
        },
        "incomingCapacityExceeded": {
            "action": "Forward",
            "forwardAddress": "3015551212",
            "rerouteTrunkGroup": {
                "siteId": "ExampleCom",
                "trunkGroupName": "ExampleCom Trunk 1212"
            },
            "initialCalls": 2,
            "offsetCalls": 3
        }
    },
    "unreachableDestination": {
        "timeout": 10,
        "action": "Reroute",
        "forwardAddress": "3015551212",
        "rerouteTrunkGroup": {
            "siteId": "ExampleCom",
            "trunkGroupName": "ExampleCom Trunk 1212"
        }
    },
    "authentication": {
        "enabled": true,
        "username": "2405553001@example.com",
        "password": "230A4u$#%f"
    },
    "identity": {
        "trunkGroupIdentity": {
            "identity": "2405553001@example.com",
            "allowTerminationToTrunkGroupIdentity": false,
            "includeTrunkGroupIdentity": false,
            "includeTrunkGroupIdentityForNetworkCalls": false
        },
        "otgDtgIdentity": {
            "identity": "2405553001",
            "allowTerminationToDtgIdentity": false,
            "includeDtgIdentity": false,
            "includeOtgIdentityForNetworkCalls": false
        },
        "enableNetworkAddressIdentity": false
    },
    "allowUnscreenedCalls": true,
    "allowUnscreenedEmergencyCalls": false,
    "pilotUserCallingLineIdentityPolicy": "No Calls",
    "pilotUserChargeNumberPolicy": "No Calls",
    "callForwardingAlways": {
        "action": "Forward",
        "forwardAddress": "3015551212",
        "rerouteTrunkGroup": {
            "siteId": "ExampleCom",
            "trunkGroupName": "ExampleCom Trunk 1212"
        }
    },
    "peeringDomain": {
        "domainName": "example.com",
        "routeToPeeringDomain": false
    },
    "trunkGroupPrefix": {
        "enabled": false,
        "prefix": "1234"
    },
    "advancedReroute": {
        "enabled": false,
        "sendContinuousOptionsMessage": false,
        "continuousOptionsSendingInterval": 30,
        "failureOptionsSendingInterval": 10,
        "failureThresholdCounter": 1,
        "successThresholdCounter": 1,
        "inviteFailureThresholdCounter": 1,
        "inviteFailureThresholdWindow": 30
    },
    "pilotUserCallingLineAssertedIdentityPolicy": {
        "useTrunkGroupCallingLineAssertedIdentityPolicy": false,
        "callingLineAssertedIdentityPolicy": "Unscreened Originating Calls"
    },
    "pilotUser": {
        "userId": "2405553001@example.com",
        "phoneNumber": "+1-2405553001",
        "tnRoutine": "auto",
        "CLID": "+1-2405553001",
        "extension": "3001",
        "lastName": "Smith",
        "firstName": "John",
        "callingLineIdLastName": "Smith",
        "callingLineIdFirstName": "John",
        "email": "jsmith@example.com",
        "timeZone": "America/New_York",
        "language": "English",
        "servicePacks": {
            "base": "Standard",
            "add-on": [
                "Executive"
            ]
        },
        "role": "Executive",
        "services": {
            "Authentication": {
                "username": "2405553001@example.com",
                "password": "230A4u$#%f"
            },
            "Charge Number": {
                "phoneNumber": "+1-2405553001",
                "tnRoutine": "",
                "useChargeNumberForEnhancedTranslations": false,
                "sendChargeNumberToNetwork": true
            },
            "Third-Party Voice Mail Support": {
                "isActive": true,
                "busyRedirectToVoiceMail": true,
                "noAnswerRedirectToVoiceMail": true,
                "serverSelection": "User Specific Mail Server",
                "userServer": "3015557000",
                "noAnswerNumberOfRings": 4,
                "alwaysRedirectToVoiceMail": false,
                "outOfPrimaryZoneRedirectToVoiceMail": false
            },
            "Call Forwarding No Answer": {
                "isActive": true,
                "forwardToPhoneNumber": "+1-2405553101",
                "numberOfRings": 4
            },
            "Call Forwarding Not Reachable": {
                "isActive": true,
                "forwardToPhoneNumber": "+1-2405553101"
            }
        }
    }
}
< 201
< Content-Type: application/hal+json
< Transaction-Id: 1380080943120
< Location: http://lokiserver.apiary.io/loki/customers/ExampleCom/sites/ExampleCom/trunk-groups/ExampleCom%20Trunk%203001
{
    "_links": {
        "self": {
            "href": "http://lokiserver.apiary.io/loki/customers/ExampleCom/sites/ExampleCom/trunk-groups/ExampleCom%20Trunk%203001"
        }
    },
    "_embedded": {
        "ls:pilot-users": [
            {
                "_links": {
                    "self": {
                        "href": "http://lokiserver.apiary.io/loki/users/2405553001%40example.com"
                    }
                },
                "phoneNumber": "+1-2405553001",
                "extension": "3001",
                "CLID": "+1-2405553001",
                "email": "jsmith@example.com",
                "userId": "2405553001@example.com",
                "portalPassword": "DkztwCAp",
                "firstName": "John",
                "lastName": "Smith",
                "callingLineIdLastName": "Smith",
                "callingLineIdFirstName": "John",
                "language": "English",
                "timeZone": "America/New_York",
                "services": {
                    "Authentication": {
                        "username": "2405553001@example.com",
                        "password": "230A4u$#%f"
                    },
                    "Charge Number": {
                        "phoneNumber": "+1-2405553001",
                        "tnRoutine": "",
                        "useChargeNumberForEnhancedTranslations": false,
                        "sendChargeNumberToNetwork": true
                    },
                    "Third-Party Voice Mail Support": {
                        "isActive": true,
                        "busyRedirectToVoiceMail": true,
                        "noAnswerRedirectToVoiceMail": true,
                        "serverSelection": "User Specific Mail Server",
                        "userServer": "3012297000",
                        "noAnswerNumberOfRings": 4,
                        "alwaysRedirectToVoiceMail": false,
                        "outOfPrimaryZoneRedirectToVoiceMail": false,
                        "mailboxIdType": "User Or Group Phone Number",
                        "mailboxURL": null
                    },
                    "Call Forwarding No Answer": {
                        "isActive": true,
                        "forwardToPhoneNumber": "+1-2405553101",
                        "numberOfRings": 4
                    },
                    "Call Forwarding Not Reachable": {
                        "isActive": true,
                        "forwardToPhoneNumber": "+1-2405553101"
                    }
                },
                "customerId": "ExampleCom",
                "siteId": "ExampleCom",
                "curies": [
                    {
                        "name": "ls",
                        "href": "http://lokiserver.apiary.io/loki/rels/{rel}",
                        "templated": true
                    }
                ]
            }
        ]
    },
    "customerId": "ExampleCom",
    "siteId": "ExampleCom",
    "trunkGroupName": "ExampleCom Trunk 3001",
    "curies": [
        {
            "name": "ls",
            "href": "http://lokiserver.apiary.io/loki/rels/{rel}",
            "templated": true
        }
    ]
}


--
VoIP Users
##Collection

Supported network elements:

* BroadWorks Application Server

Keys:

* userId

Extension Keys:

* (none)
--

Create a new VoIP User.

There are two ways to create a User in LWS-REST:<br />
1) Default/Legacy - through LWS-REST BroadWorks Entity and Utility services<br />
Rollback-enabled: No

2) Alternative - through LWS-SOAP<br />
Process name: Create User via LWS-SOAP (VoIP Entity)<br />
Rollback-enabled: Yes.

##URI Query Parameters

<table border=1>
    <thead>
    <th>Parameter</th>
    <th>Required?</th>
    <th>Default</th>
    <th>Description</th>
    </thead>
    <tbody>
        <tr>
            <td>mode</td>
            <td style="text-align: center; font-weight:bold">yes</td>
            <td>prevalidate-and-create</td>
            <td>Controls execution mode.<br />
            Allowed values: [ "prevalidate-only", "prevalidate-and-create", "create-only" ].<br />
            <b>NOTE: at this time only "create-only" (attempts to create the resource, with no pre-validation) is allowed.</b>
            </td>
        </tr>
    </tbody>
</table>

##Request Properties

Note: See the JSON Schema (**link TBD) for data types, format, length restrictions, etc.

<table border=1>
    <thead>
    <th>Property</th>
    <th>Required?</th>
    <th>Default</th>
    <th>Description</th>
    </thead>
    <tbody>
        <tr>
            <td>customerId</td>
            <td style="text-align: center; font-weight:bold">no</td>
            <td></td>
            <td>Loki Server customerId (server-generated) of the Customer in which the new VoIP User is to be created.
            In a default configuration (where a VoIP User is composed of BroadWorks entities only),
            this property can be omitted if extensions.broadworks.serviceProviderId is populated.</td>
        </tr>
        <tr>
            <td>siteId</td>
            <td style="text-align: center; font-weight:bold">no</td>
            <td></td>
            <td>Loki Server siteId (server-generated) of the Site in which the new VoIP User is to be created.
            In a default configuration (where a VoIP User is composed of BroadWorks entities only),
            this property can be omitted if extensions.broadworks.groupId is populated.</td>
        </tr>
        <tr>
            <td>userId</td>
            <td style="text-align: center; font-weight:bold">no</td>
            <td>(varies)</td>
            <td>Full UserID, including @domain. Will be constructed as [phoneNumber]@[Site default domain] if not provided.<br />
            Note that in BroadWorks, if the domain matches the BroadWorks system default domain, the BroadWorks
            userId will not contain an @domain portion. In the Loki Server API, the userId will always include
            @domain.</td>
        </tr>
        <tr>
            <td>department</td>
            <td style="text-align: center; font-weight:bold">no</td>
            <td></td>
            <td>User department.<br />
            The following table describes the differences in validation between the two ways of adding a User in LWS-REST:
            <table border=1>
                <thead>
                    <th>Default/Legacy</th>
                    <th>Alternative</th>
                </thead>
                <tbody>
                <tr>
                    <td><b>Not Implemented</b></td>
                    <td>Supported</td>
                </tr>
                <tbody>
            </table>
            </td>
        </tr>
        <tr>
            <td>userType</td>
            <td style="text-align: center; font-weight:bold">yes</td>
            <td></td>
            <td>Identifies the user type, which is one of trunking, "ATA", businessLine, hostedPbx, systemDevice, noDevice.<br />
            The following table describes the differences in validation between the two ways of adding a User in LWS-REST:
            <table border=1>
                <thead>
                    <th>Default/Legacy</th>
                    <th>Alternative</th>
                </thead>
                <tbody>
                <tr>
                    <td>Initially only trunking and businessLine are supported, and other values will result in an 501 NOT_IMPLEMENTED error.</td>
                    <td>All values are supported with the exception of systemDevice value, which will result in a 501 NOT_IMPLEMENTED error.</td>
                </tr>
                <tbody>
            </table>
            </td>
        </tr>
        <tr>
            <td>accessDevice</td>
            <td style="text-align: center; font-weight:bold">(varies)</td>
            <td></td>
            <td>Required when userType is businessLine or "hostedPbx" (ignored otherwise).
                <table border=1>
                <thead>
                    <th>Property</th>
                    <th>Required?</th>
                    <th>Default</th>
                    <th>Notes</th>
                </thead>
                <tbody>
                <tr>
                    <td>deviceManagementRoutine</td>
                    <td style="text-align: center; font-weight:bold">(varies)</td>
                    <td>existing</td>
                    <td>
                         Device adding routine.<br />
                         <i>Note: This property applies only for userType ATA, otherwise it is ignored.</i>
                         <table border=1>
                            <thead>
                                <th>Default/Legacy</th>
                                <th>Alternative</th>
                            </thead>
                            <tbody>
                            <tr>
                                <td>It is ignored.</td>
                                <td>Supported.</td>
                            </tr>
                            <tbody>
                        </table>
                    </td>
                </tr>
                <tr>
                    <td>name</td>
                    <td style="text-align: center; font-weight:bold">(varies)</td>
                    <td></td>
                    <td>Access device name.<br />
                    When userType is businessLine this property is required and must contain the name of an existing Site-level device (group-level device in BroadWorks).<br />
                    When userType is "ATA" and accessDevice.deviceManagementRoutine has "existing" value (or it is omitted) this property is required and must match an existing Site-level device (group-level device in BroadWorks).<br />
                    When userType is hostedPbx, if present this property must be a valid deviceName that doesn't match an existing device in BroadWorks.<br />
                    If this property is omitted, it will be auto generated in the following cases:<br /> 
                    	userType is hostedPbx<br /> 
                    	userType is ATA and accessDevice. deviceManagementRoutine is create
                    </td>
                </tr>
                <tr>
                    <td>type</td>
                    <td style="text-align: center; font-weight:bold">(varies)</td>
                    <td></td>
                    <td>
                        Access device type.<br />
                        This property is required when userType is hostedPbx or userType is "ATA" and accessDevice.deviceManagementRoutine is create.<br />
                        <i>Applicable only for userType hostedPbx and ATA, otherwise it is ignored.</i>
                        </td>
                </tr>
                <tr>
                    <td>model</td>
                    <td style="text-align: center; font-weight:bold">no</td>
                    <td></td>
                    <td>
                        Device Model<br />
                        <i>Applicable only for userType hostedPbx, otherwise it is ignored.</i>
                    </td>
                </tr>
                <tr>
                    <td>macAddress</td>
                    <td style="text-align: center; font-weight:bold">no</td>
                    <td></td>
                    <td>
                        MAC address of the device.<br />
                        This property is required when userType is hostedPbx or userType is "ATA" and accessDevice.deviceManagementRoutine is create.<br />
                        <i>Applicable only for userType hostedPbx and ATA, otherwise it is ignored.</i>
                    </td>
                </tr>
                <tr>
                    <td>linePort</td>
                    <td style="text-align: center; font-weight:bold">no</td>
                    <td></td>
                    <td>
                        LinePort of the user using the device.<br />
                        If omitted, it will be auto-generated for userType hostedPbx, buinessLine or ATA.<br />
                        <i>Applicable only for userType hostedPbx and ATA, otherwise it is ignored.</i>
                    </td>
                </tr>
                <tbody>
                </table>
            </td>
        </tr>
        <tr>
            <td>trunkGroup</td>
            <td style="text-align: center">no</td>
            <td></td>
            <td>Ignored when userType is not trunking.<br />
                Note that if this entire object is omitted, the user will be created as a trunking user with no assigned trunk group. For the underlying BroadWorks user,
                omitting this property corresponds to selecting device choice Trunking but leaving the Trunking settings blank or None, on the User > Profile > Addresses page in the CommPortal.<br />
                Note that at this time, the Loki Server does not manage the Alternate Trunk Identity or Enterprise Trunk settings in the Trunking section of that page.
                <table border=1>
                <thead>
                    <th>Property</th>
                    <th>Required?</th>
                    <th>Default</th>
                    <th>Notes</th>
                </thead>
                <tbody>
                <tr>
                    <td>name</td>
                    <td style="text-align: center; font-weight:bold">no</td>
                    <td></td>
                    <td>If present, must contain the name of an existing VoIP Trunk Group in the Site (trunk group in the BroadWorks group).<br />
                        If omitted (when userType is trunking), the trunking user will be created with no assigned trunk group. For the underlying BroadWorks user,
                        omitting this property corresponds to selecting device choice Trunking but leaving the Trunking / Trunk Group set to None, on the User > Profile > Addresses page in the CommPortal.</td>
                </tr>
                <tr>
                    <td>linePort</td>
                    <td style="text-align: center; font-weight:bold">no</td>
                    <td></td>
                    <td>The following table describes the differences in validation between the two ways of adding a User in LWS-REST:
                    <table border=1>
                        <thead>
                            <th>Default/Legacy</th>
                            <th>Alternative</th>
                        </thead>
                        <tbody>
                        <tr>
                            <td>Ignored.</td>
                            <td>Supported.</td>
                        </tr>
                        <tbody>
                    </table>
                    </td>
                </tr>
                <tbody>
                </table>
            </td>
        </tr>
        <tr>
            <td>phoneNumber</td>
            <td style="text-align: center">(varies)</td>
            <td></td>
            <td>Phone Number.<br />Will be assigned on Customer and/or Group if necessary.<br />
            Must be E.164 formatted, e.g. +1-2005553001 (the dash is required, after the country code).<br />
            A value is required for certain TN routines; see documentation for tnRoutine for details.<br />
        </tr>
        <tr>
            <td>tnRoutine</td>
            <td style="text-align: center; font-weight:bold">no</td>
            <td></td>
            <td>Phone Number (TN) assignment routine.<br />
            Supported values and impact on other required properties:
            <table border=1>
            <thead>
                <th>tnRoutine</th>
            <th>phoneNumber Required?</th>
                <th>extension Required?</th>
                <th>Description</th>
            </thead>
            <tbody>
            <tr>
                <td><b>""</b>(empty string)</td>
                <td style="text-align: center; font-weight:bold">yes</td>
                <td style="text-align: center; font-weight:bold">no</td>
                <td>TN must already be available for use; no assignment will be performed.</td>
            </tr>
            <tr>
                <td><b>port-no-temp</b></td>
                <td style="text-align: center; font-weight:bold">yes</td>
                <td style="text-align: center; font-weight:bold">no</td>
                <td>TN does not exist in the system, and will be assigned automatically at both the Customer and Site levels.</td>
            </tr>
            <tr>
                <td><b>auto</b></td>
                <td style="text-align: center; font-weight:bold">yes</td>
                <td style="text-align: center; font-weight:bold">no</td>
                <td>TN may or may not already exist in the system, and will be assigned automatically only as needed.<br />
                The following table describes the differences in validation between the two ways of adding a User in LWS-REST:
                <table border=1>
                    <thead>
                        <th>Default/Legacy</th>
                        <th>Alternative</th>
                    </thead>
                    <tbody>
                    <tr>
                        <td>Supported.</td>
                        <td><b>Not Implemented</b></td>
                    </tr>
                    <tbody>
                </table></td>
            </tr>
            <tr>
                <td></td>
                <td style="text-align: center; font-weight:bold">yes</td>
                <td style="text-align: center; font-weight:bold">no</td>
                <td>(default when tnRoutine is empty or omitted)<br />
                TN must already be available for use; no assignment will be performed.</td>
            </tr>
            <tr>
                <td><b>no-number</b></td>
                <td style="text-align: center; font-weight:bold">no</td>
                <td style="text-align: center; font-weight:bold">yes</td>
                <td>User will have no TN (extension-only user); phoneNumber must <i>not</i> be present.</td>
            </tr>
            <tbody>
            </table>
        </tr>
        <tr>
            <td>extension</td>
            <td style="text-align: center">(varies)</td>
            <td>(varies)</td>
            <td>Extension. Will be autopopulated if omitted, taking digits off the end of the phone number. The number of
            digits used is equal to the group's default extension length as configured in BroadWorks.<br />
            Set to <code>null</code> to create a VoIP User with no extension (note that some Loki Server systems may be configured
            to disallow empty extensions).<br />
            A value is required for certain TN routines; see documentation for tnRoutine for details.<br /></td>
        </tr>
        <tr>
            <td>CLID</td>
            <td style="text-align: center; font-weight:bold">no</td>
            <td>(varies)</td>
            <td>Calling Line ID Phone Number.<br />Must match phoneNumber or be otherwise available for assignment as a CLID TN.<br />
            Must be E.164 formatted, e.g. +1-2005553001 (the dash is required, after the country code).<br />
            If omitted, phoneNumber will be used.</td>
        </tr>
        <tr>
            <td>lastName</td>
            <td style="text-align: center;">(varies)</td>
            <td>(varies)</td>
            <td>Last Name. <br />
            The following table describes the differences in validation between the two ways of adding a User in LWS-REST:
            <table border=1>
                <thead>
                    <th>Default/Legacy</th>
                    <th>Alternative</th>
                </thead>
                <tbody>
                <tr>
                    <td>Not required.<br /> 
                    If omitted, will be autopopulated with the 4th through the last digits of phoneNumber, after stripping the country code.</td>
                    <td>Required</td>
                </tr>
                <tbody>
            </table>
            </td>
        </tr>
        <tr>
            <td>firstName</td>
            <td style="text-align: center; ">(varies)</td>
            <td>(varies)</td>
            <td>First Name. <br />
            The following table describes the differences in validation between the two ways of adding a User in LWS-REST:
            <table border=1>
                <thead>
                    <th>Default/Legacy</th>
                    <th>Alternative</th>
                </thead>
                <tbody>
                <tr>
                    <td>Not required.<br /> 
                    If omitted, will be autopopulated with the 1st 3 digits of phoneNumber, after stripping the country code.</td>
                    <td>Required</td>
                </tr>
                <tbody>
            </table>
            </td>
        </tr>
        <tr>
            <td>callingLineIdLastName</td>
            <td style="text-align: center; font-weight:bold">no</td>
            <td>(varies)</td>
            <td>Calling Line ID Last Name. If omitted, will be autopopulated with lastName, with disallowed characters (percent, plus, backslash, double-quote, and extended ASCII characters (>= ASCII 128)) stripped as needed).</td>
        </tr>
        <tr>
            <td>callingLineIdFirstName</td>
            <td style="text-align: center; font-weight:bold">no</td>
            <td>(varies)</td>
            <td>Calling Line ID First Name. If omitted, will be autopopulated with firstName, with disallowed characters (percent, plus, backslash, double-quote, and extended ASCII characters (>= ASCII 128)) stripped as needed).</td>
        </tr>
        <tr>
            <td>email</td>
            <td style="text-align: center; font-weight:bold">no</td>
            <td></td>
            <td>E-Mail address</td>
        </tr>
        <tr>
            <td>timeZone</td>
            <td style="text-align: center; font-weight:bold">no</td>
            <td>Site's time zone</td>
            <td>Time Zone expressed as a Zone Name from the
            <a href="https://www.iana.org/time-zones">IANA Time Zone Database</a>, e.g. "America/New_York".<br />
            If omitted, the Site's time zone will be use=d.</td>
        </tr>
        <tr>
            <td>language</td>
            <td style="text-align: center; font-weight:bold">no</td>
            <td>Network element's default time zone</td>
            <td>Language<br />
            If omitted, the network element's default language (e.g. the BroadWorks system language) will be use=d.</td>
        </tr>
        <tr>
            <td>servicePacks.base</td>
            <td style="text-align: center; font-weight:bold">no</td>
            <td></td>
            <td>The name of the base service pack to be assigned to the user.</b></td>
        </tr>
        <tr>
            <td>servicePacks.add-on</td>
            <td style="text-align: center; font-weight:bold">no</td>
            <td></td>
            <td>List of names of additional service packs to be assigned to the new VoIP User.
            </td>
        </tr>
        <tr>
            <td style="font-style:italic">role</td>
            <td style="text-align: center; font-weight:bold">no</td>
            <td></td>
            <td style="font-style:italic">Not Implemented (reserved for future use). This property will be ignored if present in a request.</td>
        </tr>
        <tr>
            <td>services</td>
            <td style="text-align: center; font-weight:bold">no</td>
            <td></td>
	        <td>The set of services to assign to the new VoIP User, with optional pre-configuration
	        settings for some services.<br />
	        Each service name must match a valid (assignable) user service on the network element. Each
	        service will be assigned to the user a la carte.  If there are global default settings (defined
	        in the configuration) for any assigned service, these will be applied.<br />
        	If the service supports configuration, configuration settings can be provided, and these will
        	override any globally configured defaults for that service. The services that support
        	configuration, and the supported settings for each, are detailed later in this table.<br />
	        To assign a service without doing any configuration, set the value to an empty object, e.g.
	        <code>"services" : { "Remote Office" : { } }</code>.<br />
            </td>
        </tr>
        <tr>
            <td>services.'Authentication'.*</td>
            <td style="text-align: center; font-weight:bold">no</td>
            <td></td>
            <td>Configuration settings for the Authentication user service. The table below describes the supported settings.
            <i>Note: the default values can be overridden by the server configuration, and may not match the values shown below.</i>
            <table border=1>
            <thead>
                <th>Property</th>
                <th>Required?</th>
                <th>Default</th>
                <th>Notes</th>
            </thead>
            <tbody>
            <tr>
                <td>username</td>
                <td style="text-align: center; font-weight:bold">no</td>
                <td>Username portion of userId</td>
                <td></td>
            </tr>
            <tr>
                <td>password</td>
                <td style="text-align: center; font-weight:bold">no</td>
                <td>(see notes)</td>
                <td>If omitted, the password will be auto-generated based on the sipPassword rules configured in the server.<br />
                If present, the password will be validated against the sipPassword rules configured in the server.
                </td>
            </tr>
            <tbody>
            </table>
            </td>
        </tr>
        <tr>
            <td>services.'Charge Number'.*</td>
            <td style="text-align: center; font-weight:bold">no</td>
            <td></td>
            <td><b>Note: In the alternative process trying to configure this service will result in a 501 NOT_IMPLEMENTED response.</b><br />
            Configuration settings for the Charge Number user service. The table below describes the supported settings.
            <i>Note: the default values can be overridden by the server configuration, and may not match the values shown below.</i>
            <table border=1>
            <thead>
                <th>Property</th>
                <th>Required?</th>
                <th>Default</th>
                <th>Notes</th>
            </thead>
            <tbody>
            <tr>
                <td>phoneNumber</td>
                <td style="text-align: center; font-weight:bold">no</td>
                <td><i>(see notes)</i></td>
                <td>When omitted, the Charge Number TN will be assigned according to the following rules:
                <ol>
                <li>If the user has a phone number, this will be used.
                <li>Otherwise, if the Site has a Calling Line ID phone number, this will be used.
                <li>Otherwise, the Charge Number TN will be left empty.
                </ol>
                <br />
                Set to null to override automatic Charge Number TN allocation and force the Charge Number phone number to be empty.</td>
            </tr>
            <tr>
                <td>tnRoutine</td>
                <td style="text-align: center; font-weight:bold">no</td>
                <td><i>empty</i></td>
                <td>See notes for tnRoutine, above. <b>Note: the "no-number" routine is not allowed here.</b></td>
            </tr>
            <tr>
                <td>useChargeNumberForEnhancedTranslations</td>
                <td style="text-align: center; font-weight:bold">no</td>
                <td>false</td>
                <td></td>
            </tr>
            <tr>
                <td>sendChargeNumberToNetwork</td>
                <td style="text-align: center; font-weight:bold">no</td>
                <td>true</td>
                <td></td>
            </tr>
            <tbody>
            </table>
            </td>
        </tr>
        <tr>
            <td>services.'Call Forwarding No Answer'.*</td>
            <td style="text-align: center; font-weight:bold">no</td>
            <td></td>
            <td><b>Note: In the alternative process trying to configure this service will result in a 501 NOT_IMPLEMENTED response.</b><br />
            Configuration settings for the Call Forwarding No Answer user service. The table below describes the supported settings.
            <i>Note: the default values can be overridden by the server configuration, and may not match the values shown below.</i>            
            <table border=1>
            <thead>
                <th>Property</th>
                <th>Required?</th>
                <th>Default</th>
                <th>Notes</th>
            </thead>
            <tbody>
            <tr>
                <td>isActive</td>
                <td style="text-align: center; font-weight:bold">no</td>
                <td>true</td>
                <td>When true, forwardToPhoneNumber is required.</td>
            </tr>
            <tr>
                <td>forwardToPhoneNumber</td>
                <td style="text-align: center; font-weight:bold">no</td>
                <td>null</td>
                <td>Set to null when an empty value is desired.</td>
            </tr>
            <tr>
                <td>numberOfRings</td>
                <td style="text-align: center; font-weight:bold">no</td>
                <td>3</td>
                <td>Set to 0 for "None".<br />
                <i>Note that this value will override services.'Third-Party Voice Mail Support'.noAnswerNumberOfRings if both are present.</td>
            </tr>
            <tbody>
            </table>
            </td>
        </tr>
        <tr>
            <td>services.'Call Forwarding Not Reachable'.*</td>
            <td style="text-align: center; font-weight:bold">no</td>
            <td></td>
            <td><b>Note: In the alternative process trying to configure this service will result in a 501 NOT_IMPLEMENTED response.</b><br />
            Configuration settings for the Call Forwarding Not Reachable user service. The table below describes the supported settings.
            <i>Note: the default values can be overridden by the server configuration, and may not match the values shown below.</i>
            <table border=1>
            <thead>
                <th>Property</th>
                <th>Required?</th>
                <th>Default</th>
                <th>Notes</th>
            </thead>
            <tbody>
            <tr>
                <td>isActive</td>
                <td style="text-align: center; font-weight:bold">no</td>
                <td>true</td>
                <td>When true, forwardToPhoneNumber is required.</td>
            </tr>
            <tr>
                <td>forwardToPhoneNumber</td>
                <td style="text-align: center; font-weight:bold">no</td>
                <td>null</td>
                <td>Set to null when an empty value is desired.</td>
            </tr>
            <tbody>
            </table>
            </td>
        </tr>
        <tr>
            <td>services.'Third-Party Voice Mail Support'.*</td>
            <td style="text-align: center; font-weight:bold">no</td>
            <td></td>
            <td><b>Note: In the alternative process trying to configure this service will result in a 501 NOT_IMPLEMENTED response.</b><br />
            Configuration settings for the Third-Party Voice Mail Support user service. The table below describes the supported settings.
            <i>Note: the default values can be overridden by the server configuration, and may not match the values shown below.</i>
            <table border=1>
            <thead>
                <th>Property</th>
                <th>Required?</th>
                <th>Default</th>
                <th>Notes</th>
            </thead>
            <tbody>
            <tr>
                <td>isActive</td>
                <td style="text-align: center; font-weight:bold">no</td>
                <td>true</td>
                <td></td>
            </tr>
            <tr>
                <td>busyRedirectToVoiceMail</td>
                <td style="text-align: center; font-weight:bold">no</td>
                <td>true    </td>
                <td></td>
            </tr>
            <tr>
                <td>noAnswerRedirectToVoiceMail</td>
                <td style="text-align: center; font-weight:bold">no</td>
                <td>true</td>
                <td></td>
            </tr>
            <tr>
                <td>serverSelection</td>
                <td style="text-align: center; font-weight:bold">no</td>
                <td>'Group Mail Server'</td>
                <td>Allowed values: {'Group Mail Server'|'User Specific Mail Server'}</td>
            </tr>
            <tr>
                <td>userServer</td>
                <td style="text-align: center; font-weight:bold">no</td>
                <td>null</td>
                <td>Set to null when an empty value is desired.</td>
            </tr>
            <tr>
                <td>mailboxIdType</td>
                <td style="text-align: center; font-weight:bold">no</td>
                <td>'User Or Group Phone Number'</td>
                <td>Allowed values: {'User Or Group Phone Number'|'URL'}</td>
            </tr>
            <tr>
                <td>other</td>
                <td style="text-align: center; font-weight:bold">no</td>
                <td>tbd</td>
                <td>tbd</td>
            </tr>
            <tr>
                <td>noAnswerNumberOfRings</td>
                <td style="text-align: center; font-weight:bold">no</td>
                <td>3</td>
                <td>Set to 0 for "None".<br />
            <i>Note that this value will be overridden by services.'Call Forwarding No Answer'.numberOfRings if both are present.</i>
            </td>
            </tr>
            <tr>
                <td>mailboxURL</td>
                <td style="text-align: center; font-weight:bold">no</td>
                <td>null</td>
                <td>Set to null when an empty value is desired.</td>
            </tr>
            <tr>
                <td>alwaysRedirectToVoiceMail</td>
                <td style="text-align: center; font-weight:bold">no</td>
                <td>false</td>
                <td></td>
            </tr>
            <tr>
                <td>outOfPrimaryZoneRedirectToVoiceMail</td>
                <td style="text-align: center; font-weight:bold">no</td>
                <td>false</td>
                <td></td>
            </tr>
            <tbody>
            </table>
            </td>
        </tr>
        <tr>
            <td>services.'BroadWorks Mobility'.*</td>
            <td style="text-align: center; font-weight:bold">no</td>
            <td></td>
            <td><b>Note: In the default (legacy) process trying to configure this service will result in a 501 NOT_IMPLEMENTED response.</b><br />
            Configuration settings for the BroadWorks Mobility user service. The table below describes the supported settings.
            <table border=1>
            <thead>
                <th>Property</th>
                <th>Required?</th>
                <th>Default</th>
                <th>Notes</th>
            </thead>
            <tbody>
            <tr>
                <td>isActive</td>
                <td style="text-align: center; font-weight:bold">no</td>
                <td>false</td>
                <td>Turning on/off the service.</td>
            </tr>
            <tr>
                <td>mobilePhoneNumber</td>
                <td style="text-align: center; font-weight:bold">no</td>
                <td></td>
                <td>Mobile phone number</td>
            </tr>
            <tr>
                <td>mobileDevicePassword</td>
                <td style="text-align: center; font-weight:bold">no</td>
                <td></td>
                <td>The password for the mobile number, to be used for an eligibility check.</td>
            </tr>
            <tr>
                <td>mobileNetworkName</td>
                <td style="text-align: center; font-weight:bold">no</td>
                <td></td>
                <td>Name of a BroadWorks Mobility Mobile Network.<br />
                Note: Used only if the "mobilePhoneNumber" is present in the request. If the "mobileNetworkName" is omitted from the request the config value, if not empty, is used.</td>
            </tr>
            <tbody>
            </table>
            </td>
        </tr>
        <tr>
            <td>extensions</td>
            <td style="text-align: center; font-weight:bold">no</td>
            <td></td>
            <td>Optional section for network-element-specific properties</td>
        </tr>
        <tr>
            <td>extensions. broadworks</td>
            <td style="text-align: center; font-weight:bold">no</td>
            <td></td>
            <td>Optional section for BroadWorks-specific properties</td>
        </tr>
        <tr>
            <td>extensions. broadworks. serviceProviderId</td>
            <td style="text-align: center; font-weight:bold">no</td>
            <td></td>
            <td>ID of the BroadWorks service provider or enterprse in which the underlying BroadWorks user is to be created.
            In a default configuration (where a VoIP User is composed of BroadWorks entities only),
            this property can be used instead of customerId (eliminating the need to know the server-generated customerId
            prior to placing this request).</td>
        </tr>
        <tr>
            <td>extensions. broadworks. groupId</td>
            <td style="text-align: center; font-weight:bold">no</td>
            <td></td>
            <td>ID of the BroadWorks group in which the underlying BroadWorks user is to be created.
            In a default configuration (where a VoIP User is composed of BroadWorks entities only),
            this property can be used instead of siteId (eliminating the need to know the server-generated siteId
            prior to placing this request).</td>
        </tr>
    </tbody>
</table>

##Response Properties - 201 Created

For the alternative User Add process besides the properties listed in the table below, the response also contains the normal HAL _links and curies properties.<br />
Note: The default (legacy) request response contains all the properties sent in the request body and also the normal HAL _links and curies properties..
<table border=1>
    <thead>
    <th>Parameter</th>
    <th>Description</th>
    <th>Mandatory</th>
    </thead>
    <tbody>
        <tr>
            <td>userId</td>
            <td>The Loki Server VoIP Id of the BroadWorks User.</td>
            <td>Yes</td>
       </tr>
       <tr>
            <td>extensions. broadworks. userId</td>
            <td>The BroadWorks ID of the new user.</td>
            <td>Yes (Only for the alternative process)</td>
       </tr>
       <tr>
            <td>extension</td>
            <td>Extension of the user.</td>
            <td>no</td>
       </tr>
       <tr>
            <td>portalPassword</td>
            <td>Web password for user.</td>
            <td>Yes (Only for the alternative process)</td>
       </tr>
       <tr>
            <td>passcode</td>
            <td>Voice Portal passcode for user.</td>
            <td>Yes (Only for the alternative process)</td>
       </tr>
       <tr>
            <td>firstName</td>
            <td>Users first name.</td>
            <td>no</td>
       </tr>
       <tr>
            <td>lastName</td>
            <td>Users last name.</td>
            <td>no</td>
       </tr>
       <tr>
            <td>publicUserIdentities</td>
            <td>Users public identities entries.</td>
            <td>no</td>
       </tr>
       <tr>
            <td>services Authentication. username</td>
            <td>Users username for Authentication service.</td>
            <td>no</td>
       </tr>
       <tr>
            <td>services. Authentication. password</td>
            <td>Users password for Authentication service.</td>
            <td>no</td>
       </tr>
       <tr>
            <td>accessDevice. deviceCredentials. username</td>
            <td>Users device username credential.</td>
            <td>no</td>
       </tr>
       <tr>
            <td>accessDevice. deviceCredentials. password</td>
            <td>Users device password credential.</td>
            <td>no</td>
       </tr>
       <tr>
            <td>accessDevice. name</td>
            <td>Users device name.</td>
            <td>no</td>
       </tr>
       <tr>
            <td>accessDevice. linePort</td>
            <td>Users device lineport.</td>
            <td>no</td>
       </tr>
       <tr>
            <td>_warnings</td>
            <td>Placeholder for warnings returned by the external API (LWS-SOAP)</td>
            <td>no</td>
       </tr>
       <tr>
            <td>_warnings[].code</td>
            <td>
                Warning codes.<br />
                <b>Note</b>: When the request is using Alternate process then this field will have
                WARN_DEVICE_CREDENTIAL_UPDATE_FAILED value in the case when the device credentials were not set, otherwise this property is not present.
            </td>
            <td>no</td>
       </tr>
       <tr>
            <td>_warnings[].summary</td>
            <td>Any warnings received from LWS-SOAP.</td>
            <td>yes</td>
       </tr>
       <tr>
            <td>_warnings[].details</td>
            <td>Any warnings received from LWS-SOAP.</td>
            <td>yes</td>
       </tr>
    </tbody>
</table>

For the hostedPbx, "businessLine" and "ATA" user type the response has an _embedded.ls:site-devices property that contains a 
HAL representation of the created device with the following properties described in the table below.<br />
<b>Note</b>: _embedded.ls:site-devices property is present in the response only when using "Alternate" process of POST /loki/users{?mode}.
<table border=1>
    <thead>
    <th>Parameter</th>
    <th>Description</th>
    <th>Mandatory</th>
    </thead>
    <tbody>
        <tr>
            <td>customerId</td>
            <td>Customer ID.</td>
            <td>Yes</td>
       </tr>
       <tr>
            <td>siteId</td>
            <td>Site ID.</td>
            <td>Yes</td>
       </tr>
       <tr>
            <td>deviceId</td>
            <td>Device ID.</td>
            <td>Yes</td>
       </tr>
       <tr>
            <td>deviceCredentials</td>
            <td>Container for device credentials.</td>
            <td>no</td>
       </tr>
       <tr>
            <td>deviceCredentials.username</td>
            <td>Auto generated device authentication username.</td>
            <td>no</td>
       </tr>
        <tr>
            <td>deviceCredentials.username</td>
            <td>Auto generated device authentication passwprd.</td>
            <td>no</td>
       </tr>
       <tr>
            <td>linePort</td>
            <td>Lineport.</td>
            <td>no</td>
       </tr>
       <tr>
            <td>extensions. broadworks. resourceId</td>
            <td>BroadWorks device name.</td>
            <td>Yes</td>
       </tr>
    </tbody>
</table>

###User Type
The the accessDevice and trunkGroup values vary depending on the type of user being added (userType). See examples (excerpts from a request body) below.
#### ATA User Add with device creation (auto-generated device name)
    ...
    "userType" : "ATA",
    "accessDevice": {
      "deviceManagementRoutine": "create",
      "type": "Polycom Soundpoint IP 500",
      "macAddress": "AABBCC112234"
    },
    ...
#### ATA User Add with device creation
    ...
    "userType" : "ATA",
    "accessDevice": {
      "deviceManagementRoutine": "create",
      "type": "Polycom Soundpoint IP 500",
      "macAddress": "AABBCC112234"
    },
    ...
#### ATA User Add using existing device
    ...
    "userType" : "ATA",
    "accessDevice": {
      "deviceManagementRoutine": "existing",
      "name": "ATA device"
    },
    ...
#### Business Line User Add
    ...
    "userType" : "businessLine",
    "accessDevice": {
        "name": "exampleComIad001"
    },
    ...
#### HostedPbx User Add
    ...
    "userType" : "hostedPbx",
    "accessDevice": {
        "name": "exampleComIad001",
        "type": "Example",
        "model": "Example",
        "macAddress": "0A1B2C3D4E5F",
        "linePort": "exampleComIad001@example.com"
    },
    ...
#### Trunking User Add
    ...
    "userType" : "trunking",
    "trunkGroup": {
        "name": "exampleTrunk"
    },
    ...
#### Trunking User Add with no assigned Trunk Group
    ...
    "userType" : "trunking",
    "trunkGroup": { },
    ...
#### Trunking User Add with no assigned Trunk Group (Alternative)
    ...
    "userType" : "trunking",
    ...

POST /users{?mode}
> Content-Type: application/json
{
    "customerId" : "a-server-generated-ID",
    "siteId" : "another-server-generated-ID",
    "userId" : "2005553001@example.com",
    "userType" : "businessLine",
    "phoneNumber" : "+1-2005553001",
    "tnRoutine" : "auto",
    "CLID" : "+1-2005553001",
    "extension" : "3001",
    "lastName" : "Smith",
    "firstName" : "John",
    "callingLineIdLastName" : "Smith",
    "callingLineIdFirstName" : "John",
    "email" : "jsmith@example.com",
    "timeZone" : "America/New_York",
    "language" : "English",
    "accessDevice": {
        "name": "exampleComIad001"
    },
    "servicePacks" : {
        "base" : "Standard",
        "add-on" : [
            "Executive"
        ]
    },
    "role" : "Executive",
    "services" : {
        "Authentication" : {
            "username" : "2005553001@sip.example.com",
            "password" : "230A4u$#%f"
        },
        "Charge Number" : {
            "phoneNumber" : "+1-2005554321",
            "tnRoutine" : "",
            "useChargeNumberForEnhancedTranslations" : false,
            "sendChargeNumberToNetwork" : true
        },
        "Third-Party Voice Mail Support" : {
            "isActive" : true,
            "busyRedirectToVoiceMail" : true,
            "noAnswerRedirectToVoiceMail" : true,
            "serverSelection" : "User Specific Mail Server",
            "userServer" : "4165557000",
            "mailboxIdType" : "URL",
            "mailboxURL" : "2005553001@sip.example.com",
            "noAnswerNumberOfRings" : 4,
            "alwaysRedirectToVoiceMail" : false,
            "outOfPrimaryZoneRedirectToVoiceMail" : false
        },
        "Call Forwarding No Answer" : {
            "isActive" : true,
            "forwardToPhoneNumber" : "+1-2005553101",
            "numberOfRings" : 4
        },
        "Call Forwarding Not Reachable" : {
            "isActive" : true,
            "forwardToPhoneNumber" : "+1-2005553101"
        },
        "BroadWorks Mobility": {
            "isActive": false,
            "mobilePhoneNumber": "+1-2005553101",
            "mobileDevicePassword": "Fg%3fg56",
            "mobileNetworkName": "Example"
        },
        "Remote Office" : { }
    },
    "extensions" : {
        "broadworks" : {
            "serviceProviderId" : "Example Com",
            "groupId" : "Example Com - North"
        }
    }
}
< 201
< Location: http://lokiserver.apiary.io/loki/users/2005553001%40example.com
< Transaction-Id: 1380080943120
< Content-Type: application/hal+json
{
    "_links" : {
        "self" : {
            "href" : "http://lokiserver.apiary.io/loki/users/2005553001%40example.com"
        }
    },
    "curies" : [
        {
            "name" : "ls",
            "href" : "http://lokiserver.apiary.io/loki/rels/{rel}",
            "templated" : true
        }
    ],
    "customerId" : "Example Com",
    "siteId" : "Example Com - North",
    "phoneNumber" : "+1-2005553001",
    "extension" : "3001",
    "CLID" : "+1-2005553001",
    "userId" : "2005553001@example.com",
    "portalPassword" : "s8F!9ggo",
    "firstName" : "John",
    "lastName" : "Smith",
    "callingLineIdLastName" : "Smith",
    "callingLineIdFirstName" : "John",
    "timeZone" : "America/New_York",
    "language" : "English",
    "_embedded": {
        "ls:site-devices": [
            {
                "_links": {
                    "self": {
                        "href": "http://lokiserver.apiary.io/loki/customers/Example%20Com/sites/Example%20Com%20-%20North/devices/exampleComIad001"
                    }
                },
                 "customerId" : "Example Com",
                 "siteId" : "Example Com - North",
                "deviceId": "exampleComIad001",
                "extensions": {
                    "broadworks": {
                        "resourceId": "exampleComIad001"
                    }
                },
                "deviceCredentials": {
                    "username": "16502342235",
                    "password": "{3qT8L"
                }
            }
        ]
    },
    "services" : {
        "Authentication" : {
            "username" : "2005553001@sip.example.com",
            "password" : "230A4u$#%f"
        },
        "Charge Number" : {
            "phoneNumber" : "+1-2005554321",
            "useChargeNumberForEnhancedTranslations" : false,
            "sendChargeNumberToNetwork" : true
        },
        "Third-Party Voice Mail Support" : {
            "isActive" : true,
            "busyRedirectToVoiceMail" : true,
            "noAnswerRedirectToVoiceMail" : true,
            "serverSelection" : "User Specific Mail Server",
            "userServer" : "4165557000",
            "mailboxIdType" : "URL",
            "mailboxURL" : "2005553001@sip.example.com",
            "noAnswerNumberOfRings" : 4,
            "alwaysRedirectToVoiceMail" : false,
            "outOfPrimaryZoneRedirectToVoiceMail" : false
        },
        "Call Forwarding No Answer" : {
            "isActive" : true,
            "forwardToPhoneNumber" : "+1-2005553101",
            "numberOfRings" : 4
        },
        "Call Forwarding Not Reachable" : {
            "isActive" : true,
            "forwardToPhoneNumber" : "+1-2005553101"
        },
        "Remote Office" : { }
    }
}
+++++
< 424
< Content-Type: application/json
{
    "errorCode" : "EXTERNAL_API_ERROR",
    "externalErrorCode" : "4250",
    "externalErrorSummary" : "[Warning 4250] 1 phone number(s) not added.  Verify that the number(s) are not already assigned.",
    "externalErrorDetail" : "[Warning 4250] 1 phone number(s) not added.  Verify that the number(s) are not already assigned."
}
+++++
< 404
< Content-Type: application/json
{
    "errorCode" : "NOT_FOUND",
    "externalErrorCode" : "4152",
    "externalErrorSummary" : "[Error 4152] Group not found: LeoNVB:LeoExample",
    "externalErrorDetail" : "[Error 4152] Group not found: LeoNVB:LeoExample"
}
+++++
< 404
< Content-Type: application/json
{
    "errorCode": "NOT_FOUND",
    "summary": "The requested resource does not exist",
    "detail": "Group [LeoNVB:LeoExample] not found in Broadworks."
}
+++++
< 500
< Transaction-Id: 1380080943120
< Content-Type: application/json
{
    "errorCode" : "INTERNAL_ERROR",
    "summary" : "Internal error creating voip-user",
    "detail" : "The server encountered an error creating the resource. Please contact your administrator for assistance."
}
+++++
< 400
< Content-Type: application/json
< Transaction-Id: 1380080943120
{
    "errorCode" : "FORMAT_ERROR",
    "summary" : "Input validation failure",
    "detail" : "Request validation failed: phoneNumber does not match pattern^\\+[0-9]+-[0-9]+$: was processing value \"+1-\""
}


Modify a VoIP User.<br />
In current implementation the VoIP User is updated using LWS-SOAP UserModifyRequest API call.<br />
Process name: Modify User via LWS SOAP (VoIP Entity)<br />
Rollback-enabled: No.

##URI Template Parameters

<table border=1>
    <thead>
    <th>Parameter</th>
    <th>Required?</th>
    <th>Default</th>
    <th>Description</th>
    </thead>
    <tbody>
        <tr>
            <td>userId</td>
            <td style="text-align: center; font-weight:bold">yes</td>
            <td>n/a</td>
            <td>Loki Server userId (server-generated) of the user to be deleted.</td>
        </tr>
    </tbody>
</table>

##Request Properties

Note: See the JSON Schema (**link TBD) for data types, format, length restrictions, etc.

<table border=1>
    <thead>
    <th>Property</th>
    <th>Required?</th>
    <th>Default</th>
    <th>Description</th>
    </thead>
    <tbody>
        <tr>
            <td>phoneNumber</td>
            <td style="text-align: center; font-weight:bold">no</td>
            <td>n/a</td>
            <td>Phone Number.<br />
            Must be E.164 formatted, e.g. +1-2005553001 (the dash is required, after the country code).<br />
            A value is required for certain TN routines; see documentation for tnRoutine for details.<br />
        </tr>
        <tr>
            <td>tnRoutine</td>
            <td style="text-align: center; font-weight:bold">no</td>
            <td>""(empty string)</td>
            <td>Phone Number (TN) assignment routine.<br />
            Supported values and impact on other required properties:
            <table border=1>
            <thead>
                <th>tnRoutine</th>
                <th>Description</th>
            </thead>
            <tbody>
            <tr>
                <td><b>""</b>(empty string)</td>
                <td>TN must already be available for use; no assignment will be performed.</td>
            </tr>
            <tr>
                <td><b>port-no-temp</b></td>
                <td>TN does not exist in the system, and will be assigned automatically at both the Customer and Site levels.</td>
            </tr>
            <tr>
                <td><b>auto</b></td>
                <td>TN may or may not already exist in the system, and will be assigned automatically only as needed.<br />
                <b>Not Implemented</b></td>
            </tr>
            <tr>
                <td><b>no-number</b></td>
                <td>User will have no TN (extension-only user); phoneNumber must <i>not</i> be present.<br />
                <b>Not Implemented</b></td>
            </tr>
            <tbody>
            </table>
        </tr>
        <tr>
            <td>extension</td>
            <td style="text-align: center; font-weight:bold">no</td>
            <td>n/a</td>
            <td>Extension. </td>
        </tr>
        <tr>
            <td>lastName</td>
            <td style="text-align: center; font-weight:bold">no</td>
            <td>n/a</td>
            <td>Last Name.</td>
        </tr>
        <tr>
            <td>firstName</td>
            <td style="text-align: center; font-weight:bold">no</td>
            <td>n/a</td>
            <td>First Name.</td>
        </tr>
        <tr>
            <td>department</td>
            <td style="text-align: center; font-weight:bold">no</td>
            <td>n/a</td>
            <td>User department.</td>
        </tr>
        <tr>
            <td>language</td>
            <td style="text-align: center; font-weight:bold">no</td>
            <td>n/a</td>
            <td>Language.</td>
        </tr>
        <tr>
            <td>email</td>
            <td style="text-align: center; font-weight:bold">no</td>
            <td>n/a</td>
            <td>E-Mail address</td>
        </tr>
        <tr>
            <td>CLID</td>
            <td style="text-align: center; font-weight:bold">no</td>
            <td>n/a</td>
            <td>Calling Line ID Phone Number.<br />
            Must be E.164 formatted, e.g. +1-2005553001 (the dash is required, after the country code).
            </td>
        </tr>
        <tr>
            <td>callingLineIdLastName</td>
            <td style="text-align: center; font-weight:bold">no</td>
            <td>n/a</td>
            <td>Calling Line ID Last Name..</td>
        </tr>
        <tr>
            <td>callingLineIdFirstName</td>
            <td style="text-align: center; font-weight:bold">no</td>
            <td>no</td>
            <td>Calling Line ID First Name.</td>
        </tr>
        <tr>
            <td>timeZone</td>
            <td style="text-align: center; font-weight:bold">no</td>
            <td>n/a</td>
            <td>Time Zone expressed as a Zone Name from the
            <a href="https://www.iana.org/time-zones">IANA Time Zone Database</a>, e.g. "America/New_York".
            </td>
        </tr>
        <tr>
            <td>address</td>
            <td style="text-align: center; font-weight:bold">no</td>
            <td>n/a</td>
            <td>
                Container for Address information.<br />
                Details of the Address properties:
                <table border=1>
                    <thead>
                    <th>Property</th>
                    <th>Required?</th>
                    <th>Default</th>
                    <th>Description</th>
                    </thead>
                    <tbody>
                        <tr>
                            <td>addressLine1</td>
                            <td style="text-align: center; font-weight:bold">no</td>
                            <td>n/a</td>
                            <td>Street address.</td>
                        </tr>
                        <tr>
                            <td>addressLine2</td>
                            <td style="text-align: center; font-weight:bold">no</td>
                            <td>n/a</td>
                            <td>Street address.</td>
                        </tr>
                        <tr>
                            <td>city</td>
                            <td style="text-align: center; font-weight:bold">no</td>
                            <td>n/a</td>
                            <td>City</td>
                        </tr>
                        <tr>
                            <td>stateOrProvince</td>
                            <td style="text-align: center; font-weight:bold">no</td>
                            <td>n/a</td>
                            <td>State or Province</td>
                        </tr>
                        <tr>
                            <td>zipOrPostalCode</td>
                            <td style="text-align: center; font-weight:bold">no</td>
                            <td>n/a</td>
                            <td>Zip or Postal Code</td>
                        </tr>
                        <tr>
                            <td>country</td>
                            <td style="text-align: center; font-weight:bold">no</td>
                            <td>n/a</td>
                            <td>Country</td>
                        </tr>
                    </tbody>
                </table>
            </td>
        </tr>
    </tbody>
</table>

##Response Properties - 200 OK

Besides the properties listed in the table below, the response also contains the normal HAL _links and curies properties.<br />
<table border=1>
    <thead>
    <th>Parameter</th>
    <th>Description</th>
    <th>Mandatory</th>
    </thead>
    <tbody>
        <tr>
            <td>userId</td>
            <td>The Loki Server VoIP Id of the BroadWorks User.</td>
            <td>Yes</td>
       </tr>
       <tr>
            <td>extensions. broadworks. resourceId</td>
            <td>The BroadWorks ID of the user.</td>
            <td>Yes</td>
       </tr>
    </tbody>
</table>

PUT /users/{+userId}
> Content-Type: application/json
{
    "extension": "2177",
    "phoneNumber": "+1-6502342177",
    "tnRoutine": "port-no-temp",
    "lastName": "Smith",
    "firstName": "John",
    "language": "English",
    "email": "jsmith@example.com",
    "department": "Sales",
    "CLID": "+1-6502342177",
    "callingLineIdLastName": "Smith",
    "callingLineIdFirstName": "John",
    "timeZone": "America/New_York",
    "address": {
        "addressLine1": "152 W 34th St",
        "city": "New York",
        "stateOrProvince": "NY",
        "zipOrPostalCode": "10001",
        "country": "USA"
    }
}
< 200
< Transaction-Id: 1380080943120
< Content-Type: application/hal+json
{
    "_links" : {
        "self" : {
            "href" : "http://lokiserver.apiary.io/loki/users/6502342177%40example.com"
        }
    },
    "curies" : [
        {
            "name" : "ls",
            "href" : "http://lokiserver.apiary.io/loki/rels/{rel}",
            "templated" : true
        }
    ],
    "userId" : "6502342177@example.com",
    "extensions": {
        "broadworks": {
            "resourceId": "6502342177@example.com"
        }
    }
}
+++++
< 424
< Transaction-Id: 1380080943120
< Content-Type: application/json
{
    "errorCode": "EXTERNAL_API_ERROR",
    "externalErrorCode": null,
    "externalErrorSummary": "User Modify Failed",
    "externalErrorDetail": "User Modify Failed. User not found: [6502342177%40example.com]"
}
+++++
< 502
< Transaction-Id: 1380080943120
< Content-Type: application/json
{
    "errorCode": "EXTERNAL_API_SERVER_ERROR",
    "summary": "Unexpected response from remote API",
    "detail": "LWS-SOAP: Received unexpected response: 'SuccessResponse'"
}
+++++
< 400
< Transaction-Id: 1380080943120
< Content-Type: application/json
{
    "errorCode" : "FORMAT_ERROR",
    "summary" : "Input validation failure",
    "detail": "body.phoneNumber does not match pattern^\\+\\d+-\\d+$: was processing value \"+1-\""
}

Fetch a BroadWorks User's Call Processing Policies settings.
Refer to BroadWorks documentation for specifics of the properties under extensions.broadworks.

In addition to the standard error codes, this will return 404 Not Found if the user does not exist in BroadWorks.

**NOT IMPLEMENTED**
GET /users/{+userId}/call-processing-policy
< 200
< Content-Type: application/hal+json
< Transaction-Id: 1380080943120
{
    "_links": {
        "self": {
            "href": "http://lokiserver.apiary.io/loki/users/4155551212%20example.com/call-processing-policy"
        }
    },
    "curies": [
        {
            "name": "ls",
            "href": "http://lokiserver.apiary.io/loki/rels/{rel}",
            "templated": true
        }
    ],
    "_embedded": {
        "ls:users": [
            {
                "_links": {
                    "self": {
                        "href": "http://lokiserver.apiary.io/loki/users/4155551212%20example.com"
                    }
                },
                "userId": "4155551212@example.com"
            }
        ]
    },
    "extensions": {
        "broadworks": {
            "callingLineId": {
                "useUserCLIDSetting": false,
                "clidPolicy": "Use DN",
                "emergencyClidPolicy": "Use DN",
                "allowAlternateNumbersForRedirectingIdentity": true,
                "useGroupName": false,
                "allowConfigurableCLIDForRedirectingIdentity": true,
                "blockCallingNameForExternalCalls": false
            },
            "media": {
                "useUserMediaSetting": false,
                "mediaPolicySelection": "No Restrictions",
                "supportedMediaSetName": "Example"
            },
            "callLimits": {
                "useUserCallLimitsSetting": false,
                "useMaxSimultaneousCalls": false,
                "maxSimultaneousCalls": 10,
                "useMaxSimultaneousVideoCalls": false,
                "maxSimultaneousVideoCalls": 5,
                "useMaxCallTimeForAnsweredCalls": false,
                "maxCallTimeForAnsweredCallsMinutes": 600,
                "useMaxCallTimeForUnansweredCalls": false,
                "maxCallTimeForUnansweredCallsMinutes": 2,
                "useMaxConcurrentRedirectedCalls": false,
                "maxConcurrentRedirectedCalls": 3,
                "useMaxFindMeFollowMeDepth": false,
                "maxFindMeFollowMeDepth": 3,
                "maxRedirectionDepth": 10,
                "useMaxConcurrentFindMeFollowMeInvocations": false,
                "maxConcurrentFindMeFollowMeInvocations": 3
            },
            "incomingCallerId": {
                "useUserDCLIDSetting": false,
                "enableDialableCallerID": false
            }
        }
    }
}

Update a BroadWorks User's Call Processing Policies settings.
Refer to BroadWorks documentation for specifics of the properties under extensions.broadworks.

In addition to the standard error codes, this will return 404 Not Found if the user does not exist in BroadWorks.

** TBD - json-schema, indicating that extensions.broadworks is an object and is optional

**NOT IMPLEMENTED**
PUT /users/{+userId}/call-processing-policy
> Content-Type: application/json
{
    "extensions": {
        "broadworks": {
            "callingLineId": {
                "useUserCLIDSetting": false,
                "clidPolicy": "Use DN",
                "emergencyClidPolicy": "Use DN",
                "allowAlternateNumbersForRedirectingIdentity": true,
                "useGroupName": false,
                "allowConfigurableCLIDForRedirectingIdentity": true,
                "blockCallingNameForExternalCalls": false
            },
            "media": {
                "useUserMediaSetting": false,
                "mediaPolicySelection": "No Restrictions",
                "supportedMediaSetName": "Example"
            },
            "callLimits": {
                "useUserCallLimitsSetting": false,
                "useMaxSimultaneousCalls": false,
                "maxSimultaneousCalls": 10,
                "useMaxSimultaneousVideoCalls": false,
                "maxSimultaneousVideoCalls": 5,
                "useMaxCallTimeForAnsweredCalls": false,
                "maxCallTimeForAnsweredCallsMinutes": 600,
                "useMaxCallTimeForUnansweredCalls": false,
                "maxCallTimeForUnansweredCallsMinutes": 2,
                "useMaxConcurrentRedirectedCalls": false,
                "maxConcurrentRedirectedCalls": 3,
                "useMaxFindMeFollowMeDepth": false,
                "maxFindMeFollowMeDepth": 3,
                "maxRedirectionDepth": 10,
                "useMaxConcurrentFindMeFollowMeInvocations": false,
                "maxConcurrentFindMeFollowMeInvocations": 3
            },
            "incomingCallerId": {
                "useUserDCLIDSetting": false,
                "enableDialableCallerID": false
            }
        }
    }
}
< 204
< Transaction-Id: 1380080943120


Delete a VoIP User.

##URI Query Parameters

<table border=1>
    <thead>
    <th>Parameter</th>
    <th>Required?</th>
    <th>Default</th>
    <th>Description</th>
    </thead>
    <tbody>
        <tr>
            <td>keepMailbox</td>
            <td style="text-align: center; font-weight:bold">no</td>
            <td>true</td>
            <td>Flag that controls whether the Message Store user account is kept or deleted along with the BroadWorks user.</td>
        </tr>
    </tbody>
</table>

##URI Template Parameters

<table border=1>
    <thead>
    <th>Parameter</th>
    <th>Required?</th>
    <th>Default</th>
    <th>Description</th>
    </thead>
    <tbody>
        <tr>
            <td>userId</td>
            <td style="text-align: center; font-weight:bold">yes</td>
            <td>n/a</td>
            <td>Loki Server userId (server-generated) of the user to be deleted.</td>
        </tr>
    </tbody>
</table>

DELETE /users/{+userId}{?keepMailbox}
< 204
< Transaction-Id: 1380080943120
+++++
< 424
< Transaction-Id: 1380080943120
< Content-Type: application/json
{
    "errorCode": "EXTERNAL_API_ERROR",
    "externalErrorCode": "4008",
    "externalErrorSummary": "Error: [Error 4008] User not found: JohnDoe",
    "externalErrorDetail": "User Delete Failed. Error: [Error 4008] User not found: JohnDoe"
}



Reset the device credentials on a VoIP Users primary device.

##URI Template Parameters

<table border=1>
    <thead>
    <th>Parameter</th>
    <th>Required?</th>
    <th>Default</th>
    <th>Description</th>
    </thead>
    <tbody>
        <tr>
            <td>userId</td>
            <td style="text-align: center; font-weight:bold">yes</td>
            <td>n/a</td>
            <td>Loki Server userId (server-generated) of the user.</td>
        </tr>
    </tbody>
</table>

POST /users/{+userId}/resetDeviceCredentials
< 200
< Transaction-Id: 1380080943120
< Content-Type: application/json
{
    "_links": {
        "self": {
           "href": "http://lokiserver.apiary.io/loki/users/JohnDoe/resetDeviceCredentials"
        }
    },
    "username": "12147483642",
    "password": "Mu+7*+",
    "curies": [
        {
            "name": "ls",
            "href": "http://lokiserver.apiary.io/loki/rels/{rel}",
            "templated": true
        }
    ]
}
+++++
< 404
< Transaction-Id: 1380080943120
< Content-Type: application/json
{
    "errorCode": "NOT_FOUND",
    "externalErrorCode": "4008",
    "externalErrorSummary": "[Error 4008] User not found: JohnDoe",
    "externalErrorDetail": "[Error 4008] User not found: JohnDoe"
}
+++++
< 422
< Transaction-Id: 1380080943120
< Content-Type: application/json
{
    "errorCode": "SEMANTIC_ERROR",
    "summary": "The server was unable to process your request",
    "detail": "User does not have primary device"
}
+++++
< 501
< Transaction-Id: 1380080943120
< Content-Type: application/json
{
    "errorCode": "NOT_IMPLEMENTED",
    "summary": "The requested functionality is not implemented.",
    "detail": "Resetting device credentials for user without phone number is not supported."
}


--
VoIP User Services
##Collection

Supported network elements:

* BroadWorks Application Server

Keys:

* userId

Extension Keys:

* (none)
--

Modify VoIP User's assigned services.

##URI Template Parameters

<table border=1>
    <thead>
    <th>Parameter</th>
    <th>Required?</th>
    <th>Default</th>
    <th>Description</th>
    </thead>
    <tbody>
        <tr>
            <td>userId</td>
            <td style="text-align: center; font-weight:bold">yes</td>
            <td>n/a</td>
            <td>Loki Server userId (server-generated) of the user.</td>
        </tr>
    </tbody>
</table>

PUT /users/{+userId}/services/assigned-services
> Content-Type: application/json
{ 
    "services": ["Authentication", "Alternate Numbers"] , 
    "servicePacks": ["Executive"] 
} 
< 204
< Transaction-Id: 1380080943120
+++++
< 424
< Transaction-Id: 1380080943120
< Content-Type: application/json
{
    "errorCode": "EXTERNAL_API_ERROR",
    "externalErrorCode": "4008",
    "externalErrorSummary": "[Error 4008] User not found: JohnDoe",
    "externalErrorDetail": "[Error 4008] User not found: JohnDoe."
}

Update a BroadWorks User's Alternate Numbers service settings.<br />
In current implementation, services are updated on BroadWorks user using LWS-SOAP UserModifyRequest API call.

##URI Template Parameters

<table border=1>
    <thead>
    <th>Parameter</th>
    <th>Required?</th>
    <th>Default</th>
    <th>Description</th>
    </thead>
    <tbody>
        <tr>
            <td>userId</td>
            <td style="text-align: center; font-weight:bold">yes</td>
            <td>n/a</td>
            <td>Loki Server userId (server-generated) of the user whose Alternate Numbers service will be updated.</td>
        </tr>
    </tbody>
</table>

##Request Properties##
Note: See the JSON Schema (**link TBD) for data types, format, length restrictions, etc.

<table border=1>
    <thead>
    <th>Property</th>
    <th>Required?</th>
    <th>Default</th>
    <th>Description</th>
    </thead>
    <tbody>
        <tr>
            <td>distinctiveRing</td>
            <td style="text-align: center; font-weight:bold">no</td>
            <td></td>
            <td>Distinctive ring setting.</td>
        </tr>
        <tr>
            <td>alternateNumbers</td>
            <td style="text-align: center; font-weight:bold">no</td>
            <td></td>
            <td>Container for alternate numbers information. Alternate numbers is an array of entries. Details of the alternate number entry properties:
                <table border=1>
                    <thead>
                        <th>Property</th>
                        <th>Required?</th>
                        <th>Default</th>
                        <th>Description</th>
                    </thead>
                    <tbody>
                        <tr>
                            <td>id</td>
                            <td>yes</td>
                            <td></td>
                            <td>Alternate Number ID  number of Alt. Num entry in the list.
                                <br/>Allowed values: [ 1, 2, 3, 4, 5, 6, 7, 8, 9, 10 ].
                                <br/><b>Note:</b> The IDs must be provided in ascending order in the request, providing
                                the IDs in a random order will cause the request to fail.
                            </td>
                        </tr>
                        <tr>
                            <td>tnRoutine</td>
                            <td>no</td>
                            <td></td>
                            <td>
                                TN management routine for provided phone number.<br />
                                <b>Note: at this time only ""(empty string) is allowed.</b><br/>
                                Supported values and impact on other required properties:
                                <table border=1>
                                <thead>
                                    <th>tnRoutine</th>
                                    <th>Description</th>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td><b>port-no-temp</b></td>
                                        <td>
                                            TN does not exist in the system; will attempt to assign at both the Customer and Site levels.<br/>
                                            <b>Not Implemented</b>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td><b>auto</b></td>
                                        <td>TN may or may not already exist in the system; will be assigned automatically to either/both as needed.<br />
                                        <b>Not Implemented</b></td>
                                    </tr>
                                    <tr>
                                        <td><b>""</b>(empty string)</td>
                                        <td>TN must already be available for use; no assignment will be performed.</td>
                                    </tr>
                                </tbody>
                                </table>
                                Omitted tnRoutine parameter is same as ""(empty string) tnRoutine value.
                            </td>
                        </tr>
                        <tr>
                            <td>phoneNumber</td>
                            <td>no</td>
                            <td></td>
                            <td>
                                Alternate phone number.<br/>
                                Must be E.164 formatted, e.g. +1-2005553001 (the dash is required, after the country code).<br/>
                                Accepts also null value. Submitting null will erase phone number in the alternate number entry specified with "id".
                            </td>
                        </tr>
                        <tr>
                            <td>extension</td>
                            <td>no</td>
                            <td></td>
                            <td>
                                Alternate extension.<br/>
                                Accepts also null value. Submitting null will erase extension in the alternate number entry specified with "id".
                            </td>
                        </tr>
                        <tr>
                            <td>rignPattern</td>
                            <td>no</td>
                            <td></td>
                            <td>
                                Ring pattern.<br/>Allowed values: [ null, "Normal", "Long-Long", "Short-Short-Long", "Short-Long-Short" ]. Null is equal to Normal.<br/>
                                <b>Note:</b> Ring pattern does not have meaning when phone number and extension are both empty, and will be ignored in this case.
                            </td>
                        </tr>
                    </tbody>
                </table>
            </td>
        </tr>
    </tbody>
</table>

PUT /users/{+userId}/services/Alternate%20Numbers
> Content-Type: application/json
{
    "distinctiveRing": false,
    "alternateNumbers": [
        {
            "id": 1,
            "phoneNumber": "+1-4125553000",
            "extension": "3000",
            "ringPattern": "Long-Long" 
        }, 
        {
            "id": 5, 
            "extension": "3005",
            "ringPattern": "Long-Long" 
        }
    ]
}
< 204
< Transaction-Id: 1380080943120
+++++
< 424
< Transaction-Id: 1380080943120
< Content-Type: application/json
{
    "errorCode": "EXTERNAL_API_ERROR",
    "externalErrorCode": null,
    "externalErrorSummary": "Error modifying user: JohnDoe.",
    "externalErrorDetail": "User Modify Failed. Alternate Numbers pre-validation error:Error updating service: Alternate Numbers. User [JohnDoe] does not have Alternate Numbers service assigned."
}

Update a BroadWorks User's Intercept User service settings. <br />
In current implementation, services are updated on BroadWorks user using LWS-SOAP UserModifyRequest API call.<br />
Process name: Modify User Intercept User (VoIP Entity)<br />
Rollback-enabled: No

##URI Template Parameters

<table border=1>
    <thead>
    <th>Parameter</th>
    <th>Required?</th>
    <th>Default</th>
    <th>Description</th>
    </thead>
    <tbody>
        <tr>
            <td>userId</td>
            <td style="text-align: center; font-weight:bold">yes</td>
            <td>n/a</td>
            <td>Loki Server userId (server-generated) of the user whose Intercept User service will be updated.</td>
        </tr>
    </tbody>
</table>

##Request Properties##
Note: See the JSON Schema (**link TBD) for data types, format, length restrictions, etc.

<table border=1>
    <thead>
    <th>Property</th>
    <th>Required?</th>
    <th>Default</th>
    <th>Description</th>
    </thead>
    <tbody>
        <tr>
            <td>isActive</td>
            <td style="text-align: center; font-weight:bold">no</td>
            <td>n/a</td>
            <td>On/Off</td>
        </tr>
        <tr>
            <td>playNewPhoneNumber</td>
            <td style="text-align: center; font-weight:bold">no</td>
            <td>n/a</td>
            <td>Container for playNewPhoneNumber settings. Details of the playNewPhoneNumber properties:
                <table border=1>
                    <thead>
                        <th>Property</th>
                        <th>Required?</th>
                        <th>Default</th>
                        <th>Description</th>
                    </thead>
                    <tbody>
                        <tr>
                            <td>enabled</td>
                            <td>no</td>
                            <td>n/a</td>
                            <td>On/Off. Play new phone number</td>
                        </tr>
                        <tr>
                            <td>phoneNumber</td>
                            <td>no</td>
                            <td>n/a</td>
                            <td>New phone number that will be played if playNewPhoneNumber.enabled is true</td>
                        </tr>
                    </tbody>
                </table>
            </td>
        </tr>
        <tr>
            <td>transferOnZeroToPhoneNumber</td>
            <td style="text-align: center; font-weight:bold">no</td>
            <td>n/a</td>
            <td>Container for transferOnZeroToPhoneNumber settings. Details of the transferOnZeroToPhoneNumber properties:
                <table border=1>
                    <thead>
                        <th>Property</th>
                        <th>Required?</th>
                        <th>Default</th>
                        <th>Description</th>
                    </thead>
                    <tbody>
                        <tr>
                            <td>enabled</td>
                            <td>no</td>
                            <td>n/a</td>
                            <td>On/Off. Transfer to transferOnZeroToPhoneNumber.phoneNumber</td>
                        </tr>
                        <tr>
                            <td>phoneNumber</td>
                            <td>no</td>
                            <td>n/a</td>
                            <td>Phone number to be transferred to when transferOnZeroToPhoneNumber.enabled is true</td>
                        </tr>
                    </tbody>
                </table>
            </td>
        </tr>
        <tr>
            <td>routeToVoiceMail</td>
            <td style="text-align: center; font-weight:bold">no</td>
            <td>n/a</td>
            <td>On/Off. Route to voice mail.</td>
        </tr>
        <tr>
            <td>announcementSelection</td>
            <td style="text-align: center; font-weight:bold">no</td>
            <td>n/a</td>
            <td>Announcement Selection, Default or Personal.<br />
            <b>Not Implemented.</b>
            </td>
        </tr>
        <tr>
            <td>audioFile</td>
            <td style="text-align: center; font-weight:bold">no</td>
            <td>n/a</td>
            <td>Container for audio file settings.<br /><b>Not Implemented.</b><br />
                Details of the audio file properties:
                <table border=1>
                    <thead>
                        <th>Property</th>
                        <th>Required?</th>
                        <th>Default</th>
                        <th>Description</th>
                    </thead>
                    <tbody>
                        <tr>
                            <td>description</td>
                            <td>yes</td>
                            <td>n/a</td>
                            <td>Description</td>
                        </tr>
                        <tr>
                            <td>mediaType</td>
                            <td>yes</td>
                            <td>n/a</td>
                            <td>Audio file type</td>
                        </tr>
                        <tr>
                            <td>sourceFileName</td>
                            <td>(varies)</td>
                            <td>n/a</td>
                            <td>Name of the audio file. Must not be present if "audioFile.content" is present.</td>
                        </tr>
                        <tr>
                            <td>content</td>
                            <td>(varies)</td>
                            <td>n/a</td>
                            <td>File contents. Must not be present if "audioFile.sourceFileName" is present.</td>
                        </tr>
                    </tbody>
                </table>
            </td>
        </tr>
        <tr>
            <td>videoFile</td>
            <td style="text-align: center; font-weight:bold">no</td>
            <td>n/a</td>
            <td>Container for video file settings.<br /><b>Not Implemented.</b><br />
                Details of the video file properties:
                <table border=1>
                    <thead>
                        <th>Property</th>
                        <th>Required?</th>
                        <th>Default</th>
                        <th>Description</th>
                    </thead>
                    <tbody>
                        <tr>
                            <td>description</td>
                            <td>yes</td>
                            <td>n/a</td>
                            <td>Description</td>
                        </tr>
                        <tr>
                            <td>mediaType</td>
                            <td>yes</td>
                            <td>n/a</td>
                            <td>Video file type</td>
                        </tr>
                        <tr>
                            <td>sourceFileName</td>
                            <td>(varies)</td>
                            <td>n/a</td>
                            <td>Name of the video file. Must not be present if "videoFile.content" is present.</td>
                        </tr>
                        <tr>
                            <td>content</td>
                            <td>(varies)</td>
                            <td>n/a</td>
                            <td>File contents. Must not be present if "videoFile.sourceFileName" is present.</td>
                        </tr>
                    </tbody>
                </table>
            </td>
        </tr>
        <tr>
            <td>outboundReroutePhoneNumber</td>
            <td style="text-align: center; font-weight:bold">no</td>
            <td>n/a</td>
            <td>Container for outboundReroutePhoneNumber settings.<br /><b>Not Implemented.</b><br />
            Details of the outboundReroutePhoneNumber properties:
                <table border=1>
                    <thead>
                        <th>Property</th>
                        <th>Required?</th>
                        <th>Default</th>
                        <th>Description</th>
                    </thead>
                    <tbody>
                        <tr>
                            <td>enabled</td>
                            <td>no</td>
                            <td>n/a</td>
                            <td>On/Off. Reroute outbound calls.</td>
                        </tr>
                        <tr>
                            <td>phoneNumber</td>
                            <td>no</td>
                            <td>n/a</td>
                            <td>Phone number to reroute to when outboundReroutePhoneNumber.enabled is true.</td>
                        </tr>
                    </tbody>
                </table>
            </td>
        </tr>
        <tr>
            <td>allowOutboundLocalCalls</td>
            <td style="text-align: center; font-weight:bold">no</td>
            <td>n/a</td>
            <td>On/Off.<br />
            <b>Not Implemented.</b>
            </td>
        </tr>
        <tr>
            <td>inboundCallMode</td>
            <td style="text-align: center; font-weight:bold">no</td>
            <td>n/a</td>
            <td>The type of inbound calls to Intercept or allow.<br />
            <b>Not Implemented.</b>
            </td>
        </tr>
        <tr>
            <td>alternateBlockingAnnouncement</td>
            <td style="text-align: center; font-weight:bold">no</td>
            <td>n/a</td>
            <td>On/Off.<br />
            <b>Not Implemented.</b>
            </td>
        </tr>
    </tbody>
</table>

PUT /users/{+userId}/services/Intercept%20User
> Content-Type: application/json
{
    "isActive": true,
    "playNewPhoneNumber": {
        "enabled" : true,
        "phoneNumber" : "+1-4433049876"
    },
    "transferOnZeroToPhoneNumber": {
      	"enabled" : true,
      	"phoneNumber" : "+1-4433049877"
    },
  	"routeToVoiceMail": true
}
< 204
< Transaction-Id: 1380080943120
+++++
< 424
< Transaction-Id: 1380080943120
< Content-Type: application/json
{
    "errorCode": "EXTERNAL_API_ERROR",
    "externalErrorCode": null,
    "externalErrorSummary": "Error modifying user: JohnDoe.",
    "externalErrorDetail": "User Modify Failed. Intercept User pre-validation error:Error updating service: Intercept User. User [JohnDoe] does not have Intercept User service assigned."
}

--
VoIP Site Auto Attendant
##Collection

Supported network elements:

* LWS-SOAP
* BroadWorks Application Server

Keys:

* autoAttendantId

Extension Keys:

* (none)
--

Create a new VoIP Auto Attendant.<br />
Process name: Create Auto Attendant (VoIP Entity)<br />
Rollback-enabled: No

##URI Query Parameters

<table border=1>
    <thead>
    <th>Parameter</th>
    <th>Required?</th>
    <th>Description</th>
    </thead>
    <tbody>
        <tr>
            <td>mode</td>
            <td style="text-align: center; font-weight:bold">yes</td>
            <td>Controls execution mode.<br />
            Allowed values: [ "prevalidate-only", "prevalidate-and-create", "create-only" ].<br />
            <b>NOTE: at this time only "create-only" (attempts to create the resource, with no pre-validation) is allowed.</b>
            </td>
        </tr>
    </tbody>
</table>

##Request Properties

Note: See the JSON Schema (**link TBD) for data types, format, length restrictions, etc.

<table border=1>
    <thead>
    <th>Property</th>
    <th>Required?</th>
    <th>Default</th>
    <th>Description</th>
    </thead>
    <tbody>
        <tr>
            <td>customerId</td>
            <td style="text-align: center; font-weight:bold">no</td>
            <td>n/a</td>
            <td>Loki Server customerId (server-generated) of the Customer in which the new VoIP Auto Attendant is to be created.
            In a default configuration (where a VoIP Auto Attendant is composed of BroadWorks entities only),
            this property can be omitted if extensions.broadworks.serviceProviderId is populated.</td>
        </tr>
        <tr>
            <td>siteId</td>
            <td style="text-align: center; font-weight:bold">no</td>
            <td>n/a</td>
            <td>Loki Server siteId (server-generated) of the Site in which the new VoIP Auto Attendant is to be created.
            In a default configuration (where a VoIP Auto Attendant is composed of BroadWorks entities only),
            this property can be omitted if extensions.broadworks.groupId is populated.</td>
        </tr>
        <tr>
            <td>profile</td>
            <td style="text-align: center; font-weight:bold">yes</td>
            <td>n/a</td>
            <td>
                Container for Profile information.<br />
                Details of the Profile properties:
                <table border=1>
                    <thead>
                    <th>Property</th>
                    <th>Required?</th>
                    <th>Default</th>
                    <th>Description</th>
                    </thead>
                    <tbody>
                        <tr>
                            <td>name</td>
                            <td style="text-align: center;">yes</td>
                            <td>n/a</td>
                            <td>Name</td>
                        </tr>
                        <tr>
                            <td>callingLineId</td>
                            <td style="text-align: center;">no</td>
                            <td>n/a</td>
                            <td>
                                Container for Calling Line ID information.<br />
                                <b>Not Implemented</b><br />
                                Details of the Calling Line ID properties:
                                <table border=1>
                                    <thead>
                                    <th>Property</th>
                                    <th>Required?</th>
                                    <th>Default</th>
                                    <th>Description</th>
                                    </thead>
                                    <tbody>
                                        <tr>
                                            <td>firstName</td>
                                            <td style="text-align: center; font-weight:bold">no</td>
                                            <td>n/a</td>
                                            <td>Calling Line ID First Name.<br /> 
                                            In initial implementation will be copied from the profile.name.</td>
                                        </tr>
                                        <tr>
                                            <td>lastName</td>
                                            <td style="text-align: center; font-weight:bold">no</td>
                                            <td>n/a</td>
                                            <td>Calling Line ID Last Name.<br /> 
                                            In initial implementation will be copied from the profile.name.</td>
                                        </tr>
                                        <tr>
                                            <td>phoneNumber</td>
                                            <td style="text-align: center; font-weight:bold">no</td>
                                            <td>n/a</td>
                                            <td>Calling Line ID Phone Number.</td>
                                        </tr>
                                    </tbody>
                                </table>
                            </td>
                        </tr>
                        <tr>
                            <td>phoneNumber</td>
                            <td style="text-align: center;">no</td>
                            <td>n/a</td>
                            <td>Phone Number.</td>
                        </tr>
                        <tr>
                            <td>tnRoutine</td>
                            <td style="text-align: center;">no</td>
                            <td>"" (empty string)</td>
                            <td>Phone Number (TN) assignment routine.<br />
                            Supported values and impact on other required properties:
                            <table border=1>
                            <thead>
                                <th>tnRoutine</th>
                                <th>Description</th>
                            </thead>
                            <tbody>
                            <tr>
                                <td><b>port-no-temp</b></td>
                                <td>TN does not exist in the system; will attempt to assign at both the Customer and Site levels.</td>
                            </tr>
                            <tr>
                                <td><b>auto</b></td>
                                <td>TN may or may not already exist in the system; will be assigned automatically to either/both as needed.<br />
                                <b>Not Implemented</b></td>
                            </tr>
                            <tr>
                                <td><b>no-number</b></td>
                                <td>TN will not be assigned automatically.</td>
                            </tr>
                            <tr>
                                <td><b>""</b>(empty string)</td>
                                <td>TN will not be assigned automatically.</td>
                            </tr>
                            </tbody>
                            </table></td>
                        </tr>
                        <tr>
                            <td>extension</td>
                            <td style="text-align: center;">no</td>
                            <td>n/a</td>
                            <td>Extension.</td>
                        </tr>
                        <tr>
                            <td>password</td>
                            <td style="text-align: center;">no</td>
                            <td>n/a</td>
                            <td>Password.<br />
                            <b>Not Implemented</b></td>
                        </tr>
                        <tr>
                            <td>department</td>
                            <td style="text-align: center;">no</td>
                            <td>n/a</td>
                            <td>Department.<br />
                            <b>Not Implemented</b></td>
                        </tr>
                        <tr>
                            <td>language</td>
                            <td style="text-align: center;">no</td>
                            <td>n/a</td>
                            <td>Language.</td>
                        </tr>
                        <tr>
                            <td>timeZone</td>
                            <td style="text-align: center;">no</td>
                            <td>n/a</td>
                            <td>Time Zone expressed as a Zone Name from the IANA Time Zone Database, e.g. "America/New_York".</td>
                        </tr>
                        <tr>
                            <td>alias</td>
                            <td style="text-align: center;">no</td>
                            <td>n/a</td>
                            <td>List of possible SIP URIs aliases of the Virtual User.<br />
                            <b>Not Implemented</b></td>
                        </tr>
                        <tr>
                            <td>publicServiceIdentity</td>
                            <td style="text-align: center;">no</td>
                            <td>n/a</td>
                            <td>Public User Identity SIP URI for the Virtual User.<br />
                            <b>Not Implemented</b></td>
                        </tr>
                    </tbody>
                </table>
            </td>
        </tr>
        <tr>
            <td>type</td>
            <td style="text-align: center; font-weight:bold">no</td>
            <td>Basic</td>
            <td>The type of the Auto Attendant. Allowed values: "Basic", "Standard".</td>
        </tr>
        <tr>
            <td>firstDigitTimeoutSeconds</td>
            <td style="text-align: center; font-weight:bold">no</td>
            <td>n/a</td>
            <td>Time allowed for initial user input to Auto Attendant main menu.<br />
            <b>Not Implemented</b></td>
        </tr>
        <tr>
            <td>enableVideo</td>
            <td style="text-align: center; font-weight:bold">no</td>
            <td>false</td>
            <td><b>Not Implemented</b></td>
        </tr>
        <tr>
            <td>businessHours</td>
            <td style="text-align: center; font-weight:bold">no</td>
            <td>n/a</td>
            <td>
                Container for business hours settings.<br />
                <b>Not Implemented</b><br />
                Details of the business hours properties:
                <table border=1>
                    <thead>
                    <th>Property</th>
                    <th>Required?</th>
                    <th>Default</th>
                    <th>Description</th>
                    </thead>
                    <tbody>
                        <tr>
                            <td>type</td>
                            <td style="text-align: center; font-weight:bold">yes</td>
                            <td>n/a</td>
                            <td>Schedule access level.</td>
                        </tr>
                        <tr>
                            <td>name</td>
                            <td style="text-align: center; font-weight:bold">yes</td>
                            <td>n/a</td>
                            <td>Schedule name.</td>
                        </tr>
                    </tbody>
                </table>
            </td>
        </tr>
        <tr>
            <td>holidaySchedule</td>
            <td style="text-align: center; font-weight:bold">no</td>
            <td>n/a</td>
            <td>
                Container for holiday schedule settings.<br />
                <b>Not Implemented</b><br />
                Details of the holiday schedule properties:
                <table border=1>
                    <thead>
                    <th>Property</th>
                    <th>Required?</th>
                    <th>Default</th>
                    <th>Description</th>
                    </thead>
                    <tbody>
                        <tr>
                            <td>type</td>
                            <td style="text-align: center; font-weight:bold">yes</td>
                            <td>n/a</td>
                            <td>Schedule access level.</td>
                        </tr>
                        <tr>
                            <td>name</td>
                            <td style="text-align: center; font-weight:bold">yes</td>
                            <td>n/a</td>
                            <td>Schedule name.</td>
                        </tr>
                    </tbody>
                </table>
            </td>
        </tr>
        <tr>
            <td>extensionDialingScope</td>
            <td style="text-align: center; font-weight:bold">no</td>
            <td>Group</td>
            <td>The scope of extension or name dialing.<br />
            <b>Not Implemented</b></td>
        </tr>
        <tr>
            <td>nameDialingScope</td>
            <td style="text-align: center; font-weight:bold">no</td>
            <td>Group</td>
            <td>The name of dialing scope.<br />
            <b>Not Implemented</b></td>
        </tr>
        <tr>
            <td>nameDialingEntries</td>
            <td style="text-align: center; font-weight:bold">no</td>
            <td>LastName + FirstName</td>
            <td>The format callers should use when dialing by name.<br />
            <b>Not Implemented</b></td>
        </tr>
        <tr>
            <td>businessHoursMenu</td>
            <td style="text-align: center; font-weight:bold">no</td>
            <td>n/a</td>
            <td>The configuration of the automated receptionist greeting prompt and dialing menu to be used during business hours.<br />
            <b>Not Implemented</b></td>
        </tr>
        <tr>
            <td>afterHoursMenu</td>
            <td style="text-align: center; font-weight:bold">no</td>
            <td>n/a</td>
            <td>The configuration of the automated receptionist greeting prompt and dialing menu to be used after business hours.<br />
            <b>Not Implemented</b></td>
        </tr>
        <tr>
            <td>holidayMenu</td>
            <td style="text-align: center; font-weight:bold">no</td>
            <td>n/a</td>
            <td>The configuration of the automated receptionist greeting prompt and dialing menu to be used during the holiday.<br />
            Note: This element is valid only for Standard Auto Attendands.<br />
            <b>Not Implemented</b></td>
        </tr>
        <tr>
            <td>networkClassOfService</td>
            <td style="text-align: center; font-weight:bold">no</td>
            <td>n/a</td>
            <td>Network Class of Service name.<br />
            <b>Not Implemented</b></td>
        </tr>
        <tr>
            <td>services</td>
            <td style="text-align: center; font-weight:bold">no</td>
            <td>n/a</td>
	        <td>Container for list of services and their configuration settings to be assigned to the virtual user.<br />
            Note: Initial release does not support service configuration.<br />
	        To assign a service without doing any configuration, set the value to an empty object, e.g.
	        <code>"services" : { "Remote Office" : { } }</code>.<br />
            </td>
        </tr>
        <tr>
            <td>extensions</td>
            <td style="text-align: center; font-weight:bold">no</td>
            <td>n/a</td>
            <td>Container for network-element specific properties</td>
        </tr>
        <tr>
            <td>extensions.broadworks</td>
            <td style="text-align: center; font-weight:bold">no</td>
            <td>n/a</td>
            <td>
                Container for BroadWorks-specific properties.<br />
                Details of the BroadWorks-specific properties:
                <table border=1>
                    <thead>
                    <th>Property</th>
                    <th>Required?</th>
                    <th>Default</th>
                    <th>Description</th>
                    </thead>
                    <tbody>
                        <tr>
                            <td>serviceProviderId</td>
                            <td style="text-align: center; font-weight:bold">no</td>
                            <td>n/a</td>
                            <td>ID of the BroadWorks service provider or enterprse in which the underlying BroadWorks Virtual User is to be created.
                            In a default configuration (where a VoIP Virtual User is composed of BroadWorks entities only),
                            this property can be used instead of customerId (eliminating the need to know the server-generated customerId
                            prior to placing this request).</td>
                        </tr>
                        <tr>
                            <td>groupId</td>
                            <td style="text-align: center; font-weight:bold">no</td>
                            <td>n/a</td>
                            <td>ID of the BroadWorks group in which the underlying BroadWorks Virtual User is to be created.
                            In a default configuration (where a VoIP Virtual User is composed of BroadWorks entities only),
                            this property can be used instead of customerId (eliminating the need to know the server-generated customerId
                            prior to placing this request).
                            </td>
                        </tr>
                        <tr>
                            <td>resourceId</td>
                            <td style="text-align: center; font-weight:bold">no</td>
                            <td>n/a</td>
                            <td>The ID to be set on the new virtual user. If it is omitted then the userId of the virtual user will be auto-generated.</td>
                        </tr>
                    </tbody>
                </table>
            </td>
        </tr>
    </tbody>
</table>

##Response Properties - 201 Created

Note: The Create Auto Attendant process will return a 502 response when LWS-SOAP is misconfigured ("enhancedLwsSoapResponsesEnable" config parameter is set to false).<br />
For the Create Auto Attendant process besides the properties listed in the table below, the response also contains the normal HAL _links and curies properties.

<table border=1>
    <thead>
    <th>Property</th>
    <th>Mandatory</th>
    <th>Description</th>
    </thead>
    <tbody>
        <tr>
            <td>autoAttendantId</td>
            <td style="text-align: center; font-weight:bold">yes</td>
            <td>The Loki Server ID of the new Auto Attendant user.</td>
        </tr>
        <tr>
            <td>profile</td>
            <td style="text-align: center; font-weight:bold">yes</td>
            <td>
                Container for Profile information.<br />
                Details of the Profile properties:
                <table border=1>
                    <thead>
                    <th>Property</th>
                    <th>Mandatory</th>
                    <th>Description</th>
                    </thead>
                    <tbody>
                        <tr>
                            <td>callingLineId</td>
                            <td style="text-align: center; font-weight:bold">yes</td>
                            <td>
                                Container for Calling Line ID information.<br />
                                Details of the Calling Line ID properties:
                                <table border=1>
                                    <thead>
                                    <th>Property</th>
                                    <th>Mandatory</th>
                                    <th>Description</th>
                                    </thead>
                                    <tbody>
                                        <tr>
                                            <td>firstName</td>
                                            <td style="text-align: center; font-weight:bold">yes</td>
                                            <td>Calling Line ID First Name.<br /> 
                                            In initial implementation will be copied from the profile.name.</td>
                                        </tr>
                                        <tr>
                                            <td>lastName</td>
                                            <td style="text-align: center; font-weight:bold">yes</td>
                                            <td>Calling Line ID Last Name.<br /> 
                                            In initial implementation will be copied from the profile.name.</td>
                                        </tr>
                                    </tbody>
                                </table>
                            </td>
                        </tr>
                        <tr>
                            <td>extension</td>
                            <td style="text-align: center; font-weight:bold">no</td>
                            <td>Extension.</td>
                        </tr>
                        <tr>
                            <td>publicServiceIdentity</td>
                            <td style="text-align: center; font-weight:bold">no</td>
                            <td>Public User Identity SIP URI for the Virtual User.</td>
                        </tr>
                    </tbody>
                </table>
            </td>
        </tr>
        <tr>
            <td>extensions</td>
            <td style="text-align: center; font-weight:bold">yes</td>
            <td>Container for network-element specific properties</td>
        </tr>
        <tr>
            <td>extensions.broadworks</td>
            <td style="text-align: center; font-weight:bold">yes</td>
            <td>
                Container for BroadWorks-specific properties.<br />
                Details of the BroadWorks-specific properties:
                <table border=1>
                    <thead>
                    <th>Property</th>
                    <th>Mandatory</th>
                    <th>Description</th>
                    </thead>
                    <tbody>
                        <tr>
                            <td>resourceId</td>
                            <td style="text-align: center; font-weight:bold">yes</td>
                            <td>The ID set on the new virtual user.</td>
                        </tr>
                    </tbody>
                </table>
            </td>
        </tr>
    </tbody>
</table>

POST /auto-attendants{?mode}
> Content-Type: application/json
{
    "customerId": "Example Com",
    "siteId": "Example Com - North",
    "extensions": {
        "broadworks": {
            "resourceId": "5551239876@example.com"
        }
    },
    "profile": {
        "name": "My Auto Attendant",
        "phoneNumber": "+1-5551239876",
        "extension": "9876",
        "language": "English",
        "timeZone": " America/New_York"
    },
    "type": "Standard",
    "services": {
        "Alternate Numbers": {},
        "Basic Call Logs": {}
    }
}
< 201
< Location: http://lokiserver.example.com/loki/auto-attendants/5551239876%40example.com
< Transaction-Id: 1380080943120
< Content-Type: application/hal+json
{
    "_links": {
        "self": {
            "href": "http://lokiserver.example.com/loki/auto-attendants/5551239876%40example.com"
        }
    },
    "curies": [
        {
            "name": "ls",
            "href": "http://lokiserver.apiary.io/loki/rels/{rel}",
            "templated": true
        }
    ],
    "autoAttendantId": "5551239876@example.com",
    "profile": {
        "callingLineId" : {
            "lastName": "My Auto Attendant",
            "firstName": "My Auto Attendant"
        },
        "publicServiceIdentity": "5551239876@example.com",
        "extension": "9876"
    },   
    "extensions" : {
        "broadworks": {
            "resourceId": "5551239876@example.com"
        }
    }
}
+++++
< 422
< Transaction-Id: 1380080943120
< Content-Type: application/json
{
    "errorCode": "SEMANTIC_ERROR",
    "summary": "The server was unable to process your request",
    "detail": "Either customerId or extensions.broadworks.serviceProviderId is required when creating a VoIP Auto Attendant.Either siteId or extensions.broadworks.groupId is required when creating a VoIP Auto Attendant."
}
+++++
< 502
< Transaction-Id: 1380080943120
< Content-Type: application/json
{
    "errorCode": "EXTERNAL_API_SERVER_ERROR",
    "summary": "Unexpected response from remote API",
    "detail": "LWS-SOAP: Received unexpected response: 'SuccessResponse'"
}

Delete a VoIP Auto Attendant.<br />
Process name: Delete Auto Attendant (VoIP Entity)<br />
Rollback-enabled: No

##URI Template Parameters

<table border=1>
    <thead>
    <th>Parameter</th>
    <th>Required?</th>
    <th>Default</th>
    <th>Description</th>
    </thead>
    <tbody>
        <tr>
            <td>autoAttendantId</td>
            <td style="text-align: center; font-weight:bold">yes</td>
            <td>n/a</td>
            <td>Loki Server autoAttendantId (server-generated) of the Auto Attendant to be deleted.</td>
        </tr>
    </tbody>
</table>

DELETE /auto-attendants/{+autoAttendantId}
< 204
< Transaction-Id: 1380080943120
+++++
< 424
< Transaction-Id: 1380080943120
< Content-Type: application/json
{
    "errorCode": "EXTERNAL_API_ERROR",
    "externalErrorCode": "4008",
    "externalErrorSummary": "Error",
    "externalErrorDetail": "[Error 4008] User not found: autoAttendantTest"
}

--
VoIP Site Hunt Group
##Collection

Supported network elements:

* LWS-SOAP
* BroadWorks Application Server

Keys:

* huntGroupId

Extension Keys:

* (none)
--

Create a new VoIP Hunt Group.<br />
Process name: Create Hunt Group (VoIP Entity)<br />
Rollback-enabled: No

##URI Query Parameters

<table border=1>
    <thead>
    <th>Parameter</th>
    <th>Required?</th>
    <th>Description</th>
    </thead>
    <tbody>
        <tr>
            <td>mode</td>
            <td style="text-align: center; font-weight:bold">yes</td>
            <td>Controls execution mode.<br />
            Allowed values: [ "prevalidate-only", "prevalidate-and-create", "create-only" ].<br />
            <b>NOTE: at this time only "create-only" (attempts to create the resource, with no pre-validation) is allowed.</b>
            </td>
        </tr>
    </tbody>
</table>

##Request Properties

Note: See the JSON Schema (**link TBD) for data types, format, length restrictions, etc.

<table border=1>
    <thead>
    <th>Property</th>
    <th>Required?</th>
    <th>Default</th>
    <th>Description</th>
    </thead>
    <tbody>
        <tr>
            <td>customerId</td>
            <td style="text-align: center; font-weight:bold">no</td>
            <td>n/a</td>
            <td>Loki Server customerId (server-generated) of the Customer in which the new VoIP Hunt Group is to be created.
            In a default configuration (where a VoIP Hunt Group is composed of BroadWorks entities only),
            this property can be omitted if extensions.broadworks.serviceProviderId is populated.</td>
        </tr>
        <tr>
            <td>siteId</td>
            <td style="text-align: center; font-weight:bold">no</td>
            <td>n/a</td>
            <td>Loki Server siteId (server-generated) of the Site in which the new VoIP Hunt Group is to be created.
            In a default configuration (where a VoIP Hunt Group is composed of BroadWorks entities only),
            this property can be omitted if extensions.broadworks.groupId is populated.</td>
        </tr>
        <tr>
            <td>profile</td>
            <td style="text-align: center; font-weight:bold">yes</td>
            <td>n/a</td>
            <td>
                Container for Profile information.<br />
                Details of the Profile properties:
                <table border=1>
                    <thead>
                    <th>Property</th>
                    <th>Required?</th>
                    <th>Default</th>
                    <th>Description</th>
                    </thead>
                    <tbody>
                        <tr>
                            <td>name</td>
                            <td style="text-align: center;">yes</td>
                            <td>n/a</td>
                            <td>Name</td>
                        </tr>
                        <tr>
                            <td>callingLineId</td>
                            <td style="text-align: center;">no</td>
                            <td>n/a</td>
                            <td>
                                Container for Calling Line ID information.<br />
                                <b>Not Implemented</b><br />
                                Details of the Calling Line ID properties:
                                <table border=1>
                                    <thead>
                                    <th>Property</th>
                                    <th>Required?</th>
                                    <th>Default</th>
                                    <th>Description</th>
                                    </thead>
                                    <tbody>
                                        <tr>
                                            <td>firstName</td>
                                            <td style="text-align: center; font-weight:bold">no</td>
                                            <td>n/a</td>
                                            <td>Calling Line ID First Name.<br /> 
                                            In initial implementation will be copied from the profile.name.</td>
                                        </tr>
                                        <tr>
                                            <td>lastName</td>
                                            <td style="text-align: center; font-weight:bold">no</td>
                                            <td>n/a</td>
                                            <td>Calling Line ID Last Name.<br /> 
                                            In initial implementation will be copied from the profile.name.</td>
                                        </tr>
                                        <tr>
                                            <td>phoneNumber</td>
                                            <td style="text-align: center; font-weight:bold">no</td>
                                            <td>n/a</td>
                                            <td>Calling Line ID Phone Number.</td>
                                        </tr>
                                    </tbody>
                                </table>
                            </td>
                        </tr>
                        <tr>
                            <td>phoneNumber</td>
                            <td style="text-align: center;">no</td>
                            <td>n/a</td>
                            <td>Phone Number.</td>
                        </tr>
                        <tr>
                            <td>tnRoutine</td>
                            <td style="text-align: center;">no</td>
                            <td>"" (empty string)</td>
                            <td>Phone Number (TN) assignment routine.<br />
                            Supported values and impact on other required properties:
                            <table border=1>
                            <thead>
                                <th>tnRoutine</th>
                                <th>Description</th>
                            </thead>
                            <tbody>
                            <tr>
                                <td><b>port-no-temp</b></td>
                                <td>TN does not exist in the system; will attempt to assign at both the Customer and Site levels.</td>
                            </tr>
                            <tr>
                                <td><b>auto</b></td>
                                <td>TN may or may not already exist in the system; will be assigned automatically to either/both as needed.<br />
                                <b>Not Implemented</b></td>
                            </tr>
                            <tr>
                                <td><b>no-number</b></td>
                                <td>TN will not be assigned automatically.</td>
                            </tr>
                            <tr>
                                <td><b>""</b>(empty string)</td>
                                <td>TN will not be assigned automatically.</td>
                            </tr>
                            </tbody>
                            </table></td>
                        </tr>
                        <tr>
                            <td>extension</td>
                            <td style="text-align: center;">no</td>
                            <td>n/a</td>
                            <td>Extension.</td>
                        </tr>
                        <tr>
                            <td>password</td>
                            <td style="text-align: center;">no</td>
                            <td>n/a</td>
                            <td>Password.<br />
                            <b>Not Implemented</b></td>
                        </tr>
                        <tr>
                            <td>department</td>
                            <td style="text-align: center;">no</td>
                            <td>n/a</td>
                            <td>Department.<br />
                            <b>Not Implemented</b></td>
                        </tr>
                        <tr>
                            <td>language</td>
                            <td style="text-align: center;">no</td>
                            <td>n/a</td>
                            <td>Language.</td>
                        </tr>
                        <tr>
                            <td>timeZone</td>
                            <td style="text-align: center;">no</td>
                            <td>n/a</td>
                            <td>Time Zone expressed as a Zone Name from the IANA Time Zone Database, e.g. "America/New_York".</td>
                        </tr>
                        <tr>
                            <td>alias</td>
                            <td style="text-align: center;">no</td>
                            <td>n/a</td>
                            <td>List of possible SIP URIs aliases of the Virtual User.<br />
                            <b>Not Implemented</b></td>
                        </tr>
                        <tr>
                            <td>publicServiceIdentity</td>
                            <td style="text-align: center;">no</td>
                            <td>n/a</td>
                            <td>Public User Identity SIP URI for the Virtual User.<br />
                            <b>Not Implemented</b></td>
                        </tr>
                    </tbody>
                </table>
            </td>
        </tr>
        <tr>
            <td>policy</td>
            <td style="text-align: center; font-weight:bold">no</td>
            <td>Regular</td>
            <td>Policy for distributing calls within a hunt group.<br />
            <b>Not Implemented</b></td>
        </tr>
        <tr>
            <td>noAnswer</td>
            <td style="text-align: center; font-weight:bold">no</td>
            <td>n/a</td>
            <td>
                Container for No Answer Settings.<br />
                <b>Not Implemented</b><br />
                Details of the No Answer properties:
                <table border=1>
                    <thead>
                    <th>Property</th>
                    <th>Required?</th>
                    <th>Default</th>
                    <th>Description</th>
                    </thead>
                    <tbody>
                        <tr>
                            <td>skipToAgent</td>
                            <td style="text-align: center; font-weight:bold">no</td>
                            <td>false</td>
                            <td>Flag to enable skipping to other agents.Maps to huntAfterNoAnswer in OCI.</td>
                        </tr>
                        <tr>
                            <td>skipToAgentAfterNumberOfRings</td>
                            <td style="text-align: center; font-weight:bold">no</td>
                            <td>5</td>
                            <td>Number of rings to wait for the currently hunted agent to answer before hunting to the next available agent.
                            Maps to NumberOfRings in OCI.</td>
                        </tr>
                        <tr>
                            <td>forwardCallAfterTimeout</td>
                            <td style="text-align: center; font-weight:bold">no</td>
                            <td>false</td>
                            <td>Maps to forwardAfterTimeout in OCI.</td>
                        </tr>
                        <tr>
                            <td>forwardAfterTimeoutSeconds</td>
                            <td style="text-align: center; font-weight:bold">no</td>
                            <td>0</td>
                            <td>Time to wait for any agent to answer before forwarding the caller elsewhere.
                            Maps to forwardTimeoutSeconds in OCI.</td>
                        </tr>
                        <tr>
                            <td>forwardToPhoneNumber</td>
                            <td style="text-align: center; font-weight:bold">no</td>
                            <td>n/a</td>
                            <td>An outgoing phone number or a number meant to be dialed.</td>
                        </tr>
                    </tbody>
                </table>
            </td>
        </tr>
        <tr>
            <td>agentUserId</td>
            <td style="text-align: center; font-weight:bold">no</td>
            <td>n/a</td>
            <td>List of assigned Users to the Hunt Group.<br />
            <b>Not Implemented</b></td>
        </tr>
        <tr>
            <td>allowCallWaitingForAgents</td>
            <td style="text-align: center; font-weight:bold">no</td>
            <td>false</td>
            <td>Allow Call Waiting on agents<br />
            <b>Not Implemented</b></td>
        </tr>
        <tr>
            <td>callingLineIdSettings</td>
            <td style="text-align: center; font-weight:bold">no</td>
            <td>n/a</td>
            <td>
                Container for Calling Line ID settings. Maps to useSystemHuntGroupCLIDSetting in OCI.<br />
                <b>Not Implemented</b><br />
                Details of the Calling Line ID properties:
                <table border=1>
                    <thead>
                    <th>Property</th>
                    <th>Required?</th>
                    <th>Default</th>
                    <th>Description</th>
                    </thead>
                    <tbody>
                        <tr>
                            <td>useCustom</td>
                            <td style="text-align: center; font-weight:bold">no</td>
                            <td>false</td>
                            <td>Use custom settings.</td>
                        </tr>
                        <tr>
                            <td>includeHuntGroupName</td>
                            <td style="text-align: center; font-weight:bold">no</td>
                            <td>true</td>
                            <td>Include the Hunt Group Name in the CLID.
                            Maps to includeHuntGroupNameInCLID in OCI.</td>
                        </tr>
                    </tbody>
                </table>
            </td>
        </tr>
        <tr>
            <td>notReachableSettings</td>
            <td style="text-align: center; font-weight:bold">no</td>
            <td>n/a</td>
            <td>
                Container for Not Reachable Settings.<br />
                <b>Not Implemented</b><br />
                Details of the Not Reachable properties:
                <table border=1>
                    <thead>
                    <th>Property</th>
                    <th>Required?</th>
                    <th>Default</th>
                    <th>Description</th>
                    </thead>
                    <tbody>
                        <tr>
                            <td>enableForwarding</td>
                            <td style="text-align: center; font-weight:bold">no</td>
                            <td>false</td>
                            <td>Enable Call Forwarding Not Reachable.
                            Maps to enableNotReachableForwarding in OCI.</td>
                        </tr>
                        <tr>
                            <td>forwardToPhoneNumber</td>
                            <td style="text-align: center; font-weight:bold">no</td>
                            <td>n/a</td>
                            <td>Phone number to forward when not reachable.
                            Maps to notReachableForwardToPhoneNumber in OCI.</td>
                        </tr>
                        <tr>
                            <td>makeBusyWhenNotReachable</td>
                            <td style="text-align: center; font-weight:bold">no</td>
                            <td>false</td>
                            <td>Make Hunt Group busy when all available agents are not reachable.
                            Maps to makeBusyWhenNotReachable in OCI.</td>
                        </tr>
                    </tbody>
                </table>
            </td>
        </tr>
        <tr>
            <td>allowMembersToControlGroupBusy</td>
            <td style="text-align: center; font-weight:bold">no</td>
            <td>false</td>
            <td>Allow members to control Group Busy.<br />
            <b>Not Implemented</b></td>
        </tr>
        <tr>
            <td>enableGroupBusy</td>
            <td style="text-align: center; font-weight:bold">no</td>
            <td>false</td>
            <td>Allow members to control Group Busy.<br />
            <b>Not Implemented</b></td>
        </tr>
        <tr>
            <td>applyGroupBusyWhenTerminatingToAgent</td>
            <td style="text-align: center; font-weight:bold">no</td>
            <td>n/a</td>
            <td>Apply Group Busy When Terminating Call to Agent<br />
            <b>Not Implemented</b></td>
        </tr>
        <tr>
            <td>networkClassOfService</td>
            <td style="text-align: center; font-weight:bold">no</td>
            <td>n/a</td>
            <td>Network Class of Service name.<br />
            <b>Not Implemented</b></td>
        </tr>
        <tr>
            <td>services</td>
            <td style="text-align: center; font-weight:bold">no</td>
            <td>n/a</td>
	        <td>Container for list of services and their configuration settings to be assigned to the virtual user.<br />
            Note: Initial release does not support service configuration.<br />
	        To assign a service without doing any configuration, set the value to an empty object, e.g.
	        <code>"services" : { "Remote Office" : { } }</code>.<br />
            </td>
        </tr>
        <tr>
            <td>extensions</td>
            <td style="text-align: center; font-weight:bold">no</td>
            <td>n/a</td>
            <td>Container for network-element specific properties</td>
        </tr>
        <tr>
            <td>extensions.broadworks</td>
            <td style="text-align: center; font-weight:bold">no</td>
            <td>n/a</td>
            <td>
                Container for BroadWorks-specific properties.<br />
                Details of the BroadWorks-specific properties:
                <table border=1>
                    <thead>
                    <th>Property</th>
                    <th>Required?</th>
                    <th>Default</th>
                    <th>Description</th>
                    </thead>
                    <tbody>
                        <tr>
                            <td>serviceProviderId</td>
                            <td style="text-align: center; font-weight:bold">no</td>
                            <td>n/a</td>
                            <td>ID of the BroadWorks service provider or enterprse in which the underlying BroadWorks Virtual User is to be created.
                            In a default configuration (where a VoIP Virtual User is composed of BroadWorks entities only),
                            this property can be used instead of customerId (eliminating the need to know the server-generated customerId
                            prior to placing this request).</td>
                        </tr>
                        <tr>
                            <td>groupId</td>
                            <td style="text-align: center; font-weight:bold">no</td>
                            <td>n/a</td>
                            <td>ID of the BroadWorks group in which the underlying BroadWorks Virtual User is to be created.
                            In a default configuration (where a VoIP Virtual User is composed of BroadWorks entities only),
                            this property can be used instead of customerId (eliminating the need to know the server-generated customerId
                            prior to placing this request).
                            </td>
                        </tr>
                        <tr>
                            <td>resourceId</td>
                            <td style="text-align: center; font-weight:bold">no</td>
                            <td>n/a</td>
                            <td>The ID to be set on the new virtual user. If it is omitted then the userId of the virtual user will be auto-generated.</td>
                        </tr>
                    </tbody>
                </table>
            </td>
        </tr>
    </tbody>
</table>

##Response Properties - 201 Created

Note: The Create Hunt Group process will return a 502 response when LWS-SOAP is misconfigured ("enhancedLwsSoapResponsesEnable" config parameter is set to false).<br />
For the Create Hunt Group process besides the properties listed in the table below, the response also contains the normal HAL _links and curies properties.

<table border=1>
    <thead>
    <th>Property</th>
    <th>Mandatory</th>
    <th>Description</th>
    </thead>
    <tbody>
        <tr>
            <td>huntGroupId</td>
            <td style="text-align: center; font-weight:bold">yes</td>
            <td>The Loki Server ID of the new Hunt Group user.</td>
        </tr>
        <tr>
            <td>profile</td>
            <td style="text-align: center; font-weight:bold">yes</td>
            <td>
                Container for Profile information.<br />
                Details of the Profile properties:
                <table border=1>
                    <thead>
                    <th>Property</th>
                    <th>Mandatory</th>
                    <th>Description</th>
                    </thead>
                    <tbody>
                        <tr>
                            <td>callingLineId</td>
                            <td style="text-align: center; font-weight:bold">yes</td>
                            <td>
                                Container for Calling Line ID information.<br />
                                Details of the Calling Line ID properties:
                                <table border=1>
                                    <thead>
                                    <th>Property</th>
                                    <th>Mandatory</th>
                                    <th>Description</th>
                                    </thead>
                                    <tbody>
                                        <tr>
                                            <td>firstName</td>
                                            <td style="text-align: center; font-weight:bold">yes</td>
                                            <td>Calling Line ID First Name.<br /> 
                                            In initial implementation will be copied from the profile.name.</td>
                                        </tr>
                                        <tr>
                                            <td>lastName</td>
                                            <td style="text-align: center; font-weight:bold">yes</td>
                                            <td>Calling Line ID Last Name.<br /> 
                                            In initial implementation will be copied from the profile.name.</td>
                                        </tr>
                                    </tbody>
                                </table>
                            </td>
                        </tr>
                        <tr>
                            <td>extension</td>
                            <td style="text-align: center; font-weight:bold">no</td>
                            <td>Extension.</td>
                        </tr>
                        <tr>
                            <td>publicServiceIdentity</td>
                            <td style="text-align: center; font-weight:bold">no</td>
                            <td>Public User Identity SIP URI for the Virtual User.</td>
                        </tr>
                    </tbody>
                </table>
            </td>
        </tr>
        <tr>
            <td>extensions</td>
            <td style="text-align: center; font-weight:bold">yes</td>
            <td>Container for network-element specific properties</td>
        </tr>
        <tr>
            <td>extensions.broadworks</td>
            <td style="text-align: center; font-weight:bold">yes</td>
            <td>
                Container for BroadWorks-specific properties.<br />
                Details of the BroadWorks-specific properties:
                <table border=1>
                    <thead>
                    <th>Property</th>
                    <th>Mandatory</th>
                    <th>Description</th>
                    </thead>
                    <tbody>
                        <tr>
                            <td>resourceId</td>
                            <td style="text-align: center; font-weight:bold">yes</td>
                            <td>The ID set on the new virtual user.</td>
                        </tr>
                    </tbody>
                </table>
            </td>
        </tr>
    </tbody>
</table>

POST /hunt-groups{?mode}
> Content-Type: application/json
{
    "customerId": "Example Com",
    "siteId": "Example Com - North",
    "extensions": {
        "broadworks": {
            "resourceId": "5551239876@example.com"
        }
    },
    "profile": {
        "name": "My Hunt group",
        "phoneNumber": "+1-5551239876",
        "extension": "9876",
        "language": "English",
        "timeZone": " America/New_York"
    },
    "services": {
        "Alternate Numbers": {},
        "Basic Call Logs": {}
    }
}
< 201
< Location: http://lokiserver.example.com/loki/hunt-groups/5551239876%40example.com
< Transaction-Id: 1380080943120
< Content-Type: application/hal+json
{
    "_links": {
        "self": {
            "href": "http://lokiserver.example.com/loki/hunt-groups/5551239876%40example.com"
        }
    },
    "curies": [
        {
            "name": "ls",
            "href": "http://lokiserver.apiary.io/loki/rels/{rel}",
            "templated": true
        }
    ],
    "huntGroupId": "5551239876@example.com",
    "profile": {
        "callingLineId" : {
            "lastName": "My Hunt group",
            "firstName": "My Hunt group"
        },
        "publicServiceIdentity": "5551239876@example.com",
        "extension": "9876" 
    },    
    "extensions" : {
        "broadworks": {
            "resourceId": "5551239876@example.com"
        }
    }
}
+++++
< 422
< Transaction-Id: 1380080943120
< Content-Type: application/json
{
    "errorCode": "SEMANTIC_ERROR",
    "summary": "The server was unable to process your request",
    "detail": "Either customerId or extensions.broadworks.serviceProviderId is required when creating a VoIP Hunt Group.Either siteId or extensions.broadworks.groupId is required when creating a VoIP Hunt Group."
}
+++++
< 502
< Transaction-Id: 1380080943120
< Content-Type: application/json
{
    "errorCode": "EXTERNAL_API_SERVER_ERROR",
    "summary": "Unexpected response from remote API",
    "detail": "LWS-SOAP: Received unexpected response: 'SuccessResponse'"
}

Delete a VoIP Hunt Group.<br />
Process name: Delete Hunt Group (VoIP Entity)<br />
Rollback-enabled: No

##URI Template Parameters

<table border=1>
    <thead>
    <th>Parameter</th>
    <th>Required?</th>
    <th>Default</th>
    <th>Description</th>
    </thead>
    <tbody>
        <tr>
            <td>huntGroupId</td>
            <td style="text-align: center; font-weight:bold">yes</td>
            <td>n/a</td>
            <td>Loki Server huntGroupId (server-generated) of the Hunt Group to be deleted.</td>
        </tr>
    </tbody>
</table>

DELETE /hunt-groups/{+huntGroupId}
< 204
< Transaction-Id: 1380080943120
+++++
< 424
< Transaction-Id: 1380080943120
< Content-Type: application/json
{
    "errorCode": "EXTERNAL_API_ERROR",
    "externalErrorCode": "4008",
    "externalErrorSummary": "Error",
    "externalErrorDetail": "[Error 4008] User not found: huntGroupTest"
}

--
VoIP Site Call Center
##Collection

Supported network elements:

* LWS-SOAP
* BroadWorks Application Server

Keys:

* callCenterId

Extension Keys:

* (none)
--

Create a new VoIP Call Center.<br />
Process name: Create Call Center (VoIP Entity)<br />
Rollback-enabled: No

##URI Query Parameters

<table border=1>
    <thead>
    <th>Parameter</th>
    <th>Required?</th>
    <th>Description</th>
    </thead>
    <tbody>
        <tr>
            <td>mode</td>
            <td style="text-align: center; font-weight:bold">yes</td>
            <td>Controls execution mode.<br />
            Allowed values: [ "prevalidate-only", "prevalidate-and-create", "create-only" ].<br />
            <b>NOTE: at this time only "create-only" (attempts to create the resource, with no pre-validation) is allowed.</b>
            </td>
        </tr>
    </tbody>
</table>

##Request Properties

Note: See the JSON Schema (**link TBD) for data types, format, length restrictions, etc.

<table border=1>
    <thead>
    <th>Property</th>
    <th>Required?</th>
    <th>Default</th>
    <th>Description</th>
    </thead>
    <tbody>
        <tr>
            <td>customerId</td>
            <td style="text-align: center; font-weight:bold">no</td>
            <td>n/a</td>
            <td>Loki Server customerId (server-generated) of the Customer in which the new VoIP Call Center is to be created.
            In a default configuration (where a VoIP Call Center is composed of BroadWorks entities only),
            this property can be omitted if extensions.broadworks.serviceProviderId is populated.</td>
        </tr>
        <tr>
            <td>siteId</td>
            <td style="text-align: center; font-weight:bold">no</td>
            <td>n/a</td>
            <td>Loki Server siteId (server-generated) of the Site in which the new VoIP Call Center is to be created.
            In a default configuration (where a VoIP Call Center is composed of BroadWorks entities only),
            this property can be omitted if extensions.broadworks.groupId is populated.</td>
        </tr>
        <tr>
            <td>profile</td>
            <td style="text-align: center; font-weight:bold">yes</td>
            <td>n/a</td>
            <td>
                Container for Profile information.<br />
                Details of the Profile properties:
                <table border=1>
                    <thead>
                    <th>Property</th>
                    <th>Required?</th>
                    <th>Default</th>
                    <th>Description</th>
                    </thead>
                    <tbody>
                        <tr>
                            <td>name</td>
                            <td style="text-align: center;">yes</td>
                            <td>n/a</td>
                            <td>Name</td>
                        </tr>
                        <tr>
                            <td>callingLineId</td>
                            <td style="text-align: center;">no</td>
                            <td>n/a</td>
                            <td>
                                Container for Calling Line ID information.<br />
                                <b>Not Implemented</b><br />
                                Details of the Calling Line ID properties:
                                <table border=1>
                                    <thead>
                                    <th>Property</th>
                                    <th>Required?</th>
                                    <th>Default</th>
                                    <th>Description</th>
                                    </thead>
                                    <tbody>
                                        <tr>
                                            <td>firstName</td>
                                            <td style="text-align: center; font-weight:bold">no</td>
                                            <td>n/a</td>
                                            <td>Calling Line ID First Name.<br /> 
                                            In initial implementation will be copied from the profile.name.</td>
                                        </tr>
                                        <tr>
                                            <td>lastName</td>
                                            <td style="text-align: center; font-weight:bold">no</td>
                                            <td>n/a</td>
                                            <td>Calling Line ID Last Name.<br /> 
                                            In initial implementation will be copied from the profile.name.</td>
                                        </tr>
                                        <tr>
                                            <td>phoneNumber</td>
                                            <td style="text-align: center; font-weight:bold">no</td>
                                            <td>n/a</td>
                                            <td>Calling Line ID Phone Number.</td>
                                        </tr>
                                    </tbody>
                                </table>
                            </td>
                        </tr>
                        <tr>
                            <td>phoneNumber</td>
                            <td style="text-align: center;">no</td>
                            <td>n/a</td>
                            <td>Phone Number.</td>
                        </tr>
                        <tr>
                            <td>tnRoutine</td>
                            <td style="text-align: center;">no</td>
                            <td>"" (empty string)</td>
                            <td>Phone Number (TN) assignment routine.<br />
                            Supported values and impact on other required properties:
                            <table border=1>
                            <thead>
                                <th>tnRoutine</th>
                                <th>Description</th>
                            </thead>
                            <tbody>
                            <tr>
                                <td><b>port-no-temp</b></td>
                                <td>TN does not exist in the system; will attempt to assign at both the Customer and Site levels.</td>
                            </tr>
                            <tr>
                                <td><b>auto</b></td>
                                <td>TN may or may not already exist in the system; will be assigned automatically to either/both as needed.<br />
                                <b>Not Implemented</b></td>
                            </tr>
                            <tr>
                                <td><b>no-number</b></td>
                                <td>TN will not be assigned automatically.</td>
                            </tr>
                            <tr>
                                <td><b>""</b>(empty string)</td>
                                <td>TN will not be assigned automatically.</td>
                            </tr>
                            </tbody>
                            </table></td>
                        </tr>
                        <tr>
                            <td>extension</td>
                            <td style="text-align: center;">no</td>
                            <td>n/a</td>
                            <td>Extension.</td>
                        </tr>
                        <tr>
                            <td>password</td>
                            <td style="text-align: center;">no</td>
                            <td>n/a</td>
                            <td>Password.<br />
                            <b>Not Implemented</b></td>
                        </tr>
                        <tr>
                            <td>department</td>
                            <td style="text-align: center;">no</td>
                            <td>n/a</td>
                            <td>Department.<br />
                            <b>Not Implemented</b></td>
                        </tr>
                        <tr>
                            <td>language</td>
                            <td style="text-align: center;">no</td>
                            <td>n/a</td>
                            <td>Language.</td>
                        </tr>
                        <tr>
                            <td>timeZone</td>
                            <td style="text-align: center;">no</td>
                            <td>n/a</td>
                            <td>Time Zone expressed as a Zone Name from the IANA Time Zone Database, e.g. "America/New_York".</td>
                        </tr>
                        <tr>
                            <td>alias</td>
                            <td style="text-align: center;">no</td>
                            <td>n/a</td>
                            <td>List of possible SIP URIs aliases of the Virtual User.<br />
                            <b>Not Implemented</b></td>
                        </tr>
                        <tr>
                            <td>publicServiceIdentity</td>
                            <td style="text-align: center;">no</td>
                            <td>n/a</td>
                            <td>Public User Identity SIP URI for the Virtual User.<br />
                            <b>Not Implemented</b></td>
                        </tr>
                    </tbody>
                </table>
            </td>
        </tr>
        <tr>
            <td>type</td>
            <td style="text-align: center; font-weight:bold">yes</td>
            <td>n/a</td>
            <td>Call center type.</td>
        </tr>
        <tr>
            <td>routingType</td>
            <td style="text-align: center; font-weight:bold">no</td>
            <td>Priority Based</td>
            <td>Call Center Routing type for distributing calls within a call center.
            Note: Applies only to Premium call centers.<br />
            <b>Not Implemented</b></td>
        </tr>
        <tr>
            <td>policy</td>
            <td style="text-align: center; font-weight:bold">no</td>
            <td>Regular</td>
            <td>Policy for distributing calls within a call center.<br />
            <b>Not Implemented</b></td>
        </tr>
        <tr>
            <td>enableReporting</td>
            <td style="text-align: center; font-weight:bold">no</td>
            <td>n/a</td>
            <td>Enable Call Center External Reporting.<br />
            <b>Not Implemented</b></td>
        </tr>
        <tr>
            <td>callCenterSettings</td>
            <td style="text-align: center; font-weight:bold">no</td>
            <td>n/a</td>
            <td>
                Container for Call Center settings.<br />
                <b>Not Implemented</b><br />
                Details of the Call Center properties:
                <table border=1>
                    <thead>
                    <th>Property</th>
                    <th>Required?</th>
                    <th>Default</th>
                    <th>Description</th>
                    </thead>
                    <tbody>
                        <tr>
                            <td>enableVideo</td>
                            <td style="text-align: center; font-weight:bold">no</td>
                            <td>false</td>
                            <td>Enable video.</td>
                        </tr>
                        <tr>
                            <td>queueLength</td>
                            <td style="text-align: center; font-weight:bold">no</td>
                            <td>0</td>
                            <td>The limit for the number of calls the system will keep in queue, waiting for an available agent.</td>
                        </tr>
                        <tr>
                            <td>playRingingWhenOfferingCall</td>
                            <td style="text-align: center; font-weight:bold">no</td>
                            <td>true</td>
                            <td>Play ringing when offering call.</td>
                        </tr>
                        <tr>
                            <td>allowCallerToDialEscapeDigit</td>
                            <td style="text-align: center; font-weight:bold">no</td>
                            <td>false</td>
                            <td>Allow callers to dial a digit to escape.</td>
                        </tr>
                        <tr>
                            <td>escapeDigit</td>
                            <td style="text-align: center; font-weight:bold">no</td>
                            <td>0</td>
                            <td>Digit to press by callers to escape call.</td>
                        </tr>
                        <tr>
                            <td>resetCallStatisticsUponEntryInQueue</td>
                            <td style="text-align: center; font-weight:bold">no</td>
                            <td>false</td>
                            <td>Reset caller statistics upon entry to queue.</td>
                        </tr>
                    </tbody>
                </table>
            </td>
        </tr>
        <tr>
            <td>agentSettings</td>
            <td style="text-align: center; font-weight:bold">no</td>
            <td>n/a</td>
            <td>
                Container for Agent settings.<br />
                <b>Not Implemented</b><br />
                Details of the Agent properties:
                <table border=1>
                    <thead>
                    <th>Property</th>
                    <th>Required?</th>
                    <th>Default</th>
                    <th>Description</th>
                    </thead>
                    <tbody>
                        <tr>
                            <td>allowAgentLogoff</td>
                            <td style="text-align: center; font-weight:bold">no</td>
                            <td>false</td>
                            <td>Allow agents to join Call Centers.</td>
                        </tr>
                        <tr>
                            <td>allowCallWaitingForAgents</td>
                            <td style="text-align: center; font-weight:bold">no</td>
                            <td>false</td>
                            <td>Allow Call Waiting on agents.</td>
                        </tr>
                        <tr>
                            <td>allowCallsToAgentsInWrapUp</td>
                            <td style="text-align: center; font-weight:bold">no</td>
                            <td>false</td>
                            <td>Enable calls to agents in wrap-up state.
                            Note: Applies only for Standard and Premium.</td>
                        </tr>
                        <tr>
                            <td>overrideAgentWrapUpTime</td>
                            <td style="text-align: center; font-weight:bold">no</td>
                            <td>false</td>
                            <td>Enable maximum ACD wrap-up timer.
                            Note: Applies only for Standard and Premium.</td>
                        </tr>
                        <tr>
                            <td>wrapUpSeconds</td>
                            <td style="text-align: center; font-weight:bold">no</td>
                            <td>n/a</td>
                            <td>Wrap up time.
                            Note: Applies only for Standard and Premium.</td>
                        </tr>
                        <tr>
                            <td>enableAutomaticStateChangeForAgents</td>
                            <td style="text-align: center; font-weight:bold">no</td>
                            <td>false</td>
                            <td>Enable automatic agent state
                            Note: Applies only for Standard and Premium.</td>
                        </tr>
                        <tr>
                            <td>agentStateAfterCall</td>
                            <td style="text-align: center; font-weight:bold">no</td>
                            <td>n/a</td>
                            <td>Agent Automatic Call Distribution (ACD) State. States available for Wrap-Up agent state management.
                            Note: Applies only for Standard and Premium.</td>
                        </tr>
                        <tr>
                            <td>forceDeliveryOfCalls</td>
                            <td style="text-align: center; font-weight:bold">no</td>
                            <td>false</td>
                            <td>Enable automatic call answer after a number of seconds
                            Note: Applies only for Premium.</td>
                        </tr>
                        <tr>
                            <td>forceDeliveryWaitTimeSeconds</td>
                            <td style="text-align: center; font-weight:bold">no</td>
                            <td>n/a</td>
                            <td>Number of seconds to automatically answer call if enabled.
                            Note: Applies only for Premium.</td>
                        </tr>
                    </tbody>
                </table>
            </td>
        </tr>
        <tr>
            <td>agentUnavailableCode</td>
            <td style="text-align: center; font-weight:bold">no</td>
            <td>n/a</td>
            <td>Call Center Agent Unavailable Code Value.<br />
            <b>Not Implemented</b></td>
        </tr>
        <tr>
            <td>bandwidthAndQoS</td>
            <td style="text-align: center; font-weight:bold">no</td>
            <td>n/a</td>
            <td>
                Container for Bandwidth and QoS Settings.<br />
                <b>Not Implemented</b><br />
                Details of the Bandwidth and QoS properties:
                <table border=1>
                    <thead>
                    <th>Property</th>
                    <th>Required?</th>
                    <th>Default</th>
                    <th>Description</th>
                    </thead>
                    <tbody>
                        <tr>
                            <td>externalPreferredAudioCodec</td>
                            <td style="text-align: center; font-weight:bold">no</td>
                            <td>None(literally)</td>
                            <td>Preferred announcement / music codec for external calls.</td>
                        </tr>
                        <tr>
                            <td>internalPreferredAudioCodec</td>
                            <td style="text-align: center; font-weight:bold">no</td>
                            <td>None(literally)</td>
                            <td>Preferred announcement / music codec for internal calls.</td>
                        </tr>
                    </tbody>
                </table>
            </td>
        </tr>
        <tr>
            <td>networkClassOfService</td>
            <td style="text-align: center; font-weight:bold">no</td>
            <td>n/a</td>
            <td>Network Class of Service name.<br />
            <b>Not Implemented</b></td>
        </tr>
        <tr>
            <td>services</td>
            <td style="text-align: center; font-weight:bold">no</td>
            <td>n/a</td>
	        <td>Container for list of services and their configuration settings to be assigned to the virtual user.<br />
            Note: Initial release does not support service configuration.<br />
	        To assign a service without doing any configuration, set the value to an empty object, e.g.
	        <code>"services" : { "Remote Office" : { } }</code>.<br />
            </td>
        </tr>
        <tr>
            <td>extensions</td>
            <td style="text-align: center; font-weight:bold">no</td>
            <td>n/a</td>
            <td>Container for network-element specific properties</td>
        </tr>
        <tr>
            <td>extensions.broadworks</td>
            <td style="text-align: center; font-weight:bold">no</td>
            <td>n/a</td>
            <td>
                Container for BroadWorks-specific properties.<br />
                Details of the BroadWorks-specific properties:
                <table border=1>
                    <thead>
                    <th>Property</th>
                    <th>Required?</th>
                    <th>Default</th>
                    <th>Description</th>
                    </thead>
                    <tbody>
                        <tr>
                            <td>serviceProviderId</td>
                            <td style="text-align: center; font-weight:bold">no</td>
                            <td>n/a</td>
                            <td>ID of the BroadWorks service provider or enterprse in which the underlying BroadWorks Virtual User is to be created.
                            In a default configuration (where a VoIP Virtual User is composed of BroadWorks entities only),
                            this property can be used instead of customerId (eliminating the need to know the server-generated customerId
                            prior to placing this request).</td>
                        </tr>
                        <tr>
                            <td>groupId</td>
                            <td style="text-align: center; font-weight:bold">no</td>
                            <td>n/a</td>
                            <td>ID of the BroadWorks group in which the underlying BroadWorks Virtual User is to be created.
                            In a default configuration (where a VoIP Virtual User is composed of BroadWorks entities only),
                            this property can be used instead of customerId (eliminating the need to know the server-generated customerId
                            prior to placing this request).
                            </td>
                        </tr>
                        <tr>
                            <td>resourceId</td>
                            <td style="text-align: center; font-weight:bold">no</td>
                            <td>n/a</td>
                            <td>The ID to be set on the new virtual user. If it is omitted then the userId of the virtual user will be auto-generated.</td>
                        </tr>
                    </tbody>
                </table>
            </td>
        </tr>
    </tbody>
</table>

##Response Properties - 201 Created

For the Create Call Center process besides the properties listed in the table below, the response also contains the normal HAL _links and curies properties.

<table border=1>
    <thead>
    <th>Property</th>
    <th>Mandatory</th>
    <th>Description</th>
    </thead>
    <tbody>
        <tr>
            <td>callCenterId</td>
            <td style="text-align: center; font-weight:bold">yes</td>
            <td>The Loki Server ID of the new Call Center user.</td>
        </tr>
        <tr>
            <td>profile</td>
            <td style="text-align: center; font-weight:bold">yes</td>
            <td>
                Container for Profile information.<br />
                Details of the Profile properties:
                <table border=1>
                    <thead>
                    <th>Property</th>
                    <th>Mandatory</th>
                    <th>Description</th>
                    </thead>
                    <tbody>
                        <tr>
                            <td>callingLineId</td>
                            <td style="text-align: center; font-weight:bold">yes</td>
                            <td>
                                Container for Calling Line ID information.<br />
                                Details of the Calling Line ID properties:
                                <table border=1>
                                    <thead>
                                    <th>Property</th>
                                    <th>Mandatory</th>
                                    <th>Description</th>
                                    </thead>
                                    <tbody>
                                        <tr>
                                            <td>firstName</td>
                                            <td style="text-align: center; font-weight:bold">yes</td>
                                            <td>Calling Line ID First Name.<br /> 
                                            In initial implementation will be copied from the profile.name.</td>
                                        </tr>
                                        <tr>
                                            <td>lastName</td>
                                            <td style="text-align: center; font-weight:bold">yes</td>
                                            <td>Calling Line ID Last Name.<br /> 
                                            In initial implementation will be copied from the profile.name.</td>
                                        </tr>
                                    </tbody>
                                </table>
                            </td>
                        </tr>
                        <tr>
                            <td>extension</td>
                            <td style="text-align: center; font-weight:bold">no</td>
                            <td>Extension.</td>
                        </tr>
                        <tr>
                            <td>publicServiceIdentity</td>
                            <td style="text-align: center; font-weight:bold">no</td>
                            <td>Public User Identity SIP URI for the Virtual User.</td>
                        </tr>
                        <tr>
                            <td>password</td>
                            <td style="text-align: center; font-weight:bold">no</td>
                            <td>Password.</td>
                        </tr>
                    </tbody>
                </table>
            </td>
        </tr>
        <tr>
            <td>policy</td>
            <td style="text-align: center; font-weight:bold">no</td>
            <td>Policy for distributing calls within a call center.</td>
        </tr>
        <tr>
            <td>callCenterSettings</td>
            <td style="text-align: center; font-weight:bold">no</td>
            <td>
                Container for Call Center settings.<br />
                Details of the Call Center properties:
                <table border=1>
                    <thead>
                    <th>Property</th>
                    <th>Mandatory</th>
                    <th>Description</th>
                    </thead>
                    <tbody>
                        <tr>
                            <td>enableVideo</td>
                            <td style="text-align: center; font-weight:bold">no</td>
                            <td>Enable video.</td>
                        </tr>
                        <tr>
                            <td>queueLength</td>
                            <td style="text-align: center; font-weight:bold">no</td>
                            <td>The limit for the number of calls the system will keep in queue, waiting for an available agent.</td>
                        </tr>
                        <tr>
                            <td>playRingingWhenOfferingCall</td>
                            <td style="text-align: center; font-weight:bold">no</td>
                            <td>Play ringing when offering call.</td>
                        </tr>
                        <tr>
                            <td>allowCallerToDialEscapeDigit</td>
                            <td style="text-align: center; font-weight:bold">no</td>
                            <td>Allow callers to dial a digit to escape.</td>
                        </tr>
                        <tr>
                            <td>escapeDigit</td>
                            <td style="text-align: center; font-weight:bold">no</td>
                            <td>Digit to press by callers to escape call.</td>
                        </tr>
                        <tr>
                            <td>resetCallStatisticsUponEntryInQueue</td>
                            <td style="text-align: center; font-weight:bold">no</td>
                            <td>Reset caller statistics upon entry to queue.</td>
                        </tr>
                    </tbody>
                </table>
            </td>
        </tr>
        <tr>
            <td>agentSettings</td>
            <td style="text-align: center; font-weight:bold">no</td>
            <td>
                Container for Agent settings.<br />
                Details of the Agent properties:
                <table border=1>
                    <thead>
                    <th>Property</th>
                    <th>Mandatory</th>
                    <th>Description</th>
                    </thead>
                    <tbody>
                        <tr>
                            <td>allowAgentLogoff</td>
                            <td style="text-align: center; font-weight:bold">no</td>
                            <td>Allow agents to join Call Centers.</td>
                        </tr>
                        <tr>
                            <td>allowCallWaitingForAgents</td>
                            <td style="text-align: center; font-weight:bold">no</td>
                            <td>Allow Call Waiting on agents.</td>
                        </tr>
                        <tr>
                            <td>allowCallsToAgentsInWrapUp</td>
                            <td style="text-align: center; font-weight:bold">no</td>
                            <td>Enable calls to agents in wrap-up state.
                            Note: Applies only for Standard and Premium.</td>
                        </tr>
                        <tr>
                            <td>overrideAgentWrapUpTime</td>
                            <td style="text-align: center; font-weight:bold">no</td>
                            <td>Enable maximum ACD wrap-up timer.
                            Note: Applies only for Standard and Premium.</td>
                        </tr>
                        <tr>
                            <td>forceDeliveryOfCalls</td>
                            <td style="text-align: center; font-weight:bold">no</td>
                            <td>Enable automatic call answer after a number of seconds
                            Note: Applies only for Premium.</td>
                        </tr>
                    </tbody>
                </table>
            </td>
        </tr>
        <tr>
            <td>bandwidthAndQoS</td>
            <td style="text-align: center; font-weight:bold">no</td>
            <td>
                Container for Bandwidth and QoS Settings.<br />
                Details of the Bandwidth and QoS properties:
                <table border=1>
                    <thead>
                    <th>Property</th>
                    <th>Mandatory</th>
                    <th>Description</th>
                    </thead>
                    <tbody>
                        <tr>
                            <td>externalPreferredAudioCodec</td>
                            <td style="text-align: center; font-weight:bold">no</td>
                            <td>Preferred announcement / music codec for external calls.</td>
                        </tr>
                        <tr>
                            <td>internalPreferredAudioCodec</td>
                            <td style="text-align: center; font-weight:bold">no</td>
                            <td>Preferred announcement / music codec for internal calls.</td>
                        </tr>
                    </tbody>
                </table>
            </td>
        </tr>
        <tr>
            <td>extensions</td>
            <td style="text-align: center; font-weight:bold">yes</td>
            <td>Container for network-element specific properties</td>
        </tr>
        <tr>
            <td>extensions.broadworks</td>
            <td style="text-align: center; font-weight:bold">yes</td>
            <td>
                Container for BroadWorks-specific properties.<br />
                Details of the BroadWorks-specific properties:
                <table border=1>
                    <thead>
                    <th>Property</th>
                    <th>Mandatory</th>
                    <th>Description</th>
                    </thead>
                    <tbody>
                        <tr>
                            <td>resourceId</td>
                            <td style="text-align: center; font-weight:bold">yes</td>
                            <td>The ID set on the new virtual user.</td>
                        </tr>
                    </tbody>
                </table>
            </td>
        </tr>
    </tbody>
</table>

POST /call-centers{?mode}
> Content-Type: application/json
{
    "customerId": "Example Com",
    "siteId": "Example Com - North",
    "extensions": {
        "broadworks": {
            "resourceId": "5551239876@example.com"
        }
    },
    "profile": {
        "name": "My Call Center",
        "phoneNumber": "+1-5551239876",
        "extension": "9876",
        "language": "English",
        "timeZone": " America/New_York"
    },
    "services": {
        "Alternate Numbers": {},
        "Basic Call Logs": {}
    }
}
< 201
< Location: http://lokiserver.example.com/loki/call-centers/5551239876%40example.com
< Transaction-Id: 1380080943120
< Content-Type: application/hal+json
{
    "_links": {
        "self": {
            "href": "http://lokiserver.example.com/loki/call-centers/5551239876%40example.com"
        }
    },
    "curies": [
        {
            "name": "ls",
            "href": "http://lokiserver.apiary.io/loki/rels/{rel}",
            "templated": true
        }
    ],
    "callCenterId": "5551239876@example.com",
    "profile": {
        "callingLineId" : {
            "lastName": "My Call Center",
            "firstName": "My Call Center"
        },
        "publicServiceIdentity": "5551239876@example.com",
        "extension": "9876"
    },
    "policy": "Regular",
    "callCenterSettings": {
        "enableVideo": false,
        "queueLength": 0,
        "allowCallerToDialEscapeDigit": true,
        "escapeDigit": 0,
        "playRingingWhenOfferingCall": true
    },
    "agentSettings": {
        "allowAgentLogoff": false,
        "allowCallWaitingForAgents": false
    },
    "bandwidthAndQoS": {
        "externalPreferredAudioCodec": "None",
        "internalPreferredAudioCodec": "None"
    },    
    "extensions" : {
        "broadworks": {
            "resourceId": "5551239876@example.com"
        }
    }
}
+++++
< 422
< Transaction-Id: 1380080943120
< Content-Type: application/json
{
    "errorCode": "SEMANTIC_ERROR",
    "summary": "The server was unable to process your request",
    "detail": "Either customerId or extensions.broadworks.serviceProviderId is required when creating a VoIP Call Center.Either siteId or extensions.broadworks.groupId is required when creating a VoIP Call Center."
}

Delete a VoIP Call Center.<br />
Process name: Delete Call Center (VoIP Entity)<br />
Rollback-enabled: No

##URI Template Parameters

<table border=1>
    <thead>
    <th>Parameter</th>
    <th>Required?</th>
    <th>Default</th>
    <th>Description</th>
    </thead>
    <tbody>
        <tr>
            <td>callCenterId</td>
            <td style="text-align: center; font-weight:bold">yes</td>
            <td>n/a</td>
            <td>Loki Server callCenterId (server-generated) of the Call Center to be deleted.</td>
        </tr>
    </tbody>
</table>

DELETE /call-centers/{+callCenterId}
< 204
< Transaction-Id: 1380080943120
+++++
< 424
< Transaction-Id: 1380080943120
< Content-Type: application/json
{
    "errorCode": "EXTERNAL_API_ERROR",
    "externalErrorCode": "4008",
    "externalErrorSummary": "Error",
    "externalErrorDetail": "[Error 4008] User not found: callCenterTest"
}

--
VoIP Site Instant Group Call
##Collection

Supported network elements:

* LWS-SOAP
* BroadWorks Application Server

Keys:

* instantGroupCallId

Extension Keys:

* (none)
--

Create a new VoIP Instant Group Call.<br />
Process name: Create Instant Group Call (VoIP Entity)<br />
Rollback-enabled: No

##URI Query Parameters

<table border=1>
    <thead>
    <th>Parameter</th>
    <th>Required?</th>
    <th>Description</th>
    </thead>
    <tbody>
        <tr>
            <td>mode</td>
            <td style="text-align: center; font-weight:bold">yes</td>
            <td>Controls execution mode.<br />
            Allowed values: [ "prevalidate-only", "prevalidate-and-create", "create-only" ].<br />
            <b>NOTE: at this time only "create-only" (attempts to create the resource, with no pre-validation) is allowed.</b>
            </td>
        </tr>
    </tbody>
</table>

##Request Properties

Note: See the JSON Schema (**link TBD) for data types, format, length restrictions, etc.

<table border=1>
    <thead>
    <th>Property</th>
    <th>Required?</th>
    <th>Default</th>
    <th>Description</th>
    </thead>
    <tbody>
        <tr>
            <td>customerId</td>
            <td style="text-align: center; font-weight:bold">no</td>
            <td>n/a</td>
            <td>Loki Server customerId (server-generated) of the Customer in which the new VoIP Instant Group Call is to be created.
            In a default configuration (where a VoIP Instant Group Call is composed of BroadWorks entities only),
            this property can be omitted if extensions.broadworks.serviceProviderId is populated.</td>
        </tr>
        <tr>
            <td>siteId</td>
            <td style="text-align: center; font-weight:bold">no</td>
            <td>n/a</td>
            <td>Loki Server siteId (server-generated) of the Site in which the new VoIP Instant Group Call is to be created.
            In a default configuration (where a VoIP Instant Group Call is composed of BroadWorks entities only),
            this property can be omitted if extensions.broadworks.groupId is populated.</td>
        </tr>
        <tr>
            <td>profile</td>
            <td style="text-align: center; font-weight:bold">yes</td>
            <td>n/a</td>
            <td>
                Container for Profile information.<br />
                Details of the Profile properties:
                <table border=1>
                    <thead>
                    <th>Property</th>
                    <th>Required?</th>
                    <th>Default</th>
                    <th>Description</th>
                    </thead>
                    <tbody>
                        <tr>
                            <td>name</td>
                            <td style="text-align: center;">yes</td>
                            <td>n/a</td>
                            <td>Name</td>
                        </tr>
                        <tr>
                            <td>callingLineId</td>
                            <td style="text-align: center;">no</td>
                            <td>n/a</td>
                            <td>
                                Container for Calling Line ID information.<br />
                                <b>Not Implemented</b><br />
                                Details of the Calling Line ID properties:
                                <table border=1>
                                    <thead>
                                    <th>Property</th>
                                    <th>Required?</th>
                                    <th>Default</th>
                                    <th>Description</th>
                                    </thead>
                                    <tbody>
                                        <tr>
                                            <td>firstName</td>
                                            <td style="text-align: center; font-weight:bold">no</td>
                                            <td>n/a</td>
                                            <td>Calling Line ID First Name.<br /> 
                                            In initial implementation will be copied from the profile.name.</td>
                                        </tr>
                                        <tr>
                                            <td>lastName</td>
                                            <td style="text-align: center; font-weight:bold">no</td>
                                            <td>n/a</td>
                                            <td>Calling Line ID Last Name.<br /> 
                                            In initial implementation will be copied from the profile.name.</td>
                                        </tr>
                                        <tr>
                                            <td>phoneNumber</td>
                                            <td style="text-align: center; font-weight:bold">no</td>
                                            <td>n/a</td>
                                            <td>Calling Line ID Phone Number.</td>
                                        </tr>
                                    </tbody>
                                </table>
                            </td>
                        </tr>
                        <tr>
                            <td>phoneNumber</td>
                            <td style="text-align: center;">no</td>
                            <td>n/a</td>
                            <td>Phone Number.</td>
                        </tr>
                        <tr>
                            <td>tnRoutine</td>
                            <td style="text-align: center;">no</td>
                            <td>"" (empty string)</td>
                            <td>Phone Number (TN) assignment routine.<br />
                            Supported values and impact on other required properties:
                            <table border=1>
                            <thead>
                                <th>tnRoutine</th>
                                <th>Description</th>
                            </thead>
                            <tbody>
                            <tr>
                                <td><b>port-no-temp</b></td>
                                <td>TN does not exist in the system; will attempt to assign at both the Customer and Site levels.</td>
                            </tr>
                            <tr>
                                <td><b>auto</b></td>
                                <td>TN may or may not already exist in the system; will be assigned automatically to either/both as needed.<br />
                                <b>Not Implemented</b></td>
                            </tr>
                            <tr>
                                <td><b>no-number</b></td>
                                <td>TN will not be assigned automatically.</td>
                            </tr>
                            <tr>
                                <td><b>""</b>(empty string)</td>
                                <td>TN will not be assigned automatically.</td>
                            </tr>
                            </tbody>
                            </table></td>
                        </tr>
                        <tr>
                            <td>extension</td>
                            <td style="text-align: center;">no</td>
                            <td>n/a</td>
                            <td>Extension.</td>
                        </tr>
                        <tr>
                            <td>password</td>
                            <td style="text-align: center;">no</td>
                            <td>n/a</td>
                            <td>Password.<br />
                            <b>Not Implemented</b></td>
                        </tr>
                        <tr>
                            <td>department</td>
                            <td style="text-align: center;">no</td>
                            <td>n/a</td>
                            <td>Department.<br />
                            <b>Not Implemented</b></td>
                        </tr>
                        <tr>
                            <td>language</td>
                            <td style="text-align: center;">no</td>
                            <td>n/a</td>
                            <td>Language.</td>
                        </tr>
                        <tr>
                            <td>timeZone</td>
                            <td style="text-align: center;">no</td>
                            <td>n/a</td>
                            <td>Time Zone expressed as a Zone Name from the IANA Time Zone Database, e.g. "America/New_York".</td>
                        </tr>
                        <tr>
                            <td>alias</td>
                            <td style="text-align: center;">no</td>
                            <td>n/a</td>
                            <td>List of possible SIP URIs aliases of the Virtual User.<br />
                            <b>Not Implemented</b></td>
                        </tr>
                        <tr>
                            <td>publicServiceIdentity</td>
                            <td style="text-align: center;">no</td>
                            <td>n/a</td>
                            <td>Public User Identity SIP URI for the Virtual User.<br />
                            <b>Not Implemented</b></td>
                        </tr>
                    </tbody>
                </table>
            </td>
        </tr>
        <tr>
            <td>destinationPhoneNumber</td>
            <td style="text-align: center; font-weight:bold">no</td>
            <td>n/a</td>
            <td>Instant Group Call User List.<br />
            <b>Not Implemented</b></td>
        </tr>
        <tr>
            <td>isAnswerTimeoutEnabled</td>
            <td style="text-align: center; font-weight:bold">no</td>
            <td>false</td>
            <td>Enable Maximum Call Time for Unanswered Calls.<br />
            <b>Not Implemented</b></td>
        </tr>
        <tr>
            <td>answerTimeoutMinutes</td>
            <td style="text-align: center; font-weight:bold">no</td>
            <td>n/a</td>
            <td>The maximum duration for unanswered call.<br />
            <b>Not Implemented</b></td>
        </tr>
        <tr>
            <td>networkClassOfService</td>
            <td style="text-align: center; font-weight:bold">no</td>
            <td>n/a</td>
            <td>Network Class of Service name.<br />
            <b>Not Implemented</b></td>
        </tr>
        <tr>
            <td>services</td>
            <td style="text-align: center; font-weight:bold">no</td>
            <td>n/a</td>
	        <td>Container for list of services and their configuration settings to be assigned to the virtual user.<br />
            Note: Initial release does not support service configuration.<br />
	        To assign a service without doing any configuration, set the value to an empty object, e.g.
	        <code>"services" : { "Remote Office" : { } }</code>.<br />
            </td>
        </tr>
        <tr>
            <td>extensions</td>
            <td style="text-align: center; font-weight:bold">no</td>
            <td>n/a</td>
            <td>Container for network-element specific properties</td>
        </tr>
        <tr>
            <td>extensions.broadworks</td>
            <td style="text-align: center; font-weight:bold">no</td>
            <td>n/a</td>
            <td>
                Container for BroadWorks-specific properties.<br />
                Details of the BroadWorks-specific properties:
                <table border=1>
                    <thead>
                    <th>Property</th>
                    <th>Required?</th>
                    <th>Default</th>
                    <th>Description</th>
                    </thead>
                    <tbody>
                        <tr>
                            <td>serviceProviderId</td>
                            <td style="text-align: center; font-weight:bold">no</td>
                            <td>n/a</td>
                            <td>ID of the BroadWorks service provider or enterprse in which the underlying BroadWorks Virtual User is to be created.
                            In a default configuration (where a VoIP Virtual User is composed of BroadWorks entities only),
                            this property can be used instead of customerId (eliminating the need to know the server-generated customerId
                            prior to placing this request).</td>
                        </tr>
                        <tr>
                            <td>groupId</td>
                            <td style="text-align: center; font-weight:bold">no</td>
                            <td>n/a</td>
                            <td>ID of the BroadWorks group in which the underlying BroadWorks Virtual User is to be created.
                            In a default configuration (where a VoIP Virtual User is composed of BroadWorks entities only),
                            this property can be used instead of customerId (eliminating the need to know the server-generated customerId
                            prior to placing this request).
                            </td>
                        </tr>
                        <tr>
                            <td>resourceId</td>
                            <td style="text-align: center; font-weight:bold">no</td>
                            <td>n/a</td>
                            <td>The ID to be set on the new virtual user. If it is omitted then the userId of the virtual user will be auto-generated.</td>
                        </tr>
                    </tbody>
                </table>
            </td>
        </tr>
    </tbody>
</table>

##Response Properties - 201 Created

Note: The Create Instant Group Call process will return a 502 response when LWS-SOAP is misconfigured ("enhancedLwsSoapResponsesEnable" config parameter is set to false).<br />
For the Create Instant Group Call process besides the properties listed in the table below, the response also contains the normal HAL _links and curies properties.

<table border=1>
    <thead>
    <th>Property</th>
    <th>Mandatory</th>
    <th>Description</th>
    </thead>
    <tbody>
        <tr>
            <td>instantGroupCallId</td>
            <td style="text-align: center; font-weight:bold">yes</td>
            <td>The Loki Server ID of the new Instant Group Call user.</td>
        </tr>
        <tr>
            <td>profile</td>
            <td style="text-align: center; font-weight:bold">yes</td>
            <td>
                Container for Profile information.<br />
                Details of the Profile properties:
                <table border=1>
                    <thead>
                    <th>Property</th>
                    <th>Mandatory</th>
                    <th>Description</th>
                    </thead>
                    <tbody>
                        <tr>
                            <td>callingLineId</td>
                            <td style="text-align: center; font-weight:bold">yes</td>
                            <td>
                                Container for Calling Line ID information.<br />
                                Details of the Calling Line ID properties:
                                <table border=1>
                                    <thead>
                                    <th>Property</th>
                                    <th>Mandatory</th>
                                    <th>Description</th>
                                    </thead>
                                    <tbody>
                                        <tr>
                                            <td>firstName</td>
                                            <td style="text-align: center; font-weight:bold">yes</td>
                                            <td>Calling Line ID First Name.<br /> 
                                            In initial implementation will be copied from the profile.name.</td>
                                        </tr>
                                        <tr>
                                            <td>lastName</td>
                                            <td style="text-align: center; font-weight:bold">yes</td>
                                            <td>Calling Line ID Last Name.<br /> 
                                            In initial implementation will be copied from the profile.name.</td>
                                        </tr>
                                    </tbody>
                                </table>
                            </td>
                        </tr>
                        <tr>
                            <td>extension</td>
                            <td style="text-align: center; font-weight:bold">no</td>
                            <td>Extension.</td>
                        </tr>
                        <tr>
                            <td>publicServiceIdentity</td>
                            <td style="text-align: center; font-weight:bold">no</td>
                            <td>Public User Identity SIP URI for the Virtual User.</td>
                        </tr>
                    </tbody>
                </table>
            </td>
        </tr>
        <tr>
            <td>extensions</td>
            <td style="text-align: center; font-weight:bold">yes</td>
            <td>Container for network-element specific properties</td>
        </tr>
        <tr>
            <td>extensions.broadworks</td>
            <td style="text-align: center; font-weight:bold">yes</td>
            <td>
                Container for BroadWorks-specific properties.<br />
                Details of the BroadWorks-specific properties:
                <table border=1>
                    <thead>
                    <th>Property</th>
                    <th>Mandatory</th>
                    <th>Description</th>
                    </thead>
                    <tbody>
                        <tr>
                            <td>resourceId</td>
                            <td style="text-align: center; font-weight:bold">yes</td>
                            <td>The ID set on the new virtual user.</td>
                        </tr>
                    </tbody>
                </table>
            </td>
        </tr>
    </tbody>
</table>

POST /instant-group-calls{?mode}
> Content-Type: application/json
{
    "customerId": "Example Com",
    "siteId": "Example Com - North",
    "extensions": {
        "broadworks": {
            "resourceId": "5551239876@example.com"
        }
    },
    "profile": {
        "name": "My IGC",
        "phoneNumber": "+1-5551239876",
        "extension": "9876",
        "language": "English",
        "timeZone": " America/New_York"
    },
    "services": {
        "Alternate Numbers": {},
        "Basic Call Logs": {}
    }
}
< 201
< Location: http://lokiserver.example.com/loki/instant-group-calls/5551239876%40example.com
< Transaction-Id: 1380080943120
< Content-Type: application/hal+json
{
    "_links": {
        "self": {
            "href": "http://lokiserver.example.com/loki/instant-group-calls/5551239876%40example.com"
        }
    },
    "curies": [
        {
            "name": "ls",
            "href": "http://lokiserver.apiary.io/loki/rels/{rel}",
            "templated": true
        }
    ],
    "instantGroupCallId": "5551239876@example.com",
    "profile": {
        "callingLineId" : {
            "lastName": "My IGC",
            "firstName": "My IGC"
        },
        "publicServiceIdentity": "5551239876@example.com",
        "extension": "9876"
    },
    "extensions" : {
        "broadworks": {
            "resourceId": "5551239876@example.com"
        }
    }
}
+++++
< 422
< Transaction-Id: 1380080943120
< Content-Type: application/json
{
    "errorCode": "SEMANTIC_ERROR",
    "summary": "The server was unable to process your request",
    "detail": "Either customerId or extensions.broadworks.serviceProviderId is required when creating a VoIP Instant Group Call.Either siteId or extensions.broadworks.groupId is required when creating a VoIP Instant Group Call."
}
+++++
< 502
< Transaction-Id: 1380080943120
< Content-Type: application/json
{
    "errorCode": "EXTERNAL_API_SERVER_ERROR",
    "summary": "Unexpected response from remote API",
    "detail": "LWS-SOAP: Received unexpected response: 'SuccessResponse'"
}

Delete a VoIP Instant Group Call.<br />
Process name: Delete Instant Group Call (VoIP Entity)<br />
Rollback-enabled: No

##URI Template Parameters

<table border=1>
    <thead>
    <th>Parameter</th>
    <th>Required?</th>
    <th>Default</th>
    <th>Description</th>
    </thead>
    <tbody>
        <tr>
            <td>instantGroupCallId</td>
            <td style="text-align: center; font-weight:bold">yes</td>
            <td>n/a</td>
            <td>Loki Server instantGroupCallId (server-generated) of the Instant Group Call to be deleted.</td>
        </tr>
    </tbody>
</table>

DELETE /instant-group-calls/{+instantGroupCallId}
< 204
< Transaction-Id: 1380080943120
+++++
< 424
< Transaction-Id: 1380080943120
< Content-Type: application/json
{
    "errorCode": "EXTERNAL_API_ERROR",
    "externalErrorCode": "4008",
    "externalErrorSummary": "Error",
    "externalErrorDetail": "[Error 4008] User not found: instantGroupCallTest"
}

--
CHANGELOG

#2.42

Changes for S2297: LWS-REST: VoIP User Intercept Modify

 * Added PUT /loki/users/{+userId}/services/Intercept%20User

Changes for S2275 LWS-REST VoIP Virtual User Delete

 * Added DELETE /loki/auto-attendants/{+autoAttendantId}
 * Added DELETE /loki/hunt-groups/{+huntGroupId}
 * Added DELETE /loki/call-centers/{+callCenterId}
 * Added DELETE /loki/instant-group-calls/{+instantGroupCallId}

#2.41

Changes for S1932 LWS-REST:  Customer Add (BroadWorks Enterprise/SP Add)

 * Added POST /loki/customers{?mode}
 * Added GET /loki/customers/{+customerId}
 * Added PUT /loki/customers/{+customerId}
 * Added DELETE /loki/customers/{+customerId}

Changes for S2264 LWS-REST Site Device Access Credentials Reset

* Added POST /loki/users/{+userId}/resetDeviceCredentials

Changes for S2265 VoIP User Add Alternative Process (via LWS-SOAP)
* Added details for the differences between the default (legacy) and the alternative process POST /loki/users request.


Changes for S2266 LWS-REST VoIP User Alternate Numbers Modify

* Added PUT /loki/users/{+userId}/services/Alternate&20Numbers

Changes for S2267 LWS-REST VoIP User Service (Un-)Assignment

* Added PUT /loki/users/{+userId}/services/assigned-services

Changes for S2268 LWS-REST VoIP User Delete

* Added DELETE /loki/users/{+userId}{?keepMailbox}

Changes for S2270 LWS-REST: VoIP Virtual User Add:

* Added POST /loki/auto-attendants{?mode}
* Added POST /loki/hunt-groups{?mode}
* Added POST /loki/call-centers{?mode}
* Added POST /loki/instant-group-calls{?mode}

Changes for S2289 LWS-REST: Enhance VoIP User Add (via LWS-SOAP) to support BroadWorks Mobility

* Added support to configure "Broadworks Mobility" service, only supported by POST /loki/users alternative process request.

Changes for S2291 LWS-REST: Create LWS-SOAP-backed request to modify group voice portal settings:

* Added PUT /loki/customers/{+customerId}/sites/{+siteId}/services/Voice Portal

Changes for S2313 LWS-REST: Enhance LWS-SOAP-backed VoIP User Add to Support ATA User Type

* New "ATA" userType supported only by POST /loki/users alternative process request.

#2.40

General:
* Added section "Single vs Multi cluster BroadWorks behaviour", to clarify 404 Not Found response body format. 

Changes for S2183: Loki REST: Initial Site Add Support:

* Added GET /loki/customers{?extensions.broadworks.serviceProviderId}
* Added POST /loki/customers/{+customerId}/sites{?mode}

#2.39

Changes for S1783: LWS-REST: Site Device creation and TN Assign to a Site:

* Added POST /loki/customers/{+customerId}/sites/{+siteId}/assignPhoneNumber{?mode}
* Added POST /loki/customers/{+customerId}/sites/{+siteId}/devices{?mode}

#2.38

Note the change to version numbers compatible with other Loki products.

Changes for S2018 LWS-REST: Add support for Activate/Deactivate TN in BroadWorks:
* Add POST /sites/{+siteId}/phone-numbers/activate and POST /sites/{+siteId}/phone-numbers/deactivate

Updates for S1945 LWS-REST: Add User with Trunk Group "None" (POST /loki/users{?mode}):

* Add userType and accessDevice for
* Remove sharedDeviceName and trunkGroupName
* Clarify that services.Authentication.password will be validated against the configured rules
* Document examples of Business Line and Trunking user adds
* Update example to show just one userType (businessLine)

Updates for S1945 LWS-REST: Add User with Trunk Group "None" (POST /customers/{+customerId}/sites/{+siteId}/trunk-groups{?mode}):

* Clarify that services.Authentication.password will be validated against the configured rules
* Clarify requirements for pilotUser object

General

* Clarify that GET on /loki/sites returns only a single resource
* Update json-schemas for various requests

#1.8

Changes for S1896 LWS-REST: BroadWorks Trunk Group Add (excludes Genband support):

* Added GET /loki/sites{?extensions.broadworks.serviceProviderId,extensions.broadworks.groupId}
* Added POST /loki/customers/{+customerId}/sites/{+siteId}/trunk-groups{?mode}

#1.7 / 1.7.1
Changes for S2052 LWS-REST: VoIP User Add validation enhancements:

* Update POST /loki/users to return 422 for invalid attempt to set empty extension
* Update POST /loki/users to add missing input validation for properties under services.*

Changes for S2051 LWS-REST: Further improvements to error handling consistency:

* Updated handling of unexpected errors to follow LWS-REST 500 error response format (errorCode, summary, detail)

Changes for S2094 LWS-REST: Not possible to assign CFA (and other services) using userAdd REST call

* Clarified that any BroadWorks service can be assigned alacarte, even if it doesn't support configuration
* Update examples to show assignment of any BroadWorks service on a user, even if LWS-REST doesn't support pre-configuring its settings

General:

* Correct documented default value (3) for services.'Call Forwarding No Answer'.numberOfRings and services.'Third-Party Voice Mail Support'.noAnswerNumberOfRings
* Improved error response for the case where an object contains an invalid property
* POST /loki/users: clarify that userId must include @domain; enhance the input validation for userId
* POST /loki/users: clarify that the BroadWorks group's default extension length is used when auto-filling the extension
* POST /loki/users: note that the "no-number" tnRoutine is not allowed for Charge Number.

#1.6
Changes for *Functional Description: VoIP Entity Service  Enhancements for BroadWorks Multi-Cluster Support*:

* removed support for POST /loki/voip-users; replaced with POST /loki/users
* customerId and siteId moved from URI template into request body
* extensions.broadworks added to request body, with serviceProviderId and groupId

General:

* Change checkmark/x to yes/no for clarity
* Document 404 response for GET queries on Sonus resources
* Corrected data type for /loki/routes transmissionMedium property
* Completed documentation for user service settings in POST /loki/users

#1.5
Changes for *Functional Description: Alternate API Navigation*:

* Update URIs (self links, Location headers) to reflect changed URI construction
* Update response bodies to add new properties required to expand URI Template variables
* Convert POST /loki/customers/{+customerId}/sites/{+siteId}/voip-users 201 response to hal+json

Changes for *Functional Description: Sonus Entity and Utility Services - Subscriber, Destination, and Route Modify Support*:

* Add PUT /loki/{subscribers,destinations,routes}.

Changes for *Functional Description: Sonus Entity and Utility Services - Route Query Enhancements*:

* Update GET /routes{?...} documentation, supported URL query parameters, and 200 OK response body.

Changes for *Functional Description: VoIP User Create - Configure Call Forwarding Not Reachable (BroadWorks)*:

* Update POST /loki/customers/{+customerId}/sites/{+siteId}/voip-users request body to add Call Forwarding Not Reachable service.

General:

* Improve comments.
* Correct errors in json-schema.
* Add 404 example for POST /loki/number-translations.
* Document URL parameters for POST /loki/subscribers.
* Correct the URI in the Location header in POST /loki/routes 201 Created response, and in embedded ls:routes in 409 Conflict response, and in the 200 OK response to GET /loki/routes{?...}.
* Further updates to POST /loki/customers/{+customerId}/sites/{+siteId}/voip-users: improve documentation, add timeZone and language; add "+" in URI template parameters to indicate reserved expansion.
* Correct documentation to mark ?mode as required on POST /loki/voip-users.
--


-- JSON Schema Validations --

POST /loki/number-translations
{ "request" :
    { "type": "object",
          "properties": {
            "sourceDn": { "type": "string", "maxLength" : 48 },
            "translatedDn": { "type": "string", "maxLength" : 48 }
          },
        "required" : ["sourceDn", "translatedDn"]
    },
  "response" :
    { }
}

PUT /loki/number-translations/{+id}
{ "request" :
    { "type": "object",
        "properties" : {
                "translatedDn" : {},
                "extensions" : {}
            },
            "additionalProperties" : false
    },
    "response" : { }
}

POST /loki/subscribers
{ "request" :
    { "type": "object",
          "properties": {
            "subscriberDn": { "type": "string", "maxLength" : 48 }
          },
        "required" : ["subscriberDn"]
    },
  "response" :
    { }
}

PUT /loki/subscribers/{+id}
{ "request" :
    { "type": "object",
          "properties": {
                "extensions" : {}
            },
        "additionalProperties" : false
    },
  "response" :
    { }
}

POST /loki/destinations
{ "request" :
    { "type": "object",
          "properties": {
            "destinationDn": { "type": "string", "maxLength" : 48 }
          },
        "required" : ["destinationDn"]
    },
  "response" :
    { }
}

POST /loki/routes
{ "request" :
    { "type": "object",
          "properties": {
            "destinationDn": { "type": "string", "maxLength" : 48 }
          },
        "required" : ["destinationDn"]
    },
  "response" :
    { }
}

GET /loki/customers{?extensions.broadworks.serviceProviderId}
{
    "requestURIQuery": {
        "title": "Retrieve Customer request URI Query parameters schema",
        "properties": {
			"extensions.broadworks.serviceProviderId": { "type": "string", "minLength": 1, "maxLength": 30, "required": true }
		}
	},
	"response": {
	    "title": "Retrieve Customer response body parameters schema",
	    "type": "object",
        "properties": {
            "_links": {
				"type": "object",
				"required": true,
				"properties": {
					"self": {
						"type": "object",
						"required": true,
						"properties": {
							"href": {
								"type": "string",
								"required": true
							}
						}
					}
				}
			},
			"customerId": { "type": "string", "minLength": 1, "required": true },
			"useCustomRoutingProfile": { "type": "boolean" },
			"defaultDomain": { "type": "string", "minLength": 1, "maxLength": 80, "pattern": "^[a-zA-Z0-9.-]+$", "required": true },
            "name": { "type": "string", "minLength": 1, "maxLength": 80 },
            "supportEmail": { "type": "string", "minLength": 1, "maxLength": 80, "format": "email" },
            "contact": {
                "type": "object",
                "properties": {
                    "name": { "type": "string", "minLength": 1, "maxLength": 30 },
                    "number": { "type": "string", "minLength": 1, "maxLength": 30 },
                    "email": { "type": "string", "minLength": 1, "maxLength": 80, "format": "email" }
                }
            },
            "address": {
                "type": "object",
                "properties": {
                    "addressLine1": { "type": "string", "minLength": 1, "maxLength": 80 },
                    "addressLine2": { "type": "string", "minLength": 1, "maxLength": 80 },
                    "city": { "type": "string", "minLength": 1, "maxLength": 50 },
                    "stateOrProvince": { "type": "string", "minLength": 1, "maxLength": 50 },
                    "zipOrPostalCode": { "type": "string", "minLength": 1, "maxLength": 50 },
                    "country": { "type": "string", "minLength": 1, "maxLength": 50 }
                }
            },
            "useServiceProviderLanguages": { "type": "boolean" },
            "extensions": {
                "type": "object",
                "properties": {
                    "type": "object",
                    "properties": {
                        "broadworks": {
                            "isEnterprise": { "type": "boolean" },
                            "serviceProviderId": { "type": "string",  "minLength": 1, "maxLength": 30, "required": true }
                        }
                    }
                }
            },
            "curies": {
				"type": "array",
				"required": true,
				"items": {
					"type": "object",
					"properties": {
						"name": { "type": "string", "required": true },
						"href": { "type": "string", "required": true },
						"templated": { "type": "boolean", "required": true }
					}
				}
			}
        }
	}
}

GET /loki/sites{?extensions.broadworks.serviceProviderId,extensions.broadworks.groupId}
{
	"request": {
		"get": {
			"query": {
				"id": "extensionsBroadworks",
				"type": "object",
				"additionalProperties": false,
				"title": "Get schema, query params",
				"description": "Validates extensions.broadworks query parameters",
				"properties": {
					"extensions.broadworks.serviceProviderId": {
						"type": "string",
						"minLength": 1,
						"maxLength": 30,
						"required": true
					},
					"extensions.broadworks.groupId": {
						"type": "string",
						"minLength": 1,
						"maxLength": 30,
						"required": true
					}
				}
			}
		}
	},
	"response": {}
}

POST /loki/customers/{+customerId}/sites{?mode}
{   
    "requestURITemplate": {
        "title": "Create Site request request URI template parameters schema",
        "properties": {
            "customerId": { "type": "string", "minLength": 1, "required": true }
        }
    },
    "requestURIQuery": {
        "title": "Create Site request URI Query parameters schema",
        "properties": {
			"mode": { "enum": [ "create-only" ], "required": true }
		}
	},
    "requestBody": { 
        "title": "Create Site request body parameters schema",
        "type": "object",
        "additionalProperties": false,
        "properties": {
            "siteName": { "type": "string", "minLength": 1, "maxLength": 80, "required": true },
            "defaultDomain": { "type": "string", "minLength": 1, "maxLength": 80, "pattern": "^[a-zA-Z0-9.-]+$" },
            "userLimit": { "type": "integer", "minimum": 1, "maximum": 999999, "required": true },
            "callingLineId": {
                "type": "object",
                "additionalProperties": false,
                "properties": {
                    "name": { "type": "string", "minLength": 1, "maxLength": 80 },
                    "phoneNumber": { "id": "E.164 DN",
                        "type": "string",
                        "description": "A formatted TN.",
                        "pattern": "^\\+\\d+-\\d+$",
                        "minLength": 1,
                        "maxLength": 23
                    },
                    "tnRoutine": { "enum": [null, "", "port-no-temp", "auto", "no-number"] }
                }
            },
            "timeZone": { "type": "string", "minLength": 1, "maxLength": 127 },
            "locationDialingCode": { "type": "string", "minLength": 1, "maxLength": 15, "pattern": "^[0-9]+$" },
            "contact": {
                "type": "object",
                "additionalProperties": false,
                "properties": {
                    "name": { "type": "string", "minLength": 1, "maxLength": 30 },
                    "number": { "type": "string", "minLength": 1, "maxLength": 30 },
                    "email": { "type": "string", "minLength": 1, "maxLength": 80, "format": "email" }
                }
            },
            "address": {
                "type": "object",
                "additionalProperties": false,
                "properties": {
                    "addressLine1": { "type": "string", "minLength": 1, "maxLength": 80 },
                    "addressLine2": { "type": "string", "minLength": 1, "maxLength": 80 },
                    "city": { "type": "string", "minLength": 1, "maxLength": 50 },
                    "stateOrProvince": { "type": "string", "minLength": 1, "maxLength": 50 },
                    "zipOrPostalCode": { "type": "string", "minLength": 1, "maxLength": 50 },
                    "country": { "type": "string", "minLength": 1, "maxLength": 50 }
                }
            },
            "extensions": {
                "type": "object",
                "additionalProperties": false,
                "properties": {
                    "broadworks": {
                        "type": "object",
                        "additionalProperties": false,
                        "properties": {
                            "groupId": { "type": "string", "minLength": 1, "maxLength": 30 },
                            "templateGroupId": { "type": "string", "minLength": 1, "maxLength": 30 }
                        }
                    }
                }
            },
            "extensionLength": {
                "type": "object",
                "additionalProperties": false,
                "properties": {
                    "min": { "type": "integer", "minimum": 2, "maximum": 20 },
                    "max": { "type": "integer", "minimum": 2, "maximum": 20 },
                    "default": { "type": "integer", "minimum": 2, "maximum": 20 }
                }
            },
            "services": {
                "type": "object",
                "additionalProperties": false,
                "properties": {
                    "Voice Portal": {
                        "type": "object",
                        "additionalProperties": false,
                        "properties": {
                            "isActive": { "type": "boolean" },
                            "extension": { "type": "string", "minLength": 2, "maxLength": 20 },
                            "phoneNumber": { "id": "E.164 DN",
                                "type": "string",
                                "description": "A formatted TN.",
                                "pattern": "^\\+\\d+-\\d+$",
                                "minLength": 1,
                                "maxLength": 23
                            },
                            "tnRoutine": { "enum": [null, "", "port-no-temp", "auto", "no-number"] }
                        }
                    },
                    "Third-Party Voice Mail Support": {
                        "type": "object",
                        "additionalProperties": false,
                        "properties": {
                            "isActive": { "type": "boolean" },
                            "groupServer": { "id": "OutgoingDNorSIPURI", "anyOf": [
                                { 
                                    "id": "E.164 DN",
                                    "type": ["string", "null"],
                                    "description": "A formatted TN.",
                                    "pattern": "^\\+\\d+-\\d+$",
                                    "minLength": 1,
                                    "maxLength": 23,
                                    "required": false
                                },
                                {   
                                    "id": "non-E.164 DN", 
                                    "type": "string",
                                    "description": "A non-E.164 formatted TN.",
                                    "pattern": "^[\\d\\-]+$",
                                    "minLength": 1,
                                    "maxLength": 23,
                                    "required": false
                                },
                                { 
                                    "id": "SIP URI", 
                                    "type": "string",
                                    "description": "SIP URI",
                                    "pattern": "^[\\+]?[\\w\\-\\.\\!~\\*\\'\\(\\)]+@[a-zA-Z\\d\\.\\-]+$",
                                    "minLength": 1,
                                    "maxLength": 161,
                                    "required": false
                                }
                            ]}
                        }
                    }
                }
            }
        }
    },
    "response": {
	    "title": "Create Site response body parameters schema",
	    "type": "object",
        "properties": {
            "_links": {
				"type": "object",
				"required": true,
				"properties": {
					"self": {
						"type": "object",
						"required": true,
						"properties": {
							"href": {
								"type": "string",
								"required": true
							}
						}
					}
				}
			},
			"customerId": { "type": "string", "minLength": 1, "required": true },
			"siteId": { "type": "string", "minLength": 1, "required": true },
			"callingLineId": {
                "type": "object",
                "additionalProperties": false,
                "properties": {
                    "name": { "type": "string", "minLength": 1, "maxLength": 80 }
                }
            },
			"defaultDomain": { "type": "string", "minLength": 1, "maxLength": 80, "pattern": "^[a-zA-Z0-9.-]+$" },
            "extensions": {
                "type": "object",
                "properties": {
                    "type": "object",
                    "properties": {
                        "broadworks": {
                            "serviceProviderId": { "type": "string",  "minLength": 1, "maxLength": 30, "required": true },
                            "groupId": { "type": "string",  "minLength": 1, "maxLength": 30, "required": true }
                        }
                    }
                }
            },
            "curies": {
				"type": "array",
				"required": true,
				"items": {
					"type": "object",
					"properties": {
						"name": { "type": "string", "required": true },
						"href": { "type": "string", "required": true },
						"templated": { "type": "boolean", "required": true }
					}
				}
			}
        }
	}
}

POST /loki/users{?mode}
{
    "requestURIQuery": {
        "title": "Create Site request URI Query parameters schema",
        "properties": {
			"mode": { "enum": [ "create-only" ], "required": true }
		}
	},
	"requestBodyLegacy": {
		"post": {
			"body": {
				"id": "voipUsersBody",
				"type": "object",
				"additionalProperties": false,
				"title": "Schema for the legacy(default) User Add request body",
				"properties": {
					"customerId": {
						"type": "string",
						"minLength": 1,
						"maxLength": 30
					},
					"siteId": {
						"type": "string",
						"minLength": 1,
						"maxLength": 30
					},
					"userId": {
						"$ref": "/userId"
					},
					"phoneNumber": {
						"$ref": "/bwksDnSchema"
					},
					"tnRoutine": {
						"$ref": "/tnRoutineWithNoNumber"
					},
					"extension": {
						"type": [
							"string",
							"null"
						],
						"minLength": 2,
						"maxLength": 20,
						"pattern": "^[0-9]+$"
					},
					"CLID": {
						"$ref": "/bwksDnSchema"
					},
					"lastName": {
						"type": "string",
						"minLength": 1,
						"maxLength": 30
					},
					"firstName": {
						"type": "string",
						"minLength": 1,
						"maxLength": 30
					},
					"callingLineIdLastName": {
						"type": "string",
						"minLength": 1,
						"maxLength": 30,
						"pattern": "^[\\x20-\\x21\\x23-\\x24\\x26-\\x2A\\x2C-\\x2E\\x30-\\x7F]+$"
					},
					"callingLineIdFirstName": {
						"type": "string",
						"minLength": 1,
						"maxLength": 30,
						"pattern": "^[\\x20-\\x21\\x23-\\x24\\x26-\\x2A\\x2C-\\x2E\\x30-\\x7F]+$"
					},
					"email": {
						"type": "string",
						"minLength": 1,
						"maxLength": 80,
						"format": "email"
					},
					"timeZone": {
						"type": "string",
						"minLength": 1,
						"maxLength": 127
					},
					"language": {
						"type": "string",
						"minLength": 1,
						"maxLength": 40
					},
					"role": {
						"type": "any"
					},
					"userType": {
						"enum": [
							"trunking",
							"ATA",
							"businessLine",
							"hostedPbx",
							"systemDevice",
							"noDevice"
						],
						"required": true
					},
					"accessDevice": {
						"type": "object",
						"additionalProperties": false,
						"description": "Details of the user's device, for Business Line, IP Centrex, and System Device users.",
						"properties": {
						    "deviceManagementRoutine": {"type": "any"},
							"name": {
								"type": "string",
								"minLength": 1,
								"maxLength": 40,
								"required": true
							},
							"type": {
								"type": "any"
							},
							"model": {
								"type": "any"
							},
							"macAddress": {
								"type": "any"
							},
							"linePort": {
								"type": "any"
							}
						}
					},
					"trunkGroup": {
						"type": "object",
						"additionalProperties": false,
						"description": "Details of the user's trunk group(s), for Trunking users.",
						"properties": {
							"name": {
								"type": "string",
								"minLength": 1,
								"maxLength": 30
							},
							"linePort": {
								"type": "any"
							}
						}
					},
					"servicePacks": {
						"type": "object",
						"additionalProperties": false,
						"description": "Service Packs that will be assigned to User",
						"properties": {
							"base": {
								"type": "string",
								"minLength": 1,
								"maxLength": 80
							},
							"add-on": {
								"type": "array",
								"items": {
									"type": "string",
									"minLength": 1,
									"maxLength": 80
								}
							}
						}
					},
					"services": {
						"type": "object",
						"properties": {
							"Authentication": {
								"type": "object",
								"additionalProperties": false,
								"properties": {
									"username": {
										"type": "string",
										"minLength": 1,
										"maxLength": 80
									},
									"password": {
										"type": "string",
										"minLength": 1,
										"maxLength": 60
									}
								}
							},
							"Charge Number": {
								"type": "object",
								"additionalProperties": false,
								"properties": {
									"phoneNumber": {
										"extends": [
											{
												"$ref": "/bwksDnSchema"
											},
											{
												"type": [
													"string",
													"null"
												]
											}
										]
									},
									"useChargeNumberForEnhancedTranslations": {
										"type": "boolean"
									},
									"sendChargeNumberToNetwork": {
										"type": "boolean"
									},
									"tnRoutine": {
										"$ref": "/tnRoutine"
									}
								}
							},
							"Third-Party Voice Mail Support": {
								"type": "object",
								"additionalProperties": false,
								"properties": {
									"isActive": {
										"type": "boolean"
									},
									"busyRedirectToVoiceMail": {
										"type": "boolean"
									},
									"noAnswerRedirectToVoiceMail": {
										"type": "boolean"
									},
									"noAnswerNumberOfRings": {
										"$ref": "/numberOfRings"
									},
									"alwaysRedirectToVoiceMail": {
										"type": "boolean"
									},
									"outOfPrimaryZoneRedirectToVoiceMail": {
										"type": "boolean"
									},
									"serverSelection": {
										"enum": [
											"Group Mail Server",
											"User Specific Mail Server"
										]
									},
									"userServer": {
										"$ref": "/outgoingDnOrSipUri"
									},
									"mailboxIdType": {
										"enum": [
											"User Or Group Phone Number",
											"URL"
										]
									},
									"mailboxURL": {
										"extends": [
											{
												"$ref": "/bwksSipUri"
											},
											{
												"type": [
													"string",
													"null"
												]
											}
										]
									}
								}
							},
							"Call Forwarding No Answer": {
								"type": "object",
								"additionalProperties": false,
								"properties": {
									"isActive": {
										"type": "boolean"
									},
									"forwardToPhoneNumber": {
										"$ref": "/outgoingDnOrSipUri"
									},
									"numberOfRings": {
										"$ref": "/numberOfRings"
									}
								}
							},
							"Call Forwarding Not Reachable": {
								"type": "object",
								"additionalProperties": false,
								"properties": {
									"isActive": {
										"type": "boolean",
										"required": false
									},
									"forwardToPhoneNumber": {
										"$ref": "/outgoingDnOrSipUri"
									}
								}
							}
						}
					},
					"extensions": {
						"type": "object",
						"additionalProperties": false,
						"properties": {
							"broadworks": {
								"type": "object",
								"additionalProperties": false,
								"properties": {
									"serviceProviderId": {
										"type": "string",
										"minLength": 1,
										"maxLength": 30
									},
									"groupId": {
										"type": "string",
										"minLength": 1,
										"maxLength": 30
									}
								}
							}
						}
					}
				}
			}
		}
	},
	"requestBodyAlternate": { 
        "title": "Create User Alternate process request body parameters schema",
        "type": "object",
        "additionalProperties": false,
        "properties": {
            "customerId": {	"type": "string", "minLength": 1, "maxLength": 30 },
			"siteId": {	"type": "string", "minLength": 1, "maxLength": 30 },
			"userId": {	"$ref": "/userId" },
			"phoneNumber": { "$ref": "/bwksDnSchema" },
			"tnRoutine": { "$ref": "/tnRoutineWithNoNumber"	},
			"extension": { "type": ["string", "null"], "minLength": 2, "maxLength": 20,	"pattern": "^[0-9]+$" },
			"CLID": { "$ref": "/bwksDnSchema" },
			"lastName": { "type": "string",	"minLength": 1,	"maxLength": 30, "required": true },
			"firstName": { "type": "string", "minLength": 1, "maxLength": 30, "required": true },
			"callingLineIdLastName": { "type": "string", "minLength": 1, "maxLength": 30, "pattern": "^[\\x20-\\x21\\x23-\\x24\\x26-\\x2A\\x2C-\\x2E\\x30-\\x7F]+$"	},
			"callingLineIdFirstName": { "type": "string", "minLength": 1, "maxLength": 30, "pattern": "^[\\x20-\\x21\\x23-\\x24\\x26-\\x2A\\x2C-\\x2E\\x30-\\x7F]+$" },
			"email": { "type": "string", "minLength": 1, "maxLength": 80, "format": "email"	},
			"timeZone": { "type": "string",	"minLength": 1,	"maxLength": 127 },
			"language": { "type": "string",	"minLength": 1,	"maxLength": 40	},
			"role": { "type": "any"	},
			"userType": { "enum": ["ATA", "trunking", "businessLine", "hostedPbx",	"systemDevice",	"noDevice"], "required": true },
			"accessDevice": {
				"type": "object",
				"additionalProperties": false,
				"description": "Details of the user's device, for Business Line, IP Centrex, and System Device users.",
				"properties": {
				    "deviceManagementRoutine": {"enum": ["create", "existing"]},
					"name": { "type": "string",	"minLength": 1,	"maxLength": 40, "required": true },
					"type": { "type": "string", "minLength": 1, "maxLength": 40 },
					"model": { "type": "string", "minLength": 1, "maxLength": 256 },
					"macAddress": { "type": "string", "minLength": 12, "maxLength": 12, "pattern": "^[0-9A-Fa-f]{12}$" },
					"linePort": {
                        "type": "string",
                        "pattern": "^(\\+|[\\w\\-\\.\\!~\\*\\'\\(\\)])[\\w\\-\\.\\!~\\*\\'\\(\\)]{0,79}(@[a-zA-Z\\d\\.\\-]{1,80})?$",
                        "minLength": 1,
                        "maxLength": 161
                    }
				}
			},
			"trunkGroup": {
				"type": "object",
				"additionalProperties": false,
				"description": "Details of the user's trunk group(s), for Trunking users.",
				"properties": {
					"name": { "type": "string",	"minLength": 1,	"maxLength": 30 },
					"linePort": {
                        "type": "string",
                        "pattern": "^(\\+|[\\w\\-\\.\\!~\\*\\'\\(\\)])[\\w\\-\\.\\!~\\*\\'\\(\\)]{0,79}(@[a-zA-Z\\d\\.\\-]{1,80})?$",
                        "minLength": 1,
                        "maxLength": 161
                    }
				}
			},
			"servicePacks": {
				"type": "object",
				"additionalProperties": false,
				"description": "Service Packs that will be assigned to User",
				"properties": {
					"base": {
						"type": "string",
						"minLength": 1,
						"maxLength": 80
					},
					"add-on": {
						"type": "array",
						"items": {
							"type": "string",
							"minLength": 1,
							"maxLength": 80
						}
					}
				}
			},
			"services": {
				"type": "object",
				"properties": {
					"Authentication": {
						"type": "object",
						"additionalProperties": false,
						"properties": {
							"username": {
								"type": "string",
								"minLength": 1,
								"maxLength": 80
							},
							"password": {
								"type": "string",
								"minLength": 1,
								"maxLength": 60
							}
						}
					},
					"BroadWorks Mobility": {
						"type": "object",
						"additionalProperties": false,
						"properties": {
							"isActive": {
								"type": "boolean"
							},
							"mobilePhoneNumber": {
                                "extends":[{
                                    "$ref": "/bwksDnSchema"
                                }, {
                                    "type": ["string", "null"]
                                }]
                            },
                            "mobileDevicePassword": { "type": "string", "minLength": 1 },
                            "mobileNetworkName": { "type": "string", "minLength": 1, "maxLength": 80 }
						}
					}
				}
			},
			"extensions": {
				"type": "object",
				"additionalProperties": false,
				"properties": {
					"broadworks": {
						"type": "object",
						"additionalProperties": false,
						"properties": {
							"serviceProviderId": {
								"type": "string",
								"minLength": 1,
								"maxLength": 30
							},
							"groupId": {
								"type": "string",
								"minLength": 1,
								"maxLength": 30
							}
						}
					}
				}
			}
        }
    },
    "responseAlternate": {
	    "title": "Create User response body parameters schema",
	    "type": "object",
        "properties": {
            "_links": {
				"type": "object",
				"required": true,
				"properties": {
					"self": {
						"type": "object",
						"required": true,
						"properties": {
							"href": {
								"type": "string",
								"required": true
							}
						}
					}
				}
			},
			"userId": {	"$ref": "/userId" },
			"extension": { "type": "string", "minLength": 2, "maxLength": 20,	"pattern": "^[0-9]+$" },
			"lastName": { "type": "string",	"minLength": 1,	"maxLength": 30 },
			"firstName": { "type": "string", "minLength": 1, "maxLength": 30 },
			"portalPassword": { "type": "string",	"minLength": 1 },
			"passcode": { "type": "string",	"minLength": 1 },
			"publicUserIdentities": { "type": "array" },
			"accessDevice": {
				"type": "object",
				"additionalProperties": false,
				"description": "Details of the user's device, for Business Line, IP Centrex, and System Device users.",
				"properties": {
					"name": { "type": "string",	"minLength": 1,	"maxLength": 40 },
					"linePort": { "type": "string", "minLength": 1, "maxLength": 161 },
					"deviceCredentials": { 
					    "type": "object", 
					    "additionalProperties": false,
					    "properties": {
					        "username": { "type": "string", "minLength": 1 },
					        "password": { "type": "string", "minLength": 1 }
					    }
				    }
				}
			},
			"services": {
				"type": "object",
				"properties": {
					"Authentication": {
						"type": "object",
						"additionalProperties": false,
						"properties": {
							"username": { "type": "string",	"minLength": 1,	"maxLength": 80	},
							"password": { "type": "string",	"minLength": 1,	"maxLength": 60	}
						}
					}
				}
			},
			"extensions": {
				"type": "object",
				"additionalProperties": false,
				"properties": {
					"broadworks": {
						"type": "object",
						"additionalProperties": false,
						"properties": {
							"userId": {	"$ref": "/userId" }
						}
					}
				}
			},
			"_embedded": {
				"type": "object",
				"properties": {
					"ls:site-devices": {
						"type": "array",
        				"items": {
        					"type": "object",
        					"properties": {
        					    "_links": {
                    				"type": "object",
                    				"required": true,
                    				"properties": {
                    					"self": {
                    						"type": "object",
                    						"required": true,
                    						"properties": {
                    							"href": {
                    								"type": "string",
                    								"required": true
                    							}
                    						}
                    					}
                    				}
                    			},
        						"customerId": {	"type": "string", "minLength": 1, "maxLength": 30, "required": true },
                    			"siteId": {	"type": "string", "minLength": 1, "maxLength": 30, "required": true },
                    			"deviceId": { "type": "string", "minLength": 1, "maxLength": 30, "required": true },
                    			"linePort": { "type": "string", "minLength": 1, "maxLength": 161 },
                    			"extensions": {
                    				"type": "object",
                    				"additionalProperties": false,
                    				"properties": {
                    					"broadworks": {
                    						"type": "object",
                    						"additionalProperties": false,
                    						"properties": {
                    							"resourceId": { "type": "string",	"minLength": 1,	"maxLength": 40, "required": true }
                    						}
                    					}
                    				}
			                    }
        					}
        				}
					}
				}
			},
			"_warnings": {
				"type": "array",
				"items": {
					"type": "object",
					"properties": {
					    "code": { "type": "string" },
						"summary": { "type": "string" },
						"details": { "type": "string" }
					}
				}
			},
            "curies": {
				"type": "array",
				"required": true,
				"items": {
					"type": "object",
					"properties": {
						"name": { "type": "string", "required": true },
						"href": { "type": "string", "required": true },
						"templated": { "type": "boolean", "required": true }
					}
				}
			}
        }
	},
	"definitions": {
		"userId": {
			"type": "string",
			"minLength": 1,
			"maxLength": 161,
			"pattern": "^[\\w'#\\$\\%&\\-\\/=\\?;\\.\\|~\\!`\\^\\{\\}][\\w'#\\$\\%&\\-\\/=\\?;\\.\\|~\\!`\\^\\{\\}\\+]{5,79}@[a-zA-Z\\d\\.\\-]{2,80}$"
		},
		"tnRoutineWithNoNumber": {
			"enum": [
				null,
				"",
				"port-no-temp",
				"auto",
				"no-number"
			]
		},
		"bwksDnSchema": {
			"type": "string",
			"description": "A formatted TN.",
			"pattern": "^\\+\\d+-\\d+$",
			"minLength": 1,
			"maxLength": 23,
			"required": false
		},
		"tnRoutine": {
			"enum": [
				null,
				"",
				"port-no-temp",
				"auto"
			]
		},
		"numberOfRings": {
			"enum": [
				0,
				2,
				3,
				4,
				5,
				6,
				7,
				8,
				9,
				10,
				11,
				12,
				13,
				14,
				15,
				16,
				17,
				18,
				19,
				20
			]
		},
		"bwksNonFormattedDnSchema": {
			"type": "string",
			"description": "A non-E.164 formatted TN.",
			"pattern": "^[\\d\\-]+$",
			"minLength": 1,
			"maxLength": 23,
			"required": false
		},
		"outgoingDnOrSipUri": {
			"anyOf": [
				{
					"id": "E.164 DN",
					"extends": [
						{
							"$ref": "/bwksDnSchema"
						},
						{
							"type": [
								"string",
								"null"
							]
						}
					]
				},
				{
					"id": "non-E.164 DN",
					"$ref": "/bwksNonFormattedDnSchema"
				},
				{
					"id": "SIP URI",
					"$ref": "/bwksSipUri"
				}
			]
		},
		"bwksSipUri": {
			"type": "string",
			"description": "SIP URI",
			"pattern": "^[\\+]?[\\w\\-\\.\\!~\\*'\\(\\)]+@[a-zA-Z\\d\\.\\-]+$",
			"minLength": 1,
			"maxLength": 161,
			"required": false
		}
	},
	"response": {}
}

PUT /loki/users/{+userId}
{
    "requestURITemplate": {
        "title": "Modify User request URI template parameters schema",
        "additionalProperties": false,
        "properties": {
            "userId": { 
                "type": "string", 
                "minLength": 1, 
                "maxLength": 161,
                "pattern": "^[\\w'#\\$\\%&\\-\\/=\\?;\\.\\|~\\!`\\^\\{\\}][\\w'#\\$\\%&\\-\\/=\\?;\\.\\|~\\!`\\^\\{\\}\\+]{5,79}@[a-zA-Z\\d\\.\\-]{2,80}$",
                "required": true 
            }
        }
    },
    "requestBody": { 
        "title": "Modify User request body parameters schema",
        "type": "object",
        "additionalProperties": false,
        "properties": {
            "phoneNumber": {
                "type": ["string", "null"],
                "pattern": "^\\+\\d+-\\d+$",
                "minLength": 1,
                "maxLength": 23
            },
			"tnRoutine": { "enum": ["", "port-no-temp", "auto", "no-number"] },
			"extension": { "type": ["string", "null"], "minLength": 2, "maxLength": 20,	"pattern": "^[0-9]+$" },
			"CLID": {
                "type": "string",
                "pattern": "^\\+\\d+-\\d+$",
                "minLength": 1,
                "maxLength": 23
            },
			"lastName": { "type": "string",	"minLength": 1,	"maxLength": 30 },
			"firstName": { "type": "string", "minLength": 1, "maxLength": 30 },
			"callingLineIdLastName": { "type": "string", "minLength": 1, "maxLength": 30, "pattern": "^[\\x20-\\x21\\x23-\\x24\\x26-\\x2A\\x2C-\\x2E\\x30-\\x7F]+$"	},
			"callingLineIdFirstName": { "type": "string", "minLength": 1, "maxLength": 30, "pattern": "^[\\x20-\\x21\\x23-\\x24\\x26-\\x2A\\x2C-\\x2E\\x30-\\x7F]+$" },
			"email": { "type": "string", "minLength": 1, "maxLength": 80, "format": "email"	},
			"timeZone": { "type": "string",	"minLength": 1,	"maxLength": 127 },
			"language": { "type": "string",	"minLength": 1,	"maxLength": 40	},
			"department": { "type": "string", "minLength": 1, "maxLength": 50},
			"address": {
                "type": "object",
                "additionalProperties": false,
                "properties": {
                    "addressLine1": { "type": "string", "minLength": 1, "maxLength": 80 },
                    "addressLine2": { "type": "string", "minLength": 1, "maxLength": 80 },
                    "city": { "type": "string", "minLength": 1, "maxLength": 50 },
                    "stateOrProvince": { "type": "string", "minLength": 1, "maxLength": 50 },
                    "zipOrPostalCode": { "type": "string", "minLength": 1, "maxLength": 50 },
                    "country": { "type": "string", "minLength": 1, "maxLength": 50 }
                }
            }
        }
    },
    "response": {
	    "title": "Modify User response body parameters schema",
	    "type": "object",
        "properties": {
            "_links": {
				"type": "object",
				"required": true,
				"properties": {
					"self": {
						"type": "object",
						"required": true,
						"properties": {
							"href": {
								"type": "string",
								"required": true
							}
						}
					}
				}
			},
			"userId": { 
                "type": "string", 
                "minLength": 1, 
                "maxLength": 161,
                "pattern": "^[\\w'#\\$\\%&\\-\\/=\\?;\\.\\|~\\!`\\^\\{\\}][\\w'#\\$\\%&\\-\\/=\\?;\\.\\|~\\!`\\^\\{\\}\\+]{5,79}@[a-zA-Z\\d\\.\\-]{2,80}$",
                "required": true 
            },
			"extensions": {
				"type": "object",
				"additionalProperties": false,
				"properties": {
					"broadworks": {
						"type": "object",
						"additionalProperties": false,
						"properties": {
							"resourceId": { 
                                "type": "string", 
                                "minLength": 1, 
                                "maxLength": 161,
                                "pattern": "^[\\w'#\\$\\%&\\-\\/=\\?;\\.\\|~\\!`\\^\\{\\}][\\w'#\\$\\%&\\-\\/=\\?;\\.\\|~\\!`\\^\\{\\}\\+]{5,79}@[a-zA-Z\\d\\.\\-]{2,80}$",
                                "required": true 
                            }
						}
					}
				}
			},
			"curies": {
				"type": "array",
				"required": true,
				"items": {
					"type": "object",
					"properties": {
						"name": { "type": "string", "required": true },
						"href": { "type": "string", "required": true },
						"templated": { "type": "boolean", "required": true }
					}
				}
			}
        }
	}
}

PUT /loki/users/{+userId}/call-processing-policy
{
    "request" : {
        "type": "object",
        "properties" : {
                "extensions" : {
                    "type": "object",
                    "properties" : {
                        "broadworks" : {}
                    }
                }
            }
        },
    "response" : { }
}

POST /loki/customers/{+customerId}/sites/{+siteId}/trunk-groups{?mode}
{
	"request": {
		"post": {
			"body": {
				"id": "voipTrunkGroupsBody",
				"type": "object",
				"required": true,
				"additionalProperties": false,
				"title": "Post schema, body",
				"properties": {
					"trunkGroupName": {
						"type": "string",
						"minLength": 1,
						"maxLength": 30,
						"required": true
					},
					"accessDevice": {
						"type": "object",
						"required": true,
						"additionalProperties": false,
						"properties": {
							"deviceManagementRoutine": {
								"enum": [
									"create",
									"existing"
								]
							},
							"level": {
								"enum": [
									"Site"
								],
								"required": true
							},
							"deviceType": {
								"type": "string",
								"minLength": 1,
								"maxLength": 40
							},
							"deviceName": {
								"type": "string",
								"minLength": 1,
								"maxLength": 40,
								"required": true
							},
							"hostname": {
								"type": "string",
								"minLength": 1,
								"maxLength": 80
							}
						}
					},
					"pilotUser": {
						"type": "object",
						"required": true,
						"additionalProperties": false,
						"properties": {
							"customerId": {
								"type": "string",
								"minLength": 1,
								"maxLength": 30
							},
							"siteId": {
								"type": "string",
								"minLength": 1,
								"maxLength": 30
							},
							"userId": {
								"$ref": "/userId"
							},
							"phoneNumber": {
								"$ref": "/bwksDnSchema"
							},
							"tnRoutine": {
								"$ref": "/tnRoutineWithNoNumber"
							},
							"extension": {
								"type": [
									"string",
									"null"
								],
								"minLength": 2,
								"maxLength": 20,
								"pattern": "^[0-9]+$"
							},
							"CLID": {
								"$ref": "/bwksDnSchema"
							},
							"lastName": {
								"type": "string",
								"minLength": 1,
								"maxLength": 30
							},
							"firstName": {
								"type": "string",
								"minLength": 1,
								"maxLength": 30
							},
							"callingLineIdLastName": {
								"type": "string",
								"minLength": 1,
								"maxLength": 30,
								"pattern": "^[\\x20-\\x21\\x23-\\x24\\x26-\\x2A\\x2C-\\x2E\\x30-\\x7F]+$"
							},
							"callingLineIdFirstName": {
								"type": "string",
								"minLength": 1,
								"maxLength": 30,
								"pattern": "^[\\x20-\\x21\\x23-\\x24\\x26-\\x2A\\x2C-\\x2E\\x30-\\x7F]+$"
							},
							"email": {
								"type": "string",
								"minLength": 1,
								"maxLength": 80,
								"format": "email"
							},
							"timeZone": {
								"type": "string",
								"minLength": 1,
								"maxLength": 127
							},
							"language": {
								"type": "string",
								"minLength": 1,
								"maxLength": 40
							},
							"role": {
								"type": "any"
							},
							"servicePacks": {
								"type": "object",
								"additionalProperties": false,
								"description": "Service Packs that will be assigned to User",
								"properties": {
									"base": {
										"type": "string",
										"minLength": 1,
										"maxLength": 80
									},
									"add-on": {
										"type": "array",
										"items": {
											"type": "string",
											"minLength": 1,
											"maxLength": 80
										}
									}
								}
							},
							"services": {
								"type": "object",
								"properties": {
									"Authentication": {
										"type": "object",
										"additionalProperties": false,
										"properties": {
											"username": {
												"type": "string",
												"minLength": 1,
												"maxLength": 80
											},
											"password": {
												"type": "string",
												"minLength": 1,
												"maxLength": 60
											}
										}
									},
									"Charge Number": {
										"type": "object",
										"additionalProperties": false,
										"properties": {
											"phoneNumber": {
												"extends": [
													{
														"$ref": "/bwksDnSchema"
													},
													{
														"type": [
															"string",
															"null"
														]
													}
												]
											},
											"useChargeNumberForEnhancedTranslations": {
												"type": "boolean"
											},
											"sendChargeNumberToNetwork": {
												"type": "boolean"
											},
											"tnRoutine": {
												"$ref": "/tnRoutine"
											}
										}
									},
									"Third-Party Voice Mail Support": {
										"type": "object",
										"additionalProperties": false,
										"properties": {
											"isActive": {
												"type": "boolean"
											},
											"busyRedirectToVoiceMail": {
												"type": "boolean"
											},
											"noAnswerRedirectToVoiceMail": {
												"type": "boolean"
											},
											"noAnswerNumberOfRings": {
												"$ref": "/numberOfRings"
											},
											"alwaysRedirectToVoiceMail": {
												"type": "boolean"
											},
											"outOfPrimaryZoneRedirectToVoiceMail": {
												"type": "boolean"
											},
											"serverSelection": {
												"enum": [
													"Group Mail Server",
													"User Specific Mail Server"
												]
											},
											"userServer": {
												"$ref": "/outgoingDnOrSipUri"
											},
											"mailboxIdType": {
												"enum": [
													"User Or Group Phone Number",
													"URL"
												]
											},
											"mailboxURL": {
												"extends": [
													{
														"$ref": "/bwksSipUri"
													},
													{
														"type": [
															"string",
															"null"
														]
													}
												]
											}
										}
									},
									"Call Forwarding No Answer": {
										"type": "object",
										"additionalProperties": false,
										"properties": {
											"isActive": {
												"type": "boolean"
											},
											"forwardToPhoneNumber": {
												"$ref": "/outgoingDnOrSipUri"
											},
											"numberOfRings": {
												"$ref": "/numberOfRings"
											}
										}
									},
									"Call Forwarding Not Reachable": {
										"type": "object",
										"additionalProperties": false,
										"properties": {
											"isActive": {
												"type": "boolean",
												"required": false
											},
											"forwardToPhoneNumber": {
												"$ref": "/outgoingDnOrSipUri"
											}
										}
									}
								}
							},
							"extensions": {
								"type": "object",
								"additionalProperties": false,
								"properties": {
									"broadworks": {
										"type": "object",
										"additionalProperties": false,
										"properties": {
											"serviceProviderId": {
												"type": "string",
												"minLength": 1,
												"maxLength": 30
											},
											"groupId": {
												"type": "string",
												"minLength": 1,
												"maxLength": 30
											}
										}
									}
								}
							}
						}
					},
					"department": {
						"type": "string",
						"minLength": 1,
						"maxLength": 50
					},
					"capacityManagement": {
						"type": "object",
						"required": true,
						"additionalProperties": false,
						"properties": {
							"maxActiveCalls": {
								"type": "object",
								"required": true,
								"additionalProperties": false,
								"properties": {
									"total": {
										"type": "integer",
										"minimum": 1,
										"required": true
									},
									"incoming": {
										"type": "integer",
										"minimum": 1,
										"maximum": 999999
									},
									"outgoing": {
										"type": "integer",
										"minimum": 1,
										"maximum": 999999
									}
								}
							},
							"burstingMaxActiveCalls": {
								"type": "object",
								"required": true,
								"additionalProperties": false,
								"properties": {
									"enabled": {
										"$ref": "/requiredBoolean"
									},
									"total": {
										"type": "integer",
										"minimum": 0,
										"maximum": 999999
									},
									"incoming": {
										"type": "integer",
										"minimum": 0,
										"maximum": 999999
									},
									"outgoing": {
										"type": "integer",
										"minimum": 0,
										"maximum": 999999
									}
								}
							},
							"incomingCapacityExceeded": {
								"type": "object",
								"required": true,
								"additionalProperties": false,
								"properties": {
									"action": {
										"$ref": "/trunkingActions"
									},
									"forwardAddress": {
										"$ref": "/outgoingDnOrSipUri"
									},
									"rerouteTrunkGroup": {
										"$ref": "/rerouteTrunkGroup"
									},
									"initialCalls": {
										"type": "integer",
										"minimum": 0,
										"required": true
									},
									"offsetCalls": {
										"type": "integer",
										"minimum": 0,
										"required": true
									}
								}
							}
						}
					},
					"unreachableDestination": {
						"type": "object",
						"required": true,
						"additionalProperties": false,
						"properties": {
							"timeout": {
								"type": "integer",
								"minimum": 0,
								"maximum": 15,
								"required": true
							},
							"action": {
								"$ref": "/trunkingActions"
							},
							"forwardAddress": {
								"$ref": "/outgoingDnOrSipUri"
							},
							"rerouteTrunkGroup": {
								"$ref": "/rerouteTrunkGroup"
							}
						}
					},
					"authentication": {
						"type": "object",
						"required": true,
						"additionalProperties": false,
						"properties": {
							"enabled": {
								"$ref": "/requiredBoolean"
							},
							"username": {
								"type": "string",
								"minLength": 1,
								"maxLength": 80
							},
							"password": {
								"type": "string",
								"minLength": 1,
								"maxLength": 60
							}
						}
					},
					"hostedUsers": {
						"type": "array"
					},
					"identity": {
						"type": "object",
						"required": true,
						"additionalProperties": false,
						"properties": {
							"trunkGroupIdentity": {
								"type": "object",
								"required": true,
								"additionalProperties": false,
								"properties": {
									"identity": {
										"$ref": "/bwksSipUri"
									},
									"allowTerminationToTrunkGroupIdentity": {
										"$ref": "/requiredBoolean"
									},
									"includeTrunkGroupIdentity": {
										"$ref": "/requiredBoolean"
									},
									"includeTrunkGroupIdentityForNetworkCalls": {
										"$ref": "/requiredBoolean"
									}
								}
							},
							"otgDtgIdentity": {
								"type": "object",
								"required": true,
								"additionalProperties": false,
								"properties": {
									"identity": {
										"type": "string",
										"minLength": 1,
										"maxLength": 80
									},
									"allowTerminationToDtgIdentity": {
										"$ref": "/requiredBoolean"
									},
									"includeDtgIdentity": {
										"$ref": "/requiredBoolean"
									},
									"includeOtgIdentityForNetworkCalls": {
										"$ref": "/requiredBoolean"
									}
								}
							},
							"enableNetworkAddressIdentity": {
								"$ref": "/requiredBoolean"
							}
						}
					},
					"allowUnscreenedCalls": {
						"$ref": "/requiredBoolean"
					},
					"allowUnscreenedEmergencyCalls": {
						"$ref": "/requiredBoolean"
					},
					"pilotUserCallingLineIdentityPolicy": {
						"enum": [
							"All Originating Calls",
							"Unscreened Originating Calls",
							"No Calls"
						],
						"required": true
					},
					"pilotUserChargeNumberPolicy": {
						"enum": [
							"All Originating Calls",
							"Unscreened Originating Calls",
							"No Calls"
						],
						"required": true
					},
					"callForwardingAlways": {
						"type": "object",
						"additionalProperties": false,
						"properties": {
							"action": {
								"$ref": "/trunkingActions"
							},
							"forwardAddress": {
								"$ref": "/outgoingDnOrSipUri"
							},
							"rerouteTrunkGroup": {
								"$ref": "/rerouteTrunkGroup"
							}
						}
					},
					"peeringDomain": {
						"type": "object",
						"required": true,
						"additionalProperties": false,
						"properties": {
							"domainName": {
								"type": "string",
								"minLength": 1,
								"maxLength": 80
							},
							"routeToPeeringDomain": {
								"$ref": "/requiredBoolean"
							}
						}
					},
					"trunkGroupPrefix": {
						"type": "object",
						"required": true,
						"additionalProperties": false,
						"properties": {
							"enabled": {
								"$ref": "/requiredBoolean"
							},
							"prefix": {
								"type": "string",
								"minLength": 1,
								"maxLength": 15
							}
						}
					},
					"advancedReroute": {
						"type": "object",
						"required": true,
						"additionalProperties": false,
						"properties": {
							"enabled": {
								"$ref": "/requiredBoolean"
							},
							"sendContinuousOptionsMessage": {
								"$ref": "/requiredBoolean"
							},
							"continuousOptionsSendingInterval": {
								"type": "integer",
								"minimum": 30,
								"maximum": 86400,
								"required": true
							},
							"failureOptionsSendingInterval": {
								"type": "integer",
								"minimum": 10,
								"maximum": 86400,
								"required": true
							},
							"failureThresholdCounter": {
								"type": "integer",
								"minimum": 1,
								"maximum": 60,
								"required": true
							},
							"successThresholdCounter": {
								"type": "integer",
								"minimum": 1,
								"maximum": 60,
								"required": true
							},
							"inviteFailureThresholdCounter": {
								"type": "integer",
								"minimum": 1,
								"maximum": 60,
								"required": true
							},
							"inviteFailureThresholdWindow": {
								"type": "integer",
								"minimum": 30,
								"maximum": 240,
								"required": true
							}
						}
					},
					"pilotUserCallingLineAssertedIdentityPolicy": {
						"type": "object",
						"required": true,
						"additionalProperties": false,
						"properties": {
							"useTrunkGroupCallingLineAssertedIdentityPolicy": {
								"$ref": "/requiredBoolean"
							},
							"callingLineAssertedIdentityPolicy": {
								"enum": [
									"All Originating Calls",
									"Unscreened Originating Calls"
								],
								"required": true
							}
						}
					}
				}
			}
		}
	},
	"definitions": {
		"requiredBoolean": {
			"type": "boolean",
			"required": true
		},
		"trunkingActions": {
			"enum": [
				"Forward",
				"Reroute"
			]
		},
		"bwksNonFormattedDnSchema": {
			"type": "string",
			"description": "A non-E.164 formatted TN.",
			"pattern": "^[\\d\\-]+$",
			"minLength": 1,
			"maxLength": 23,
			"required": false
		},
		"outgoingDnOrSipUri": {
			"anyOf": [
				{
					"id": "E.164 DN",
					"extends": [
						{
							"$ref": "/bwksDnSchema"
						},
						{
							"type": [
								"string",
								"null"
							]
						}
					]
				},
				{
					"id": "non-E.164 DN",
					"$ref": "/bwksNonFormattedDnSchema"
				},
				{
					"id": "SIP URI",
					"$ref": "/bwksSipUri"
				}
			]
		},
		"rerouteTrunkGroup": {
			"type": "object",
			"additionalProperties": false,
			"properties": {
				"siteId": {
					"type": "string",
					"minLength": 1,
					"maxLength": 30
				},
				"trunkGroupName": {
					"type": "string",
					"minLength": 1,
					"maxLength": 30
				}
			}
		},
		"bwksSipUri": {
			"type": "string",
			"description": "SIP URI",
			"pattern": "^[\\+]?[\\w\\-\\.\\!~\\*'\\(\\)]+@[a-zA-Z\\d\\.\\-]+$",
			"minLength": 1,
			"maxLength": 161,
			"required": false
		}
	},
	"response": {}
}

POST /loki/sites/{+siteId}/phone-numbers/activate
{
	"request": {
		"post": {
			"body": {
				"id": "voipTNActivationBody",
				"type": "object",
				"required": true,
				"additionalProperties": false,
				"title": "Post schema, body",
				"properties": {
					"phoneNumbers": {
						"type": "array",
						"items": {
							"anyOf": [
								{
									"id": "E.164 DN",
									"$ref": "/bwksDnSchema"
								},
								{
									"id": "TN Range",
									"type": "object",
									"additionalProperties": false,
									"properties": {
										"start": {
											"$ref": "/bwksDnSchema"
										},
										"end": {
											"$ref": "/bwksDnSchema"
										}
									}
								}
							]
						}
					}
				}
			}
		}
	},
	"definitions": {
		"bwksDnSchema": {
			"type": "string",
			"description": "A formatted TN.",
			"pattern": "^\\+\\d+-\\d+$",
			"minLength": 1,
			"maxLength": 23,
			"required": false
		}
	},
	"response": {}
}

POST /loki/sites/{+siteId}/phone-numbers/deactivate
{
	"request": {
		"post": {
			"body": {
				"id": "voipTNActivationBody",
				"type": "object",
				"required": true,
				"additionalProperties": false,
				"title": "Post schema, body",
				"properties": {
					"phoneNumbers": {
						"type": "array",
						"items": {
							"anyOf": [
								{
									"id": "E.164 DN",
									"$ref": "/bwksDnSchema"
								},
								{
									"id": "TN Range",
									"type": "object",
									"additionalProperties": false,
									"properties": {
										"start": {
											"$ref": "/bwksDnSchema"
										},
										"end": {
											"$ref": "/bwksDnSchema"
										}
									}
								}
							]
						}
					}
				}
			}
		}
	},
	"definitions": {
		"bwksDnSchema": {
			"type": "string",
			"description": "A formatted TN.",
			"pattern": "^\\+\\d+-\\d+$",
			"minLength": 1,
			"maxLength": 23,
			"required": false
		}
	},
	"response": {}
}

POST /loki/customers/{+customerId}/sites/{+siteId}/devices/{?mode}
{
	"request": {
		"post": {
            "body": {
                "id": "voipDevicesBodySchema",
                "type": "object",
                "required": true,
                "additionalProperties": false,
                "title": "Post schema, body",
                "properties": {
                    "deviceName": { 
                        "type": "string",
                        "minLength": 1,
                        "maxLength": 40,
                        "required": true
                    },
                    "type": {
                        "type": "string",
                        "minLength": 1,
                        "maxLength": 40, 
                        "required": true
                    },
                    "protocol": {
                        "type": "string",
                        "minLength": 1,
                        "maxLength": 20
                    },
                    "hostname": {
                        "type": "string",
                        "minLength": 1, 
                        "maxLength": 40
                    },
                    "port": {
                        "type": "integer",
                        "minimum": 1025,
                        "maximum": 65535
                    },
                    "outboundProxyServerNetAddress": {
                        "type": "string",
                        "minLength": 1,
                        "maxLength": 80
                    },
                    "stunServerNetAddress": { 
                        "type": "string",
                        "minLength": 1,
                        "maxLength": 80
                    },
                    "macAddress": {
                        "type": "string",
                        "minLength": 1,
                        "maxLength": 12
                    },
                    "serialNumber": {
                        "type": "string",
                        "minLength": 1, 
                        "maxLength": 80
                    },
                    "description": { 
                        "type": "string",
                        "minLength": 1,
                        "maxLength": 80
                    },
                    "physicalLocation": { 
                        "type": "string",
                        "minLength": 1, 
                        "maxLength": 1024
                    },
                    "transportProtocol": { 
                        "enum": ["UDP", "TCP", "Unspecified"]
                    },
                    "deviceCredentials": {
                        "type": "object",
                        "additionalProperties": false,
                        "properties": {
                            "enabled": {
                                "$ref": "/requiredBoolean"
                                },
                            "username": { 
                                "type": "string",
                                "minLength": 1, 
                                "maxLength": 161,
                                "required": true
                            },
                            "password": {
                                "type": "string",
                                "minLength": 1,
                                "maxLength": 60,
                                "required": true
                            }
                        }
                    },
                    "sacGroup": {
                        "type": "any"
                    },
                    "customTags": {
                        "type": "any"
                    },
                    "extensions": {
                        "type": "any"
                    }
                }
            }
        }
	},
	"definitions": {
		"requiredBoolean": {
			"type": "boolean",
			"required": true
		}
	},
	"response": {}
}

PUT /loki/users/{+userId}/services/Alternate%20Numbers
{   
    "requestURITemplate": {
        "title": "User Alternate Numbers Modify request URI template parameters schema",
        "additionalProperties": false,
        "properties": {
            "userId": { 
                "type": "string", 
                "minLength": 1, 
                "maxLength": 161,
                "pattern": "^[\\w'#\\$\\%&\\-\\/=\\?;\\.\\|~\\!`\\^\\{\\}][\\w'#\\$\\%&\\-\\/=\\?;\\.\\|~\\!`\\^\\{\\}\\+]{5,79}@[a-zA-Z\\d\\.\\-]{2,80}$",
                "required": true 
            }
        }
    },
    "requestBody": { 
        "title": "User Alternate Numbers Modify request body parameters schema",
        "type": "object",
        "additionalProperties": false,
        "properties": {
            "distinctiveRing": {
                "type": "boolean"
            },
            "alternateNumbers": {
                "type": "array",
                "maxItems": 10,
                "items": {
                    "type": "object",
                    "additionalProperties": false,
                    "properties": {
                        "id": { "type": "integer", "min": 1, "max": 10, "required": true },
                        "tnRoutine": { "enum": ["", "port-no-temp", "auto"] },
                        "phoneNumber": {
                            "extends":[{
                                "$ref": "/bwksDnSchema"
                            }, {
                                "type": ["string", "null"]
                            }]
                        },
                        "extension": {
                            "type": ["string", "null"],
                            "minLength": 2,
                            "maxLength": 20,
                            "pattern":"^[0-9]+$"
                        },
                        "ringPattern": {
                            "enum": [null, "Normal", "Long-Long", "Short-Short-Long", "Short-Long-Short"]
                        }
                    }
                }
            }
        }
    },
    "response": {}
}

DELETE /loki/users/{+userId}{?keepMailbox}
{
    "requestURITemplate": {
        "title": "Delete User request URI template parameters schema",
        "additionalProperties": false,
        "properties": {
            "userId": { 
                "type": "string", 
                "minLength": 1, 
                "maxLength": 161,
                "pattern": "^[\\w'#\\$\\%&\\-\\/=\\?;\\.\\|~\\!`\\^\\{\\}][\\w'#\\$\\%&\\-\\/=\\?;\\.\\|~\\!`\\^\\{\\}\\+]{5,79}@[a-zA-Z\\d\\.\\-]{2,80}$",
                "required": true 
            }
        }
    },
    "requestURIQuery": {
        "title": "Delete User URI Query parameters schema",
        "properties": {
            "keepMailbox": { "enum": [ "true", "false"] }
        }
    },
    "requestBody": {},
    "response": {}
}

POST /loki/users/{+userId}/resetDeviceCredentials
{
    "requestURITemplate": {
        "title": "Reset User Device Credentials request URI template parameters schema",
        "additionalProperties": false,
        "properties": {
            "userId": { 
                "type": "string", 
                "minLength": 1, 
                "maxLength": 161,
                "pattern": "^[\\w'#\\$\\%&\\-\\/=\\?;\\.\\|~\\!`\\^\\{\\}][\\w'#\\$\\%&\\-\\/=\\?;\\.\\|~\\!`\\^\\{\\}\\+]{5,79}@[a-zA-Z\\d\\.\\-]{2,80}$",
                "required": true 
            }
        }
    },
    "requestBody": {},
    "response": {
        "title": "Reset User Device Credentials response body parameters schema",
	    "type": "object",
        "properties": {
            "_links": {
            	"type": "object",
            	"required": true,
            	"properties": {
            		"self": {
            			"type": "object",
            			"required": true,
            			"properties": {
            				"href": {
            					"type": "string",
            					"required": true
            				}
            			}
            		}
            	}
            },
            "username": {"type": "string", "minLength": 1, "maxLength": 161, "required": true },
            "password": {"type": "string", "minLength": 1, "maxLength": 60, "required": true },
            "curies": {
            	"type": "array",
            	"required": true,
            	"items": {
            		"type": "object",
            		"properties": {
            			"name": { "type": "string", "required": true },
            			"href": { "type": "string", "required": true },
            			"templated": { "type": "boolean", "required": true }
            		}
            	}
            }
        }
    }
}

PUT /loki/users/{+userId}/services/assigned-services
{
    "requestURITemplate": {
        "title": "Modify User assigned services request URI template parameters schema",
        "additionalProperties": false,
        "properties": {
            "userId": { 
                "type": "string", 
                "minLength": 1, 
                "maxLength": 161,
                "pattern": "^[\\w'#\\$\\%&\\-\\/=\\?;\\.\\|~\\!`\\^\\{\\}][\\w'#\\$\\%&\\-\\/=\\?;\\.\\|~\\!`\\^\\{\\}\\+]{5,79}@[a-zA-Z\\d\\.\\-]{2,80}$"
            }
        }
    },
    "requestBody": {},
    "response": {}
}

GET /loki/customers/{+customerId}/sites/{+siteId}/services/Voice Portal
{
    "requestURITemplate": {
        "title": "VoIP Entity - Retrieve Site Voice Portal service settings request URI template parameters schema",
        "properties": {
            "customerId": { "type": "string", "minLength": 1, "maxLength": 30, "required": true },
            "siteId": { "type": "string", "minLength": 1, "maxLength": 30, "required": true }
        }
    },
    "requestBody": { },
    "response": { 
        "title": "VoIP Entity - Retrieve Site Voice Portal service settings response body schema",
        "type": "object",
        "properties": {
            "_links": {
				"type": "object",
				"required": true,
				"properties": {
					"self": {
						"type": "object",
						"required": true,
						"properties": {
							"href": {
								"type": "string",
								"required": true
							}
						}
					}
				}
			},
			"customerId": { "type": "string", "minLength": 1, "maxLength": 30, "required": true },
            "siteId": { "type": "string", "minLength": 1, "maxLength": 30, "required": true },
            "voicePortalId": { 
                "type": "string", 
                "minLength": 1, 
                "maxLength": 161,
                "pattern": "^[\\w'#\\$\\%&\\-\\/=\\?;\\.\\|~\\!`\\^\\{\\}][\\w'#\\$\\%&\\-\\/=\\?;\\.\\|~\\!`\\^\\{\\}\\+]{5,79}@[a-zA-Z\\d\\.\\-]{2,80}$"
            },
            "curies": {
				"type": "array",
				"required": true,
				"items": {
					"type": "object",
					"properties": {
						"name": { "type": "string", "required": true },
						"href": { "type": "string", "required": true },
						"templated": { "type": "boolean", "required": true }
					}
				}
			},
            "profile": {
                "type": "object",
                "properties": {
                    "name": { "type": "string", "minLength": 1, "maxLength": 30 },
                    "callingLineId": {
                        "type": "object",
                        "properties": {
                            "lastName": { "type": "string", "minLength": 1, "maxLength": 30 },
                            "firstName": { "type": "string", "minLength": 1, "maxLength": 30 },
                            "phoneNumber": { "type": "string", "minLength": 1, "maxLength": 23, "pattern": "^[\\d\\-]+$" }
                        }
                    },
                    "phoneNumber": { "type": "string", "minLength": 1, "maxLength": 23, "pattern": "^[\\d\\-]+$" },
                    "extension": { "type": "string", "minLength": 1, "maxLength": 20, "pattern": "^[\\d\\-]+$" },
                    "countryCode": { "type": "string" },
                    "nationalPrefix": { "type": "string" },
                    "department": { "type": "string", "minLength": 1, "maxLength": 50 },
                    "language": { "type": "string", "minLength": 1, "maxLength": 40 },
                    "timeZone": { "type": "string", "minLength": 1, "maxLength": 127 },
                    "timeZoneDisplayName": { "type": "string", "minLength": 1, "maxLength": 127 },
                    "alias": { "type": [ "string", "array" ] },
                    "publicUserIdentity": { "type": "string", "minLength": 1, "maxLength": 161, "pattern": "^[\\+]?[\\w\\-\\.\\!~\\*\\'\\(\\)]+@[a-zA-Z\\d\\.\\-]+$" }
                }
            },
            "isActive": { "type": "boolean" },
            "enableExtendedScope": { "type": "boolean" },
            "allowIdentificationByPhoneNumberOrVoiceMailAliasesOnLogin": { "type": "boolean" },
            "useVoicePortalWizard": { "type": "boolean" },
            "externalRouting": {
                "type": "object",
                "properties": {
                    "scope": { "enum": [ "Group", "System" ] },
                    "useExternal": { "type": "boolean" },
                    "address": { "type": "string", "minLength": 1, "maxLength": 161, "pattern": "^[\\+]?[\\w\\-\\.\\!~\\*\\'\\(\\)]+@[a-zA-Z\\d\\.\\-]+$" }
                }
            },
            "homeZoneName": { "type": "string", "minLength": 1, "maxLength": 80 },
            "networkClassOfService": { "type": "string", "minLength": 1, "maxLength": 40 }
        }
    }
}

PUT /loki/customers/{+customerId}/sites/{+siteId}/services/Voice Portal
{
    "requestURITemplate": {
        "title": "VoIP Entity - Modify Site Voice Portal service settings request URI template parameters schema",
        "properties": {
            "customerId": { "type": "string", "minLength": 1, "maxLength": 30, "required": true },
            "siteId": { "type": "string", "minLength": 1, "maxLength": 30, "required": true }
        }
    },
    "requestBody": {
        "title": "VoIP Entity - Modify Site Voice Portal service settings request body schema",
        "type": "object",
        "properties": {
            "profile": {
                "type": "object",
                "properties": {
                    "name": { "type": "string", "minLength": 1, "maxLength": 30 },
                    "callingLineId": {
                        "type": "object",
                        "properties": {
                            "lastName": { "type": "string", "minLength": 1, "maxLength": 30 },
                            "firstName": { "type": "string", "minLength": 1, "maxLength": 30 },
                            "phoneNumber": { "type": "string", "minLength": 1, "maxLength": 23, "pattern": "^[\\d\\-]+$" }
                        }
                    },
                    "phoneNumber": { "type": "string", "minLength": 1, "maxLength": 23, "pattern": "^[\\d\\-]+$" },
                    "tnRoutine": { "enum": [null, "", "port-no-temp", "auto", "no-number"] },
                    "extension": { "type": "string", "minLength": 1, "maxLength": 20, "pattern": "^[\\d\\-]+$" },
                    "department": { "type": "string", "minLength": 1, "maxLength": 50 },
                    "language": { "type": "string", "minLength": 1, "maxLength": 40 },
                    "timeZone": { "type": "string", "minLength": 1, "maxLength": 127 },
                    "alias": { "type": [ "string", "array" ] },
                    "publicUserIdentity": { "type": "string", "minLength": 1, "maxLength": 161, "pattern": "^[\\+]?[\\w\\-\\.\\!~\\*\\'\\(\\)]+@[a-zA-Z\\d\\.\\-]+$" }
                }
            },
            "isActive": { "type": "boolean" },
            "enableExtendedScope": { "type": "boolean" },
            "allowIdentificationByPhoneNumberOrVoiceMailAliasesOnLogin": { "type": "boolean" },
            "useVoicePortalWizard": { "type": "boolean" },
            "externalRouting": {
                "type": "object",
                "properties": {
                    "scope": { "enum": [ "Group", "System" ] },
                    "useExternal": { "type": "boolean" },
                    "address": { "type": "string", "minLength": 1, "maxLength": 161, "pattern": "^[\\+]?[\\w\\-\\.\\!~\\*\\'\\(\\)]+@[a-zA-Z\\d\\.\\-]+$" }
                }
            },
            "homeZoneName": { "type": "string", "minLength": 1, "maxLength": 80 },
            "networkClassOfService": { "type": "string", "minLength": 1, "maxLength": 40 }
        }
    },
    "response": { }
}

POST /loki/auto-attendants{?mode}
{   
    "requestURIQuery": {
        "title": "Create Site Auto Attendant request URI Query parameters schema",
        "properties": {
			"mode": { "enum": [ "create-only" ], "required": true }
		}
	},
    "requestBody": { 
        "title": "Create Site Auto Attendant request body parameters schema",
        "type": "object",
        "additionalProperties": false,
        "properties": {
            "customerId": { "type": "string", "minLength": 1, "maxLength": 30 },
            "siteId": { "type": "string", "minLength": 1, "maxLength": 30 },
            "extensions": {
                "type": "object",
                "additionalproperties": false,
                "properties": {
                    "broadworks": {
                        "type": "object",
                        "additionalproperties": false,
                        "properties": {
                            "serviceProviderId": { "type": "string", "minLength": 1, "maxLength": 30 },
                            "groupId": { "type": "string", "minLength": 1, "maxLength": 30 },
                            "resourceId": { "type": "string", "minLength": 1, "maxLength": 161 }
                        }
                    }
                }
            },
            "profile": {
                "type": "object",
                "additionalproperties": false,
                "required": true,
                "properties": {
                    "name": { "type": "string", "minLength": 1, "maxLength": 30, "required": true },
                    "callingLineId": {
                        "type": "object",
                        "additionalproperties": false,
                        "properties": {
                            "lastName": { "type": "string", "minLength": 1, "maxLength": 30, "pattern": "^[\\x20-\\x21\\x23-\\x24\\x26-\\x2A\\x2C-\\x2E\\x30-\\x7F]+$" },
                            "firstName": { "type": "string", "minLength": 1, "maxLength": 30, "pattern": "^[\\x20-\\x21\\x23-\\x24\\x26-\\x2A\\x2C-\\x2E\\x30-\\x7F]+$" },
                            "phoneNumber": { "$ref": "/bwksDnSchema" }
                        }
                    },
                    "phoneNumber": { "$ref": "/bwksDnSchema" },
                    "tnRoutine": { "$ref": "/tnRoutineWithNoNumber" },
                    "extension": { "type": ["string", "null"], "minLength": 2, "maxLength": 20, "pattern": "^[0-9]+$" },
                    "password": { "type": "string", "minLength": 1, "maxLength": 60 },
                    "department": { "type": "string", "minLength": 1, "maxLength": 50 },
                    "language": { "type": "string", "minLength": 1, "maxLength": 40 },
                    "timeZone": { "type": "string", "minLength": 1, "maxLength": 127 },
                    "alias": {
                        "type": "array",
                        "maxItems": 3,
                        "items": { "$ref": "/bwksSipUri" }
                    },
                    "publicServiceIdentity": { "$ref": "/bwksSipUri" }
                }
            },
            "networkClassOfService": { "type": "string", "minLength": 1, "maxLength": 40 },
            "services": {
                "type": "object",
                "patternproperties": {
                    "^.+$" : {
                        "type": "object"
                    }
                }
            },
            "type": { "enum": ["Basic", "Standard"] },
            "firstDigitTimeoutSeconds": { "type": "integer", "minimum": 1, "maximum": 60 },
            "enableVideo": { "type": "boolean" },
            "businessHours": {
                "type": "object",
                "additionalProperties": false,
                "properties": {
                    "type": { "enum": ["Service Provider", "Group", "User"], "required": true },
                    "name": { "type": "string", "minLength": 1, "maxLength": 40, "required": true }
                }
            },
            "holidaySchedule": {
                "type": "object",
                "additionalProperties": false,
                "properties": {
                    "type": { "enum": ["Service Provider", "Group", "User"], "required": true },
                    "name": { "type": "string", "minLength": 1, "maxLength": 40, "required": true }
                }
            },
            "extensionDialingScope": { "enum": ["Service Provider", "Group", "Department"] },
            "nameDialingScope": { "enum": ["Service Provider", "Group", "Department"] },
            "nameDialingEntries": { "enum": ["LastName + FirstName", "LastName + FirstName or FirstName + LastName"] },
            "businessHoursMenu": { "type": "object", "additionalProperties": false },
            "afterHoursMenu": { "type": "object", "additionalProperties": false },
            "holidayMenu": { "type": "object", "additionalProperties": false }
        }
    },
    "response": {
	    "title": "Create Site Auto Attendant response body parameters schema",
	    "type": "object",
        "properties": {
            "_links": {
				"type": "object",
				"required": true,
				"properties": {
					"self": {
						"type": "object",
						"required": true,
						"properties": {
							"href": {
								"type": "string",
								"required": true
							}
						}
					}
				}
			},
			"autoAttendantId": { "type": "string", "minLength": 1, "maxLength": 161, "required": true },
			"profile": {
                "type": "object",
                "additionalproperties": false,
                "required": true,
                "properties": {
                    "callingLineId": {
                        "type": "object",
                        "required": true,
                        "additionalproperties": false,
                        "properties": {
                            "lastName": { "type": "string", "minLength": 1, "maxLength": 30, "pattern": "^[\\x20-\\x21\\x23-\\x24\\x26-\\x2A\\x2C-\\x2E\\x30-\\x7F]+$", "required": true },
                            "firstName": { "type": "string", "minLength": 1, "maxLength": 30, "pattern": "^[\\x20-\\x21\\x23-\\x24\\x26-\\x2A\\x2C-\\x2E\\x30-\\x7F]+$", "required": true }
                        }
                    },
                    "extension": { "type": "string", "minLength": 2, "maxLength": 20, "pattern": "^[0-9]+$" },
                    "publicServiceIdentity": { "$ref": "/bwksSipUri" }
                }
            },
            "extensions": {
                "type": "object",
                "required": true,
                "properties": {
                    "type": "object",
                    "properties": {
                        "broadworks": {
                            "type": "object",
                            "required": true,
                            "additionalProperties": false,
                            "properties": {
                                "resourceId":{ "type": "string", "minLength": 1, "maxLength": 161, "required": true }
                            }
                        }
                    }
                }
            },
            "curies": {
				"type": "array",
				"required": true,
				"items": {
					"type": "object",
					"properties": {
						"name": { "type": "string", "required": true },
						"href": { "type": "string", "required": true },
						"templated": { "type": "boolean", "required": true }
					}
				}
			}
        }
	}
}

DELETE /loki/auto-attendants/{+autoAttendantId}
{
    "requestURITemplate": {
        "title": "Delete Auto Attendant request URI template parameters schema",
        "additionalProperties": false,
        "properties": {
            "autoAttendantId": { 
                "type": "string", 
                "description": "The Auto Attendant Id must have the domain, but that is not enforced by validation",
                "minLength": 1, 
                "maxLength": 161,
                "required": true 
            }
        }
    },
    "requestBody": {},
    "response": {}
}

POST /loki/hunt-groups{?mode}
{   
    "requestURIQuery": {
        "title": "Create Site Hunt Group request URI Query parameters schema",
        "properties": {
			"mode": { "enum": [ "create-only" ], "required": true }
		}
	},
    "requestBody": { 
        "title": "Create Site Hunt Group request body parameters schema",
        "type": "object",
        "additionalProperties": false,
        "properties": {
            "customerId": { "type": "string", "minLength": 1, "maxLength": 30 },
            "siteId": { "type": "string", "minLength": 1, "maxLength": 30 },
            "extensions": {
                "type": "object",
                "additionalproperties": false,
                "properties": {
                    "broadworks": {
                        "type": "object",
                        "additionalproperties": false,
                        "properties": {
                            "serviceProviderId": { "type": "string", "minLength": 1, "maxLength": 30 },
                            "groupId": { "type": "string", "minLength": 1, "maxLength": 30 },
                            "resourceId": { "type": "string", "minLength": 1, "maxLength": 161 }
                        }
                    }
                }
            },
            "profile": {
                "type": "object",
                "additionalproperties": false,
                "required": true,
                "properties": {
                    "name": { "type": "string", "minLength": 1, "maxLength": 30, "required": true },
                    "callingLineId": {
                        "type": "object",
                        "additionalproperties": false,
                        "properties": {
                            "lastName": { "type": "string", "minLength": 1, "maxLength": 30, "pattern": "^[\\x20-\\x21\\x23-\\x24\\x26-\\x2A\\x2C-\\x2E\\x30-\\x7F]+$" },
                            "firstName": { "type": "string", "minLength": 1, "maxLength": 30, "pattern": "^[\\x20-\\x21\\x23-\\x24\\x26-\\x2A\\x2C-\\x2E\\x30-\\x7F]+$" },
                            "phoneNumber": { "$ref": "/bwksDnSchema" }
                        }
                    },
                    "phoneNumber": { "$ref": "/bwksDnSchema" },
                    "tnRoutine": { "$ref": "/tnRoutineWithNoNumber" },
                    "extension": { "type": ["string", "null"], "minLength": 2, "maxLength": 20, "pattern": "^[0-9]+$" },
                    "password": { "type": "string", "minLength": 1, "maxLength": 60 },
                    "department": { "type": "string", "minLength": 1, "maxLength": 50 },
                    "language": { "type": "string", "minLength": 1, "maxLength": 40 },
                    "timeZone": { "type": "string", "minLength": 1, "maxLength": 127 },
                    "alias": {
                        "type": "array",
                        "maxItems": 3,
                        "items": { "$ref": "/bwksSipUri" }
                    },
                    "publicServiceIdentity": { "$ref": "/bwksSipUri" }
                }
            },
            "networkClassOfService": { "type": "string", "minLength": 1, "maxLength": 40 },
            "services": {
                "type": "object",
                "patternproperties": {
                    "^.+$" : {
                        "type": "object"
                    }
                }
            },
            "policy": { "enum": ["Circular", "Regular", "Simultaneous", "Uniform", "Weighted"] },
            "noAnswer": {
                "type": "object",
                "additionalProperties": false,
                "properties": {
                    "skipToAgent": { "type": "boolean" },
                    "skipToAgentAfterNumberOfRings": { "type": "integer", "minimum": 1, "maximum": 20 },
                    "forwardCallAfterTimeout": { "type": "boolean" },
                    "forwardAfterTimeoutSeconds": { "type": "integer", "minimum": 1, "maximum": 20 },
                    "forwardToPhoneNumber": { "type": "string", "minLength": 1, "maxLength": 30 }
                }
            },
            "agentUserId": {
                "type": "array",
                "items": { "$ref": "/userId" }
            },
            "allowCallWaitingForAgents": { "type": "boolean" },
            "callingLineIdSettings": {
                "type": "object",
                "additionalProperties": false,
                "properties": {
                    "useCustom": { "type": "boolean" },
                    "includeHuntGroupName": { "type": "boolean" }
                }
            },
            "notReachableSettings": {
                "type": "object",
                "additionalProperties": false,
                "properties": {
                    "enableForwarding": { "type": "boolean" },
                    "forwardToPhoneNumber": { "$ref": "/outgoingDnOrSipUri" },
                    "makeBusyWhenNotReachable": { "type": "boolean" }
                }
            },
            "allowMembersToControlGroupBusy": { "type": "boolean" },
            "enableGroupBusy": { "type": "boolean" },
            "applyGroupBusyWhenTerminatingToAgent": { "type": "boolean" }
        }
    },
    "response": {
	    "title": "Create Site Hunt Group response body parameters schema",
	    "type": "object",
        "properties": {
            "_links": {
				"type": "object",
				"required": true,
				"properties": {
					"self": {
						"type": "object",
						"required": true,
						"properties": {
							"href": {
								"type": "string",
								"required": true
							}
						}
					}
				}
			},
			"huntGroupId": { "type": "string", "minLength": 1, "maxLength": 161, "required": true },
			"profile": {
                "type": "object",
                "additionalproperties": false,
                "required": true,
                "properties": {
                    "callingLineId": {
                        "type": "object",
                        "required": true,
                        "additionalproperties": false,
                        "properties": {
                            "lastName": { "type": "string", "minLength": 1, "maxLength": 30, "pattern": "^[\\x20-\\x21\\x23-\\x24\\x26-\\x2A\\x2C-\\x2E\\x30-\\x7F]+$", "required": true },
                            "firstName": { "type": "string", "minLength": 1, "maxLength": 30, "pattern": "^[\\x20-\\x21\\x23-\\x24\\x26-\\x2A\\x2C-\\x2E\\x30-\\x7F]+$", "required": true }
                        }
                    },
                    "extension": { "type": "string", "minLength": 2, "maxLength": 20, "pattern": "^[0-9]+$" },
                    "publicServiceIdentity": { "$ref": "/bwksSipUri" }
                }
            },
            "extensions": {
                "type": "object",
                "required": true,
                "properties": {
                    "type": "object",
                    "properties": {
                        "broadworks": {
                            "type": "object",
                            "required": true,
                            "additionalProperties": false,
                            "properties": {
                                "resourceId":{ "type": "string", "minLength": 1, "maxLength": 161, "required": true }
                            }
                        }
                    }
                }
            },
            "curies": {
				"type": "array",
				"required": true,
				"items": {
					"type": "object",
					"properties": {
						"name": { "type": "string", "required": true },
						"href": { "type": "string", "required": true },
						"templated": { "type": "boolean", "required": true }
					}
				}
			}
        }
	}
}

DELETE /loki/hunt-groups/{+huntGroupId}
{
    "requestURITemplate": {
        "title": "Delete Hunt Group request URI template parameters schema",
        "additionalProperties": false,
        "properties": {
            "huntGroupId": { 
                "type": "string", 
                "description": "The Hunt Group Id must have the domain, but that is not enforced by validation",
                "minLength": 1, 
                "maxLength": 161,
                "required": true 
            }
        }
    },
    "requestBody": {},
    "response": {}
}

POST /loki/call-centers{?mode}
{   
    "requestURIQuery": {
        "title": "Create Site Call Center request URI Query parameters schema",
        "properties": {
			"mode": { "enum": [ "create-only" ], "required": true }
		}
	},
    "requestBody": { 
        "title": "Create Site Call Center request body parameters schema",
        "type": "object",
        "additionalProperties": false,
        "properties": {
            "customerId": { "type": "string", "minLength": 1, "maxLength": 30 },
            "siteId": { "type": "string", "minLength": 1, "maxLength": 30 },
            "extensions": {
                "type": "object",
                "additionalproperties": false,
                "properties": {
                    "broadworks": {
                        "type": "object",
                        "additionalproperties": false,
                        "properties": {
                            "serviceProviderId": { "type": "string", "minLength": 1, "maxLength": 30 },
                            "groupId": { "type": "string", "minLength": 1, "maxLength": 30 },
                            "resourceId": { "type": "string", "minLength": 1, "maxLength": 161 }
                        }
                    }
                }
            },
            "profile": {
                "type": "object",
                "additionalproperties": false,
                "required": true,
                "properties": {
                    "name": { "type": "string", "minLength": 1, "maxLength": 30, "required": true },
                    "callingLineId": {
                        "type": "object",
                        "additionalproperties": false,
                        "properties": {
                            "lastName": { "type": "string", "minLength": 1, "maxLength": 30, "pattern": "^[\\x20-\\x21\\x23-\\x24\\x26-\\x2A\\x2C-\\x2E\\x30-\\x7F]+$" },
                            "firstName": { "type": "string", "minLength": 1, "maxLength": 30, "pattern": "^[\\x20-\\x21\\x23-\\x24\\x26-\\x2A\\x2C-\\x2E\\x30-\\x7F]+$" },
                            "phoneNumber": { "$ref": "/bwksDnSchema" }
                        }
                    },
                    "phoneNumber": { "$ref": "/bwksDnSchema" },
                    "tnRoutine": { "$ref": "/tnRoutineWithNoNumber" },
                    "extension": { "type": ["string", "null"], "minLength": 2, "maxLength": 20, "pattern": "^[0-9]+$" },
                    "password": { "type": "string", "minLength": 1, "maxLength": 60 },
                    "department": { "type": "string", "minLength": 1, "maxLength": 50 },
                    "language": { "type": "string", "minLength": 1, "maxLength": 40 },
                    "timeZone": { "type": "string", "minLength": 1, "maxLength": 127 },
                    "alias": {
                        "type": "array",
                        "maxItems": 3,
                        "items": { "$ref": "/bwksSipUri" }
                    },
                    "publicServiceIdentity": { "$ref": "/bwksSipUri" }
                }
            },
            "networkClassOfService": { "type": "string", "minLength": 1, "maxLength": 40 },
            "services": {
                "type": "object",
                "patternproperties": {
                    "^.+$" : {
                        "type": "object"
                    }
                }
            },
            "type": { "enum": ["Basic", "Standard", "Premium"], "required": true },
            "routingtype": { "enum": ["Priority Based", "Skill Based"] },
            "policy": { "enum": ["Circular", "Regular", "Simultaneous", "Uniform", "Weighted"] },
            "enableReporting": { "type": "boolean" },
            "callCenterSettings": {
                "type": "object",
                "additionalProperties": false,
                "properties": {
                    "enableVideo": { "type": "boolean" },
                    "queueLength": { "type": "integer", "minimum": 0, "maximum": 525 },
                    "playRingingWhenOfferingCall": { "type": "boolean" },
                    "allowCallerToDialEscapeDigit": { "type": "boolean" },
                    "escapeDigit": { "type": "string", "minLength": 1, "maxLength": 1, "pattern": "^[0-9]+$" },
                    "resetCallStatisticsUponEntryInQueue": { "type": "boolean" }
                }
            },
            "agentSettings": {
                "type": "object",
                "additionalProperties": false,
                "properties": {
                    "allowAgentLogoff": { "type": "boolean" },
                    "allowCallWaitingForAgents": { "type": "boolean" },
                    "allowCallsToAgentsInWrapUp": { "type": "boolean" },
                    "overrideAgentWrapUpTime": { "type": "boolean" },
                    "wrapUpSeconds": { "type": "integer", "minimum": 1, "maximum": 3600 },
                    "enableAutomaticStateChangeForAgents": { "type": "boolean" },
                    "agentStateAfterCall": { "enum": ["Available", "Unavailable", "Wrap-Up"] },
                    "forceDeliveryOfCalls": { "type": "boolean" },
                    "forceDeliveryWaitTimeSeconds": { "type": "integer", "minimum": 1, "maximum": 10 }
                }
            },
            "agentUnavailableCode": { "type": "string", "minLength": 1, "maxLength": 10 },
            "bandwidthAndQoS": {
                "type": "object",
                "additionalProperties": false,
                "properties": {
                    "externalPreferredAudioCodec": { "enum": ["None", "G711", "G722", "G729", "G726", "AMR", "AMR-WB"] },
                    "internalPreferredAudioCodec": { "enum": ["None", "G711", "G722", "G729", "G726", "AMR", "AMR-WB"] }
                }
            }
        }
    },
    "response": {
	    "title": "Create Site Call Center response body parameters schema",
	    "type": "object",
        "properties": {
            "_links": {
				"type": "object",
				"required": true,
				"properties": {
					"self": {
						"type": "object",
						"required": true,
						"properties": {
							"href": {
								"type": "string",
								"required": true
							}
						}
					}
				}
			},
			"callCenterId": { "type": "string", "minLength": 1, "maxLength": 161, "required": true },
			"profile": {
                "type": "object",
                "additionalproperties": false,
                "required": true,
                "properties": {
                    "callingLineId": {
                        "type": "object",
                        "required": true,
                        "additionalproperties": false,
                        "properties": {
                            "lastName": { "type": "string", "minLength": 1, "maxLength": 30, "pattern": "^[\\x20-\\x21\\x23-\\x24\\x26-\\x2A\\x2C-\\x2E\\x30-\\x7F]+$", "required": true },
                            "firstName": { "type": "string", "minLength": 1, "maxLength": 30, "pattern": "^[\\x20-\\x21\\x23-\\x24\\x26-\\x2A\\x2C-\\x2E\\x30-\\x7F]+$", "required": true }
                        }
                    },
                    "extension": { "type": "string", "minLength": 2, "maxLength": 20, "pattern": "^[0-9]+$" },
                    "publicServiceIdentity": { "$ref": "/bwksSipUri" }
                }
            },
            "extensions": {
                "type": "object",
                "required": true,
                "properties": {
                    "type": "object",
                    "properties": {
                        "broadworks": {
                            "type": "object",
                            "required": true,
                            "additionalProperties": false,
                            "properties": {
                                "resourceId":{ "type": "string", "minLength": 1, "maxLength": 161, "required": true }
                            }
                        }
                    }
                }
            },
            "policy": { "enum": ["Circular", "Regular", "Simultaneous", "Uniform", "Weighted"] },
            "callCenterSettings": {
                "type": "object",
                "additionalProperties": false,
                "properties": {
                    "enableVideo": { "type": "boolean" },
                    "queueLength": { "type": "integer", "minimum": 0, "maximum": 525 },
                    "playRingingWhenOfferingCall": { "type": "boolean" },
                    "allowCallerToDialEscapeDigit": { "type": "boolean" },
                    "escapeDigit": { "type": "string", "minLength": 1, "maxLength": 1, "pattern": "^[0-9]+$" }
                }
            },
            "agentSettings": {
                "type": "object",
                "additionalProperties": false,
                "properties": {
                    "allowAgentLogoff": { "type": "boolean" },
                    "allowCallWaitingForAgents": { "type": "boolean" }
                }
            },
            "bandwidthAndQoS": {
                "type": "object",
                "additionalProperties": false,
                "properties": {
                    "externalPreferredAudioCodec": { "enum": ["None", "G711", "G722", "G729", "G726", "AMR", "AMR-WB"] },
                    "internalPreferredAudioCodec": { "enum": ["None", "G711", "G722", "G729", "G726", "AMR", "AMR-WB"] }
                }
            },
            "curies": {
				"type": "array",
				"required": true,
				"items": {
					"type": "object",
					"properties": {
						"name": { "type": "string", "required": true },
						"href": { "type": "string", "required": true },
						"templated": { "type": "boolean", "required": true }
					}
				}
			}
        }
	}
}

DELETE /loki/call-centers/{+callCenterId}
{
    "requestURITemplate": {
        "title": "Delete Call Center request URI template parameters schema",
        "additionalProperties": false,
        "properties": {
            "callCenterId": { 
                "type": "string", 
                "description": "The Call Center Id must have the domain, but that is not enforced by validation",
                "minLength": 1, 
                "maxLength": 161,
                "required": true 
            }
        }
    },
    "requestBody": {},
    "response": {}
}

POST /loki/instant-group-calls{?mode}
{   
    "requestURIQuery": {
        "title": "Create Site Instant Group Call request URI Query parameters schema",
        "properties": {
			"mode": { "enum": [ "create-only" ], "required": true }
		}
	},
    "requestBody": { 
        "title": "Create Site Instant Group Call request body parameters schema",
        "type": "object",
        "additionalProperties": false,
        "properties": {
            "customerId": { "type": "string", "minLength": 1, "maxLength": 30 },
            "siteId": { "type": "string", "minLength": 1, "maxLength": 30 },
            "extensions": {
                "type": "object",
                "additionalproperties": false,
                "properties": {
                    "broadworks": {
                        "type": "object",
                        "additionalproperties": false,
                        "properties": {
                            "serviceProviderId": { "type": "string", "minLength": 1, "maxLength": 30 },
                            "groupId": { "type": "string", "minLength": 1, "maxLength": 30 },
                            "resourceId": { "type": "string", "minLength": 1, "maxLength": 161 }
                        }
                    }
                }
            },
            "profile": {
                "type": "object",
                "additionalproperties": false,
                "required": true,
                "properties": {
                    "name": { "type": "string", "minLength": 1, "maxLength": 30, "required": true },
                    "callingLineId": {
                        "type": "object",
                        "additionalproperties": false,
                        "properties": {
                            "lastName": { "type": "string", "minLength": 1, "maxLength": 30, "pattern": "^[\\x20-\\x21\\x23-\\x24\\x26-\\x2A\\x2C-\\x2E\\x30-\\x7F]+$" },
                            "firstName": { "type": "string", "minLength": 1, "maxLength": 30, "pattern": "^[\\x20-\\x21\\x23-\\x24\\x26-\\x2A\\x2C-\\x2E\\x30-\\x7F]+$" },
                            "phoneNumber": { "$ref": "/bwksDnSchema" }
                        }
                    },
                    "phoneNumber": { "$ref": "/bwksDnSchema" },
                    "tnRoutine": { "$ref": "/tnRoutineWithNoNumber" },
                    "extension": { "type": ["string", "null"], "minLength": 2, "maxLength": 20, "pattern": "^[0-9]+$" },
                    "password": { "type": "string", "minLength": 1, "maxLength": 60 },
                    "department": { "type": "string", "minLength": 1, "maxLength": 50 },
                    "language": { "type": "string", "minLength": 1, "maxLength": 40 },
                    "timeZone": { "type": "string", "minLength": 1, "maxLength": 127 },
                    "alias": {
                        "type": "array",
                        "maxItems": 3,
                        "items": { "$ref": "/bwksSipUri" }
                    },
                    "publicServiceIdentity": { "$ref": "/bwksSipUri" }
                }
            },
            "networkClassOfService": { "type": "string", "minLength": 1, "maxLength": 40 },
            "services": {
                "type": "object",
                "patternproperties": {
                    "^.+$" : {
                        "type": "object"
                    }
                }
            },
            "destinationPhoneNumber": {
                "type": "array",
                "items": { "$ref": "/outgoingDnOrSipUri" }
            },
            "isAnswerTimeoutEnabled": { "type": "boolean" },
            "answerTimeoutMinutes": { "type": "integer", "minimum": 1, "maximum": 60 }
        }
    },
    "response": {
	    "title": "Create Site Instant Group Call response body parameters schema",
	    "type": "object",
        "properties": {
            "_links": {
				"type": "object",
				"required": true,
				"properties": {
					"self": {
						"type": "object",
						"required": true,
						"properties": {
							"href": {
								"type": "string",
								"required": true
							}
						}
					}
				}
			},
			"instantGroupCallId": { "type": "string", "minLength": 1, "maxLength": 161, "required": true },
			"profile": {
                "type": "object",
                "additionalproperties": false,
                "required": true,
                "properties": {
                    "callingLineId": {
                        "type": "object",
                        "required": true,
                        "additionalproperties": false,
                        "properties": {
                            "lastName": { "type": "string", "minLength": 1, "maxLength": 30, "pattern": "^[\\x20-\\x21\\x23-\\x24\\x26-\\x2A\\x2C-\\x2E\\x30-\\x7F]+$", "required": true },
                            "firstName": { "type": "string", "minLength": 1, "maxLength": 30, "pattern": "^[\\x20-\\x21\\x23-\\x24\\x26-\\x2A\\x2C-\\x2E\\x30-\\x7F]+$", "required": true }
                        }
                    },
                    "extension": { "type": "string", "minLength": 2, "maxLength": 20, "pattern": "^[0-9]+$" },
                    "publicServiceIdentity": { "$ref": "/bwksSipUri" }
                }
            },
            "extensions": {
                "type": "object",
                "required": true,
                "properties": {
                    "type": "object",
                    "properties": {
                        "broadworks": {
                            "type": "object",
                            "required": true,
                            "additionalProperties": false,
                            "properties": {
                                "resourceId":{ "type": "string", "minLength": 1, "maxLength": 161, "required": true }
                            }
                        }
                    }
                }
            },
            "curies": {
				"type": "array",
				"required": true,
				"items": {
					"type": "object",
					"properties": {
						"name": { "type": "string", "required": true },
						"href": { "type": "string", "required": true },
						"templated": { "type": "boolean", "required": true }
					}
				}
			}
        }
	}
}

DELETE /loki/instant-group-calls/{+instantGroupCallId}
{
    "requestURITemplate": {
        "title": "Delete Instant Group Call request URI template parameters schema",
        "additionalProperties": false,
        "properties": {
            "instantGroupCallId": { 
                "type": "string", 
                "description": "The Instant Group Call Id must have the domain, but that is not enforced by validation",
                "minLength": 1, 
                "maxLength": 161,
                "required": true 
            }
        }
    },
    "requestBody": {},
    "response": {}
}

PUT /loki/users/{+userId}/services/Intercept%20User
{   
    "requestURITemplate": {
        "title": "User Intercept Modify request URI template parameters schema",
        "additionalProperties": false,
        "properties": {
            "userId": { 
                "type": "string", 
                "minLength": 1, 
                "maxLength": 161,
                "pattern": "^[\\w'#\\$\\%&\\-\\/=\\?;\\.\\|~\\!`\\^\\{\\}][\\w'#\\$\\%&\\-\\/=\\?;\\.\\|~\\!`\\^\\{\\}\\+]{5,79}@[a-zA-Z\\d\\.\\-]{2,80}$",
                "required": true 
            }
        }
    },
    "requestBody": { 
        "title": "User Intercept User Modify request body parameters schema",
        "type": "object",
        "additionalProperties": false,
        "properties": {
            "isActive": { "type": "boolean" },
            "playNewPhoneNumber": {
                "type": "object",
                "additionalProperties": false,
                "properties": {
                    "enabled": { "type": "boolean" },
                    "phoneNumber": {
                        "extends":[{
                            "$ref": "/bwksDnSchema"
                        }, {
                            "type": ["string", "null"]
                        }]
                    }
                }
            },
            "transferOnZeroToPhoneNumber": {
                "type": "object",
                "additionalProperties": false,
                "properties": {
                    "enabled": { "type": "boolean" },
                    "phoneNumber": { "type": ["string", "null"], "minLength": 1, "maxLength": 30 }
                }
            },
            "routeToVoiceMail": { "type": "boolean" },
            "announcementSelection": { "enum": ["Default", "Personal"] },
            "audioFile": {
                "type": "object",
                "additionalProperties": false,
                "properties": {
                    "description": { "type": "string", "minLength": 1, "maxLength": 256, "required": true },
                    "mediaType": { "enum": ["WMA", "WAV", "3GP", "MOV"], "required": true },
                    "sourceFileName": { "type": "string", "minLength": 1 },
                    "content": { "type": "string", "minLength": 1 }
                }
            },
            "videoFile": {
                "type": "object",
                "additionalProperties": false,
                "properties": {
                    "description": { "type": "string", "minLength": 1, "maxLength": 256, "required": true },
                    "mediaType": { "enum": ["WMA", "WAV", "3GP", "MOV"], "required": true },
                    "sourceFileName": { "type": "string", "minLength": 1 },
                    "content": { "type": "string", "minLength": 1 }
                }
            },
            "outboundReroutePhoneNumber": {
                "type": "object",
                "additionalProperties": false,
                "properties": {
                    "enabled": { "type": "boolean" },
                    "phoneNumber": { "$ref": "/outgoingDnOrSipUri" }
                }
            },
            "allowOutboundLocalCalls": { "type": "boolean" },
            "inboundCallMode": { "enum": ["Intercept All", "Allow All", "Allow System Dns"] },
            "alternateBlockingAnnouncement": { "type": "boolean" }
        }
    },
    "response": {}
}